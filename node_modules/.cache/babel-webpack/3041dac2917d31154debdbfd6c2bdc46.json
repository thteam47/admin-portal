{"ast":null,"code":"import 'core-js/modules/es.array.map';\nimport 'core-js/modules/es.regexp.exec';\nimport 'core-js/modules/es.string.match';\nimport 'core-js/modules/es.string.replace';\nimport 'core-js/modules/es.string.starts-with';\nimport 'core-js/modules/es.array.join';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport 'core-js/modules/es.symbol';\nimport 'core-js/modules/es.array.filter';\nimport 'core-js/modules/es.array.for-each';\nimport 'core-js/modules/es.object.get-own-property-descriptor';\nimport 'core-js/modules/es.object.get-own-property-descriptors';\nimport 'core-js/modules/es.object.keys';\nimport 'core-js/modules/web.dom-collections.for-each';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport 'core-js/modules/es.array.concat';\nimport 'core-js/modules/es.array.every';\nimport 'core-js/modules/es.array.reduce';\nimport 'core-js/modules/es.object.to-string';\nimport 'core-js/modules/es.promise';\nimport 'core-js/modules/es.string.split';\nimport requestAnimationFrame from 'raf';\nimport 'core-js/modules/es.function.name';\nimport RGBColor from 'rgbcolor';\nimport 'core-js/modules/es.reflect.construct';\nimport 'core-js/modules/es.regexp.to-string';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport 'core-js/modules/es.array.from';\nimport 'core-js/modules/es.array.includes';\nimport 'core-js/modules/es.array.some';\nimport 'core-js/modules/es.string.includes';\nimport 'core-js/modules/es.string.iterator';\nimport 'core-js/modules/es.string.trim';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport 'core-js/modules/es.array.index-of';\nimport 'core-js/modules/es.array.reverse';\nimport _get from '@babel/runtime/helpers/get';\nimport 'core-js/modules/es.number.constructor';\nimport 'core-js/modules/es.array.fill';\nimport 'core-js/modules/es.reflect.delete-property';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport 'core-js/modules/es.array.iterator';\nimport 'core-js/modules/web.dom-collections.iterator';\nimport 'core-js/modules/es.symbol.description';\nimport 'core-js/modules/es.symbol.iterator';\nimport 'core-js/modules/es.array.slice';\nimport 'core-js/modules/es.map';\nimport 'core-js/modules/es.reflect.apply';\nimport 'core-js/modules/es.reflect.get-prototype-of';\nimport { canvasRGBA } from 'stackblur-canvas';\n\n/**\n * HTML-safe compress white-spaces.\n * @param str - String to compress.\n */\nfunction compressSpaces(str) {\n  return str.replace(/(?!\\u3000)\\s+/gm, ' ');\n}\n/**\n * HTML-safe left trim.\n * @param str - String to trim.\n */\n\nfunction trimLeft(str) {\n  return str.replace(/^[\\n \\t]+/, '');\n}\n/**\n * HTML-safe right trim.\n * @param str - String to trim.\n */\n\nfunction trimRight(str) {\n  return str.replace(/[\\n \\t]+$/, '');\n}\n/**\n * String to numbers array.\n * @param str - Numbers string.\n */\n\nfunction toNumbers(str) {\n  var matches = (str || '').match(/-?(\\d+(?:\\.\\d*(?:[eE][+-]?\\d+)?)?|\\.\\d+)(?=\\D|$)/gm) || [];\n  return matches.map(parseFloat);\n} // Microsoft Edge fix\n\nvar allUppercase = /^[A-Z-]+$/;\n/**\n * Normalize attribute name.\n * @param name - Attribute name.\n */\n\nfunction normalizeAttributeName(name) {\n  if (allUppercase.test(name)) {\n    return name.toLowerCase();\n  }\n  return name;\n}\n/**\n * Parse external URL.\n * @param url - CSS url string.\n */\n\nfunction parseExternalUrl(url) {\n  //                                   single quotes [2]\n  //                                   v           double quotes [3]\n  //                                   v           v        no quotes [4]\n  //                                   v           v        v\n  var urlMatch = url.match(/url\\(('([^']+)'|\"([^\"]+)\"|([^'\"\\)]+))\\)/) || [];\n  return urlMatch[2] || urlMatch[3] || urlMatch[4];\n}\n/**\n * Transform floats to integers in rgb colors.\n * @param color - Color to normalize.\n */\n\nfunction normalizeColor(color) {\n  if (!color.startsWith('rgb')) {\n    return color;\n  }\n  var rgbParts = 3;\n  var normalizedColor = color.replace(/\\d+(\\.\\d+)?/g, function (num, isFloat) {\n    return rgbParts-- && isFloat ? String(Math.round(parseFloat(num))) : num;\n  });\n  return normalizedColor;\n}\n\n// slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js\nvar attributeRegex = /(\\[[^\\]]+\\])/g;\nvar idRegex = /(#[^\\s\\+>~\\.\\[:]+)/g;\nvar classRegex = /(\\.[^\\s\\+>~\\.\\[:]+)/g;\nvar pseudoElementRegex = /(::[^\\s\\+>~\\.\\[:]+|:first-line|:first-letter|:before|:after)/gi;\nvar pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^\\)]*\\))/gi;\nvar pseudoClassRegex = /(:[^\\s\\+>~\\.\\[:]+)/g;\nvar elementRegex = /([^\\s\\+>~\\.\\[:]+)/g;\nfunction findSelectorMatch(selector, regex) {\n  var matches = selector.match(regex);\n  if (!matches) {\n    return [selector, 0];\n  }\n  return [selector.replace(regex, ' '), matches.length];\n}\n/**\n * Measure selector specificity.\n * @param selector - Selector to measure.\n */\n\nfunction getSelectorSpecificity(selector) {\n  var specificity = [0, 0, 0];\n  var currentSelector = selector.replace(/:not\\(([^\\)]*)\\)/g, '     $1 ').replace(/{[\\s\\S]*/gm, ' ');\n  var delta = 0;\n  var _findSelectorMatch = findSelectorMatch(currentSelector, attributeRegex);\n  var _findSelectorMatch2 = _slicedToArray(_findSelectorMatch, 2);\n  currentSelector = _findSelectorMatch2[0];\n  delta = _findSelectorMatch2[1];\n  specificity[1] += delta;\n  var _findSelectorMatch3 = findSelectorMatch(currentSelector, idRegex);\n  var _findSelectorMatch4 = _slicedToArray(_findSelectorMatch3, 2);\n  currentSelector = _findSelectorMatch4[0];\n  delta = _findSelectorMatch4[1];\n  specificity[0] += delta;\n  var _findSelectorMatch5 = findSelectorMatch(currentSelector, classRegex);\n  var _findSelectorMatch6 = _slicedToArray(_findSelectorMatch5, 2);\n  currentSelector = _findSelectorMatch6[0];\n  delta = _findSelectorMatch6[1];\n  specificity[1] += delta;\n  var _findSelectorMatch7 = findSelectorMatch(currentSelector, pseudoElementRegex);\n  var _findSelectorMatch8 = _slicedToArray(_findSelectorMatch7, 2);\n  currentSelector = _findSelectorMatch8[0];\n  delta = _findSelectorMatch8[1];\n  specificity[2] += delta;\n  var _findSelectorMatch9 = findSelectorMatch(currentSelector, pseudoClassWithBracketsRegex);\n  var _findSelectorMatch10 = _slicedToArray(_findSelectorMatch9, 2);\n  currentSelector = _findSelectorMatch10[0];\n  delta = _findSelectorMatch10[1];\n  specificity[1] += delta;\n  var _findSelectorMatch11 = findSelectorMatch(currentSelector, pseudoClassRegex);\n  var _findSelectorMatch12 = _slicedToArray(_findSelectorMatch11, 2);\n  currentSelector = _findSelectorMatch12[0];\n  delta = _findSelectorMatch12[1];\n  specificity[1] += delta;\n  currentSelector = currentSelector.replace(/[\\*\\s\\+>~]/g, ' ').replace(/[#\\.]/g, ' ');\n  var _findSelectorMatch13 = findSelectorMatch(currentSelector, elementRegex);\n  var _findSelectorMatch14 = _slicedToArray(_findSelectorMatch13, 2);\n  currentSelector = _findSelectorMatch14[0];\n  delta = _findSelectorMatch14[1];\n  // lgtm [js/useless-assignment-to-local]\n  specificity[2] += delta;\n  return specificity.join('');\n}\nvar PSEUDO_ZERO = .00000001;\n/**\n * Vector magnitude.\n */\n\nfunction vectorMagnitude(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n/**\n * Ratio between two vectors.\n */\n\nfunction vectorsRatio(u, v) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vectorMagnitude(u) * vectorMagnitude(v));\n}\n/**\n * Angle between two vectors.\n */\n\nfunction vectorsAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vectorsRatio(u, v));\n}\nfunction CB1(t) {\n  return t * t * t;\n}\nfunction CB2(t) {\n  return 3 * t * t * (1 - t);\n}\nfunction CB3(t) {\n  return 3 * t * (1 - t) * (1 - t);\n}\nfunction CB4(t) {\n  return (1 - t) * (1 - t) * (1 - t);\n}\nfunction QB1(t) {\n  return t * t;\n}\nfunction QB2(t) {\n  return 2 * t * (1 - t);\n}\nfunction QB3(t) {\n  return (1 - t) * (1 - t);\n}\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\nvar runtime_1 = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2014-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n  var runtime = function (exports) {\n    var Op = Object.prototype;\n    var hasOwn = Op.hasOwnProperty;\n    var undefined$1; // More compressible than void 0.\n\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n    function wrap(innerFn, outerFn, self, tryLocsList) {\n      // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n      var generator = Object.create(protoGenerator.prototype);\n      var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n      // .throw, and .return methods.\n\n      generator._invoke = makeInvokeMethod(innerFn, self, context);\n      return generator;\n    }\n    exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n    // record like context.tryEntries[i].completion. This interface could\n    // have been (and was previously) designed to take a closure to be\n    // invoked without arguments, but in all the cases we care about we\n    // already have an existing method we want to call, so there's no need\n    // to create a new function object. We can even get away with assuming\n    // the method takes exactly one argument, since that happens to be true\n    // in every case, so we don't have to touch the arguments object. The\n    // only additional allocation required is the completion record, which\n    // has a stable shape and so hopefully should be cheap to allocate.\n\n    function tryCatch(fn, obj, arg) {\n      try {\n        return {\n          type: \"normal\",\n          arg: fn.call(obj, arg)\n        };\n      } catch (err) {\n        return {\n          type: \"throw\",\n          arg: err\n        };\n      }\n    }\n    var GenStateSuspendedStart = \"suspendedStart\";\n    var GenStateSuspendedYield = \"suspendedYield\";\n    var GenStateExecuting = \"executing\";\n    var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n    // breaking out of the dispatch switch statement.\n\n    var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n    // .constructor.prototype properties for functions that return Generator\n    // objects. For full spec compliance, you may wish to configure your\n    // minifier not to mangle the names of these two functions.\n\n    function Generator() {}\n    function GeneratorFunction() {}\n    function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n    // don't natively support it.\n\n    var IteratorPrototype = {};\n    IteratorPrototype[iteratorSymbol] = function () {\n      return this;\n    };\n    var getProto = Object.getPrototypeOf;\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n    if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n      // This environment has a native %IteratorPrototype%; use it instead\n      // of the polyfill.\n      IteratorPrototype = NativeIteratorPrototype;\n    }\n    var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n    GeneratorFunctionPrototype.constructor = GeneratorFunction;\n    GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n    // Iterator interface in terms of a single ._invoke method.\n\n    function defineIteratorMethods(prototype) {\n      [\"next\", \"throw\", \"return\"].forEach(function (method) {\n        prototype[method] = function (arg) {\n          return this._invoke(method, arg);\n        };\n      });\n    }\n    exports.isGeneratorFunction = function (genFun) {\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\n      return ctor ? ctor === GeneratorFunction ||\n      // For the native GeneratorFunction constructor, the best we can\n      // do is to check its .name property.\n      (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n    };\n    exports.mark = function (genFun) {\n      if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n      } else {\n        genFun.__proto__ = GeneratorFunctionPrototype;\n        if (!(toStringTagSymbol in genFun)) {\n          genFun[toStringTagSymbol] = \"GeneratorFunction\";\n        }\n      }\n      genFun.prototype = Object.create(Gp);\n      return genFun;\n    }; // Within the body of any async function, `await x` is transformed to\n    // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n    // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n    // meant to be awaited.\n\n    exports.awrap = function (arg) {\n      return {\n        __await: arg\n      };\n    };\n    function AsyncIterator(generator, PromiseImpl) {\n      function invoke(method, arg, resolve, reject) {\n        var record = tryCatch(generator[method], generator, arg);\n        if (record.type === \"throw\") {\n          reject(record.arg);\n        } else {\n          var result = record.arg;\n          var value = result.value;\n          if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n            return PromiseImpl.resolve(value.__await).then(function (value) {\n              invoke(\"next\", value, resolve, reject);\n            }, function (err) {\n              invoke(\"throw\", err, resolve, reject);\n            });\n          }\n          return PromiseImpl.resolve(value).then(function (unwrapped) {\n            // When a yielded Promise is resolved, its final value becomes\n            // the .value of the Promise<{value,done}> result for the\n            // current iteration.\n            result.value = unwrapped;\n            resolve(result);\n          }, function (error) {\n            // If a rejected Promise was yielded, throw the rejection back\n            // into the async generator function so it can be handled there.\n            return invoke(\"throw\", error, resolve, reject);\n          });\n        }\n      }\n      var previousPromise;\n      function enqueue(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(callInvokeWithMethodAndArg,\n        // Avoid propagating failures to Promises returned by later\n        // invocations of the iterator.\n        callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      } // Define the unified helper method that is used to implement .next,\n      // .throw, and .return (see defineIteratorMethods).\n\n      this._invoke = enqueue;\n    }\n    defineIteratorMethods(AsyncIterator.prototype);\n    AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n      return this;\n    };\n    exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n    // AsyncIterator objects; they just return a Promise for the value of\n    // the final result produced by the iterator.\n\n    exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n      if (PromiseImpl === void 0) PromiseImpl = Promise;\n      var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n      return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function (result) {\n        return result.done ? result.value : iter.next();\n      });\n    };\n    function makeInvokeMethod(innerFn, self, context) {\n      var state = GenStateSuspendedStart;\n      return function invoke(method, arg) {\n        if (state === GenStateExecuting) {\n          throw new Error(\"Generator is already running\");\n        }\n        if (state === GenStateCompleted) {\n          if (method === \"throw\") {\n            throw arg;\n          } // Be forgiving, per 25.3.3.3.3 of the spec:\n          // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n          return doneResult();\n        }\n        context.method = method;\n        context.arg = arg;\n        while (true) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n          if (context.method === \"next\") {\n            // Setting context._sent for legacy support of Babel's\n            // function.sent implementation.\n            context.sent = context._sent = context.arg;\n          } else if (context.method === \"throw\") {\n            if (state === GenStateSuspendedStart) {\n              state = GenStateCompleted;\n              throw context.arg;\n            }\n            context.dispatchException(context.arg);\n          } else if (context.method === \"return\") {\n            context.abrupt(\"return\", context.arg);\n          }\n          state = GenStateExecuting;\n          var record = tryCatch(innerFn, self, context);\n          if (record.type === \"normal\") {\n            // If an exception is thrown from innerFn, we leave state ===\n            // GenStateExecuting and loop back for another invocation.\n            state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n            if (record.arg === ContinueSentinel) {\n              continue;\n            }\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          } else if (record.type === \"throw\") {\n            state = GenStateCompleted; // Dispatch the exception by looping back around to the\n            // context.dispatchException(context.arg) call above.\n\n            context.method = \"throw\";\n            context.arg = record.arg;\n          }\n        }\n      };\n    } // Call delegate.iterator[context.method](context.arg) and handle the\n    // result, either by returning a { value, done } result from the\n    // delegate iterator, or by modifying context.method and context.arg,\n    // setting context.delegate to null, and returning the ContinueSentinel.\n\n    function maybeInvokeDelegate(delegate, context) {\n      var method = delegate.iterator[context.method];\n      if (method === undefined$1) {\n        // A .throw or .return when the delegate iterator has no .throw\n        // method always terminates the yield* loop.\n        context.delegate = null;\n        if (context.method === \"throw\") {\n          // Note: [\"return\"] must be used for ES3 parsing compatibility.\n          if (delegate.iterator[\"return\"]) {\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            context.method = \"return\";\n            context.arg = undefined$1;\n            maybeInvokeDelegate(delegate, context);\n            if (context.method === \"throw\") {\n              // If maybeInvokeDelegate(context) changed context.method from\n              // \"return\" to \"throw\", let that override the TypeError below.\n              return ContinueSentinel;\n            }\n          }\n          context.method = \"throw\";\n          context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n        }\n        return ContinueSentinel;\n      }\n      var record = tryCatch(method, delegate.iterator, context.arg);\n      if (record.type === \"throw\") {\n        context.method = \"throw\";\n        context.arg = record.arg;\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n      var info = record.arg;\n      if (!info) {\n        context.method = \"throw\";\n        context.arg = new TypeError(\"iterator result is not an object\");\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n      if (info.done) {\n        // Assign the result of the finished delegate to the temporary\n        // variable specified by delegate.resultName (see delegateYield).\n        context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n        context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n        // exception, let the outer generator proceed normally. If\n        // context.method was \"next\", forget context.arg since it has been\n        // \"consumed\" by the delegate iterator. If context.method was\n        // \"return\", allow the original .return call to continue in the\n        // outer generator.\n\n        if (context.method !== \"return\") {\n          context.method = \"next\";\n          context.arg = undefined$1;\n        }\n      } else {\n        // Re-yield the result returned by the delegate method.\n        return info;\n      } // The delegate iterator is finished, so forget it and continue with\n      // the outer generator.\n\n      context.delegate = null;\n      return ContinueSentinel;\n    } // Define Generator.prototype.{next,throw,return} in terms of the\n    // unified ._invoke helper method.\n\n    defineIteratorMethods(Gp);\n    Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n    // @@iterator function is called on it. Some browsers' implementations of the\n    // iterator prototype chain incorrectly implement this, causing the Generator\n    // object to not be returned from this call. This ensures that doesn't happen.\n    // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n    Gp[iteratorSymbol] = function () {\n      return this;\n    };\n    Gp.toString = function () {\n      return \"[object Generator]\";\n    };\n    function pushTryEntry(locs) {\n      var entry = {\n        tryLoc: locs[0]\n      };\n      if (1 in locs) {\n        entry.catchLoc = locs[1];\n      }\n      if (2 in locs) {\n        entry.finallyLoc = locs[2];\n        entry.afterLoc = locs[3];\n      }\n      this.tryEntries.push(entry);\n    }\n    function resetTryEntry(entry) {\n      var record = entry.completion || {};\n      record.type = \"normal\";\n      delete record.arg;\n      entry.completion = record;\n    }\n    function Context(tryLocsList) {\n      // The root entry object (effectively a try statement without a catch\n      // or a finally block) gives us a place to store values thrown from\n      // locations where there is no enclosing try statement.\n      this.tryEntries = [{\n        tryLoc: \"root\"\n      }];\n      tryLocsList.forEach(pushTryEntry, this);\n      this.reset(true);\n    }\n    exports.keys = function (object) {\n      var keys = [];\n      for (var key in object) {\n        keys.push(key);\n      }\n      keys.reverse(); // Rather than returning an object with a next method, we keep\n      // things simple and return the next function itself.\n\n      return function next() {\n        while (keys.length) {\n          var key = keys.pop();\n          if (key in object) {\n            next.value = key;\n            next.done = false;\n            return next;\n          }\n        } // To avoid creating an additional object, we just hang the .value\n        // and .done properties off the next function object itself. This\n        // also ensures that the minifier will not anonymize the function.\n\n        next.done = true;\n        return next;\n      };\n    };\n    function values(iterable) {\n      if (iterable) {\n        var iteratorMethod = iterable[iteratorSymbol];\n        if (iteratorMethod) {\n          return iteratorMethod.call(iterable);\n        }\n        if (typeof iterable.next === \"function\") {\n          return iterable;\n        }\n        if (!isNaN(iterable.length)) {\n          var i = -1,\n            next = function next() {\n              while (++i < iterable.length) {\n                if (hasOwn.call(iterable, i)) {\n                  next.value = iterable[i];\n                  next.done = false;\n                  return next;\n                }\n              }\n              next.value = undefined$1;\n              next.done = true;\n              return next;\n            };\n          return next.next = next;\n        }\n      } // Return an iterator with no values.\n\n      return {\n        next: doneResult\n      };\n    }\n    exports.values = values;\n    function doneResult() {\n      return {\n        value: undefined$1,\n        done: true\n      };\n    }\n    Context.prototype = {\n      constructor: Context,\n      reset: function (skipTempReset) {\n        this.prev = 0;\n        this.next = 0; // Resetting context._sent for legacy support of Babel's\n        // function.sent implementation.\n\n        this.sent = this._sent = undefined$1;\n        this.done = false;\n        this.delegate = null;\n        this.method = \"next\";\n        this.arg = undefined$1;\n        this.tryEntries.forEach(resetTryEntry);\n        if (!skipTempReset) {\n          for (var name in this) {\n            // Not sure about the optimal order of these conditions:\n            if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n              this[name] = undefined$1;\n            }\n          }\n        }\n      },\n      stop: function () {\n        this.done = true;\n        var rootEntry = this.tryEntries[0];\n        var rootRecord = rootEntry.completion;\n        if (rootRecord.type === \"throw\") {\n          throw rootRecord.arg;\n        }\n        return this.rval;\n      },\n      dispatchException: function (exception) {\n        if (this.done) {\n          throw exception;\n        }\n        var context = this;\n        function handle(loc, caught) {\n          record.type = \"throw\";\n          record.arg = exception;\n          context.next = loc;\n          if (caught) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            context.method = \"next\";\n            context.arg = undefined$1;\n          }\n          return !!caught;\n        }\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          var record = entry.completion;\n          if (entry.tryLoc === \"root\") {\n            // Exception thrown outside of any try block that could handle\n            // it, so set the completion value of the entire function to\n            // throw the exception.\n            return handle(\"end\");\n          }\n          if (entry.tryLoc <= this.prev) {\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n            if (hasCatch && hasFinally) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              } else if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else if (hasCatch) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              }\n            } else if (hasFinally) {\n              if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else {\n              throw new Error(\"try statement without catch or finally\");\n            }\n          }\n        }\n      },\n      abrupt: function (type, arg) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n            var finallyEntry = entry;\n            break;\n          }\n        }\n        if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n          // Ignore the finally entry if control is not jumping to a\n          // location outside the try/catch block.\n          finallyEntry = null;\n        }\n        var record = finallyEntry ? finallyEntry.completion : {};\n        record.type = type;\n        record.arg = arg;\n        if (finallyEntry) {\n          this.method = \"next\";\n          this.next = finallyEntry.finallyLoc;\n          return ContinueSentinel;\n        }\n        return this.complete(record);\n      },\n      complete: function (record, afterLoc) {\n        if (record.type === \"throw\") {\n          throw record.arg;\n        }\n        if (record.type === \"break\" || record.type === \"continue\") {\n          this.next = record.arg;\n        } else if (record.type === \"return\") {\n          this.rval = this.arg = record.arg;\n          this.method = \"return\";\n          this.next = \"end\";\n        } else if (record.type === \"normal\" && afterLoc) {\n          this.next = afterLoc;\n        }\n        return ContinueSentinel;\n      },\n      finish: function (finallyLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.finallyLoc === finallyLoc) {\n            this.complete(entry.completion, entry.afterLoc);\n            resetTryEntry(entry);\n            return ContinueSentinel;\n          }\n        }\n      },\n      \"catch\": function (tryLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc === tryLoc) {\n            var record = entry.completion;\n            if (record.type === \"throw\") {\n              var thrown = record.arg;\n              resetTryEntry(entry);\n            }\n            return thrown;\n          }\n        } // The context.catch method must only be called with a location\n        // argument that corresponds to a known catch block.\n\n        throw new Error(\"illegal catch attempt\");\n      },\n      delegateYield: function (iterable, resultName, nextLoc) {\n        this.delegate = {\n          iterator: values(iterable),\n          resultName: resultName,\n          nextLoc: nextLoc\n        };\n        if (this.method === \"next\") {\n          // Deliberately forget the last sent value so that we don't\n          // accidentally pass it on to the delegate.\n          this.arg = undefined$1;\n        }\n        return ContinueSentinel;\n      }\n    }; // Regardless of whether this script is executing as a CommonJS module\n    // or not, return the runtime object so that we can declare the variable\n    // regeneratorRuntime in the outer scope, which allows this module to be\n    // injected easily by `bin/regenerator --include-runtime script.js`.\n\n    return exports;\n  }(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  module.exports);\n  try {\n    regeneratorRuntime = runtime;\n  } catch (accidentalStrictMode) {\n    // This module should not be running in strict mode, so the above\n    // assignment should always work unless something is misconfigured. Just\n    // in case runtime.js accidentally runs in strict mode, we can escape\n    // strict mode using a global Function call. This could conceivably fail\n    // if a Content Security Policy forbids using Function, but in that case\n    // the proper solution is to fix the accidental strict mode problem. If\n    // you've misconfigured your bundler to force strict mode and applied a\n    // CSP to forbid Function, and you're not willing to fix either of those\n    // problems, please detail your unique predicament in a GitHub issue.\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n});\nvar Property = /*#__PURE__*/function () {\n  function Property(document, name, value) {\n    _classCallCheck(this, Property);\n    this.document = document;\n    this.name = name;\n    this.value = value;\n    this.isNormalizedColor = false;\n  }\n  _createClass(Property, [{\n    key: \"hasValue\",\n    value: function hasValue() {\n      var value = this.value;\n      return value !== null && value !== '' && value !== 0 && typeof value !== 'undefined';\n    }\n  }, {\n    key: \"isString\",\n    value: function isString(regexp) {\n      var value = this.value;\n      var result = typeof value === 'string';\n      if (!result || !regexp) {\n        return result;\n      }\n      return regexp.test(value);\n    }\n  }, {\n    key: \"isUrlDefinition\",\n    value: function isUrlDefinition() {\n      return this.isString(/^url\\(/);\n    }\n  }, {\n    key: \"isPixels\",\n    value: function isPixels() {\n      if (!this.hasValue()) {\n        return false;\n      }\n      var asString = this.getString();\n      switch (true) {\n        case /px$/.test(asString):\n        case /^[0-9]+$/.test(asString):\n          return true;\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.value = value;\n      return this;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue(def) {\n      if (typeof def === 'undefined' || this.hasValue()) {\n        return this.value;\n      }\n      return def;\n    }\n  }, {\n    key: \"getNumber\",\n    value: function getNumber(def) {\n      if (!this.hasValue()) {\n        if (typeof def === 'undefined') {\n          return 0;\n        }\n        return parseFloat(def);\n      }\n      var value = this.value;\n      var n = parseFloat(value);\n      if (this.isString(/%$/)) {\n        n = n / 100.0;\n      }\n      return n;\n    }\n  }, {\n    key: \"getString\",\n    value: function getString(def) {\n      if (typeof def === 'undefined' || this.hasValue()) {\n        return typeof this.value === 'undefined' ? '' : String(this.value);\n      }\n      return String(def);\n    }\n  }, {\n    key: \"getColor\",\n    value: function getColor(def) {\n      var color = this.getString(def);\n      if (this.isNormalizedColor) {\n        return color;\n      }\n      this.isNormalizedColor = true;\n      color = normalizeColor(color);\n      this.value = color;\n      return color;\n    }\n  }, {\n    key: \"getDpi\",\n    value: function getDpi() {\n      return 96.0; // TODO: compute?\n    }\n  }, {\n    key: \"getRem\",\n    value: function getRem() {\n      return this.document.rootEmSize;\n    }\n  }, {\n    key: \"getEm\",\n    value: function getEm() {\n      return this.document.emSize;\n    }\n  }, {\n    key: \"getUnits\",\n    value: function getUnits() {\n      return this.getString().replace(/[0-9\\.\\-]/g, '');\n    }\n  }, {\n    key: \"getPixels\",\n    value: function getPixels(axisOrIsFontSize) {\n      var processPercent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!this.hasValue()) {\n        return 0;\n      }\n      var _ref = typeof axisOrIsFontSize === 'boolean' ? [undefined, axisOrIsFontSize] : [axisOrIsFontSize],\n        _ref2 = _slicedToArray(_ref, 2),\n        axis = _ref2[0],\n        isFontSize = _ref2[1];\n      var viewPort = this.document.screen.viewPort;\n      switch (true) {\n        case this.isString(/vmin$/):\n          return this.getNumber() / 100.0 * Math.min(viewPort.computeSize('x'), viewPort.computeSize('y'));\n        case this.isString(/vmax$/):\n          return this.getNumber() / 100.0 * Math.max(viewPort.computeSize('x'), viewPort.computeSize('y'));\n        case this.isString(/vw$/):\n          return this.getNumber() / 100.0 * viewPort.computeSize('x');\n        case this.isString(/vh$/):\n          return this.getNumber() / 100.0 * viewPort.computeSize('y');\n        case this.isString(/rem$/):\n          return this.getNumber() * this.getRem();\n        case this.isString(/em$/):\n          return this.getNumber() * this.getEm();\n        case this.isString(/ex$/):\n          return this.getNumber() * this.getEm() / 2.0;\n        case this.isString(/px$/):\n          return this.getNumber();\n        case this.isString(/pt$/):\n          return this.getNumber() * this.getDpi() * (1.0 / 72.0);\n        case this.isString(/pc$/):\n          return this.getNumber() * 15;\n        case this.isString(/cm$/):\n          return this.getNumber() * this.getDpi() / 2.54;\n        case this.isString(/mm$/):\n          return this.getNumber() * this.getDpi() / 25.4;\n        case this.isString(/in$/):\n          return this.getNumber() * this.getDpi();\n        case this.isString(/%$/) && isFontSize:\n          return this.getNumber() * this.getEm();\n        case this.isString(/%$/):\n          return this.getNumber() * viewPort.computeSize(axis);\n        default:\n          {\n            var n = this.getNumber();\n            if (processPercent && n < 1.0) {\n              return n * viewPort.computeSize(axis);\n            }\n            return n;\n          }\n      }\n    }\n  }, {\n    key: \"getMilliseconds\",\n    value: function getMilliseconds() {\n      if (!this.hasValue()) {\n        return 0;\n      }\n      if (this.isString(/ms$/)) {\n        return this.getNumber();\n      }\n      return this.getNumber() * 1000;\n    }\n  }, {\n    key: \"getRadians\",\n    value: function getRadians() {\n      if (!this.hasValue()) {\n        return 0;\n      }\n      switch (true) {\n        case this.isString(/deg$/):\n          return this.getNumber() * (Math.PI / 180.0);\n        case this.isString(/grad$/):\n          return this.getNumber() * (Math.PI / 200.0);\n        case this.isString(/rad$/):\n          return this.getNumber();\n        default:\n          return this.getNumber() * (Math.PI / 180.0);\n      }\n    }\n  }, {\n    key: \"getDefinition\",\n    value: function getDefinition() {\n      var asString = this.getString();\n      var name = asString.match(/#([^\\)'\"]+)/);\n      if (name) {\n        name = name[1];\n      }\n      if (!name) {\n        name = asString;\n      }\n      return this.document.definitions[name];\n    }\n  }, {\n    key: \"getFillStyleDefinition\",\n    value: function getFillStyleDefinition(element, opacity) {\n      var def = this.getDefinition();\n      if (!def) {\n        return null;\n      } // gradient\n\n      if (typeof def.createGradient === 'function') {\n        return def.createGradient(this.document.ctx, element, opacity);\n      } // pattern\n\n      if (typeof def.createPattern === 'function') {\n        if (def.getHrefAttribute().hasValue()) {\n          var patternTransform = def.getAttribute('patternTransform');\n          def = def.getHrefAttribute().getDefinition();\n          if (patternTransform.hasValue()) {\n            def.getAttribute('patternTransform', true).setValue(patternTransform.value);\n          }\n        }\n        return def.createPattern(this.document.ctx, element, opacity);\n      }\n      return null;\n    }\n  }, {\n    key: \"getTextBaseline\",\n    value: function getTextBaseline() {\n      if (!this.hasValue()) {\n        return null;\n      }\n      return Property.textBaselineMapping[this.getString()];\n    }\n  }, {\n    key: \"addOpacity\",\n    value: function addOpacity(opacity) {\n      var value = this.getColor();\n      var len = value.length;\n      var commas = 0; // Simulate old RGBColor version, which can't parse rgba.\n\n      for (var i = 0; i < len; i++) {\n        if (value[i] === ',') {\n          commas++;\n        }\n        if (commas === 3) {\n          break;\n        }\n      }\n      if (opacity.hasValue() && this.isString() && commas !== 3) {\n        var color = new RGBColor(value);\n        if (color.ok) {\n          color.alpha = opacity.getNumber();\n          value = color.toRGBA();\n        }\n      }\n      return new Property(this.document, this.name, value);\n    }\n  }], [{\n    key: \"empty\",\n    value: function empty(document) {\n      return new Property(document, 'EMPTY', '');\n    }\n  }]);\n  return Property;\n}();\nProperty.textBaselineMapping = {\n  'baseline': 'alphabetic',\n  'before-edge': 'top',\n  'text-before-edge': 'top',\n  'middle': 'middle',\n  'central': 'middle',\n  'after-edge': 'bottom',\n  'text-after-edge': 'bottom',\n  'ideographic': 'ideographic',\n  'alphabetic': 'alphabetic',\n  'hanging': 'hanging',\n  'mathematical': 'alphabetic'\n};\nvar ViewPort = /*#__PURE__*/function () {\n  function ViewPort() {\n    _classCallCheck(this, ViewPort);\n    this.viewPorts = [];\n  }\n  _createClass(ViewPort, [{\n    key: \"clear\",\n    value: function clear() {\n      this.viewPorts = [];\n    }\n  }, {\n    key: \"setCurrent\",\n    value: function setCurrent(width, height) {\n      this.viewPorts.push({\n        width: width,\n        height: height\n      });\n    }\n  }, {\n    key: \"removeCurrent\",\n    value: function removeCurrent() {\n      this.viewPorts.pop();\n    }\n  }, {\n    key: \"getCurrent\",\n    value: function getCurrent() {\n      var viewPorts = this.viewPorts;\n      return viewPorts[viewPorts.length - 1];\n    }\n  }, {\n    key: \"computeSize\",\n    value: function computeSize(d) {\n      if (typeof d === 'number') {\n        return d;\n      }\n      if (d === 'x') {\n        return this.width;\n      }\n      if (d === 'y') {\n        return this.height;\n      }\n      return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2)) / Math.sqrt(2);\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.getCurrent().width;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.getCurrent().height;\n    }\n  }]);\n  return ViewPort;\n}();\nvar Point = /*#__PURE__*/function () {\n  function Point(x, y) {\n    _classCallCheck(this, Point);\n    this.x = x;\n    this.y = y;\n  }\n  _createClass(Point, [{\n    key: \"angleTo\",\n    value: function angleTo(point) {\n      return Math.atan2(point.y - this.y, point.x - this.x);\n    }\n  }, {\n    key: \"applyTransform\",\n    value: function applyTransform(transform) {\n      var x = this.x,\n        y = this.y;\n      var xp = x * transform[0] + y * transform[2] + transform[4];\n      var yp = x * transform[1] + y * transform[3] + transform[5];\n      this.x = xp;\n      this.y = yp;\n    }\n  }], [{\n    key: \"parse\",\n    value: function parse(point) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var _toNumbers = toNumbers(point),\n        _toNumbers2 = _slicedToArray(_toNumbers, 2),\n        _toNumbers2$ = _toNumbers2[0],\n        x = _toNumbers2$ === void 0 ? defaultValue : _toNumbers2$,\n        _toNumbers2$2 = _toNumbers2[1],\n        y = _toNumbers2$2 === void 0 ? defaultValue : _toNumbers2$2;\n      return new Point(x, y);\n    }\n  }, {\n    key: \"parseScale\",\n    value: function parseScale(scale) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var _toNumbers3 = toNumbers(scale),\n        _toNumbers4 = _slicedToArray(_toNumbers3, 2),\n        _toNumbers4$ = _toNumbers4[0],\n        x = _toNumbers4$ === void 0 ? defaultValue : _toNumbers4$,\n        _toNumbers4$2 = _toNumbers4[1],\n        y = _toNumbers4$2 === void 0 ? x : _toNumbers4$2;\n      return new Point(x, y);\n    }\n  }, {\n    key: \"parsePath\",\n    value: function parsePath(path) {\n      var points = toNumbers(path);\n      var len = points.length;\n      var pathPoints = [];\n      for (var i = 0; i < len; i += 2) {\n        pathPoints.push(new Point(points[i], points[i + 1]));\n      }\n      return pathPoints;\n    }\n  }]);\n  return Point;\n}();\nvar Mouse = /*#__PURE__*/function () {\n  function Mouse(screen) {\n    _classCallCheck(this, Mouse);\n    this.screen = screen;\n    this.working = false;\n    this.events = [];\n    this.eventElements = [];\n    this.onClick = this.onClick.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n  }\n  _createClass(Mouse, [{\n    key: \"isWorking\",\n    value: function isWorking() {\n      return this.working;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.working) {\n        return;\n      }\n      var screen = this.screen,\n        onClick = this.onClick,\n        onMouseMove = this.onMouseMove;\n      var canvas = screen.ctx.canvas;\n      canvas.onclick = onClick;\n      canvas.onmousemove = onMouseMove;\n      this.working = true;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (!this.working) {\n        return;\n      }\n      var canvas = this.screen.ctx.canvas;\n      this.working = false;\n      canvas.onclick = null;\n      canvas.onmousemove = null;\n    }\n  }, {\n    key: \"hasEvents\",\n    value: function hasEvents() {\n      return this.working && this.events.length > 0;\n    }\n  }, {\n    key: \"runEvents\",\n    value: function runEvents() {\n      if (!this.working) {\n        return;\n      }\n      var document = this.screen,\n        events = this.events,\n        eventElements = this.eventElements;\n      var style = document.ctx.canvas.style;\n      if (style) {\n        style.cursor = '';\n      }\n      events.forEach(function (_ref, i) {\n        var run = _ref.run;\n        var element = eventElements[i];\n        while (element) {\n          run(element);\n          element = element.parent;\n        }\n      }); // done running, clear\n\n      this.events = [];\n      this.eventElements = [];\n    }\n  }, {\n    key: \"checkPath\",\n    value: function checkPath(element, ctx) {\n      if (!this.working || !ctx) {\n        return;\n      }\n      var events = this.events,\n        eventElements = this.eventElements;\n      events.forEach(function (_ref2, i) {\n        var x = _ref2.x,\n          y = _ref2.y;\n        if (!eventElements[i] && ctx.isPointInPath && ctx.isPointInPath(x, y)) {\n          eventElements[i] = element;\n        }\n      });\n    }\n  }, {\n    key: \"checkBoundingBox\",\n    value: function checkBoundingBox(element, boundingBox) {\n      if (!this.working || !boundingBox) {\n        return;\n      }\n      var events = this.events,\n        eventElements = this.eventElements;\n      events.forEach(function (_ref3, i) {\n        var x = _ref3.x,\n          y = _ref3.y;\n        if (!eventElements[i] && boundingBox.isPointInBox(x, y)) {\n          eventElements[i] = element;\n        }\n      });\n    }\n  }, {\n    key: \"mapXY\",\n    value: function mapXY(x, y) {\n      var _this$screen = this.screen,\n        window = _this$screen.window,\n        ctx = _this$screen.ctx;\n      var point = new Point(x, y);\n      var element = ctx.canvas;\n      while (element) {\n        point.x -= element.offsetLeft;\n        point.y -= element.offsetTop;\n        element = element.offsetParent;\n      }\n      if (window.scrollX) {\n        point.x += window.scrollX;\n      }\n      if (window.scrollY) {\n        point.y += window.scrollY;\n      }\n      return point;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(evt) {\n      var _this$mapXY = this.mapXY((evt || event).clientX, (evt || event).clientY),\n        x = _this$mapXY.x,\n        y = _this$mapXY.y;\n      this.events.push({\n        type: 'onclick',\n        x: x,\n        y: y,\n        run: function run(event) {\n          if (event.onClick) {\n            event.onClick();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove(evt) {\n      var _this$mapXY2 = this.mapXY((evt || event).clientX, (evt || event).clientY),\n        x = _this$mapXY2.x,\n        y = _this$mapXY2.y;\n      this.events.push({\n        type: 'onmousemove',\n        x: x,\n        y: y,\n        run: function run(event) {\n          if (event.onMouseMove) {\n            event.onMouseMove();\n          }\n        }\n      });\n    }\n  }]);\n  return Mouse;\n}();\nvar defaultWindow = typeof window !== 'undefined' ? window : null;\nvar defaultFetch = typeof fetch !== 'undefined' ? fetch.bind(void 0) // `fetch` depends on context: `someObject.fetch(...)` will throw error.\n: null;\nvar Screen = /*#__PURE__*/function () {\n  function Screen(ctx) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$fetch = _ref.fetch,\n      fetch = _ref$fetch === void 0 ? defaultFetch : _ref$fetch,\n      _ref$window = _ref.window,\n      window = _ref$window === void 0 ? defaultWindow : _ref$window;\n    _classCallCheck(this, Screen);\n    this.ctx = ctx;\n    this.FRAMERATE = 30;\n    this.MAX_VIRTUAL_PIXELS = 30000;\n    this.CLIENT_WIDTH = 800;\n    this.CLIENT_HEIGHT = 600;\n    this.viewPort = new ViewPort();\n    this.mouse = new Mouse(this);\n    this.animations = [];\n    this.waits = [];\n    this.frameDuration = 0;\n    this.isReadyLock = false;\n    this.isFirstRender = true;\n    this.intervalId = null;\n    this.window = window;\n    this.fetch = fetch;\n  }\n  _createClass(Screen, [{\n    key: \"wait\",\n    value: function wait(checker) {\n      this.waits.push(checker);\n    }\n  }, {\n    key: \"ready\",\n    value: function ready() {\n      if (!this.readyPromise) {\n        return Promise.resolve();\n      }\n      return this.readyPromise;\n    }\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      if (this.isReadyLock) {\n        return true;\n      }\n      var isReadyLock = this.waits.every(function (_) {\n        return _();\n      });\n      if (isReadyLock) {\n        this.waits = [];\n        if (this.resolveReady) {\n          this.resolveReady();\n        }\n      }\n      this.isReadyLock = isReadyLock;\n      return isReadyLock;\n    }\n  }, {\n    key: \"setDefaults\",\n    value: function setDefaults(ctx) {\n      // initial values and defaults\n      ctx.strokeStyle = 'rgba(0,0,0,0)';\n      ctx.lineCap = 'butt';\n      ctx.lineJoin = 'miter';\n      ctx.miterLimit = 4;\n    }\n  }, {\n    key: \"setViewBox\",\n    value: function setViewBox(_ref2) {\n      var document = _ref2.document,\n        ctx = _ref2.ctx,\n        aspectRatio = _ref2.aspectRatio,\n        width = _ref2.width,\n        desiredWidth = _ref2.desiredWidth,\n        height = _ref2.height,\n        desiredHeight = _ref2.desiredHeight,\n        _ref2$minX = _ref2.minX,\n        minX = _ref2$minX === void 0 ? 0 : _ref2$minX,\n        _ref2$minY = _ref2.minY,\n        minY = _ref2$minY === void 0 ? 0 : _ref2$minY,\n        refX = _ref2.refX,\n        refY = _ref2.refY,\n        _ref2$clip = _ref2.clip,\n        clip = _ref2$clip === void 0 ? false : _ref2$clip,\n        _ref2$clipX = _ref2.clipX,\n        clipX = _ref2$clipX === void 0 ? 0 : _ref2$clipX,\n        _ref2$clipY = _ref2.clipY,\n        clipY = _ref2$clipY === void 0 ? 0 : _ref2$clipY;\n      // aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n      var cleanAspectRatio = compressSpaces(aspectRatio).replace(/^defer\\s/, ''); // ignore defer\n\n      var _cleanAspectRatio$spl = cleanAspectRatio.split(' '),\n        _cleanAspectRatio$spl2 = _slicedToArray(_cleanAspectRatio$spl, 2),\n        aspectRatioAlign = _cleanAspectRatio$spl2[0],\n        aspectRatioMeetOrSlice = _cleanAspectRatio$spl2[1];\n      var align = aspectRatioAlign || 'xMidYMid';\n      var meetOrSlice = aspectRatioMeetOrSlice || 'meet'; // calculate scale\n\n      var scaleX = width / desiredWidth;\n      var scaleY = height / desiredHeight;\n      var scaleMin = Math.min(scaleX, scaleY);\n      var scaleMax = Math.max(scaleX, scaleY);\n      var finalDesiredWidth = desiredWidth;\n      var finalDesiredHeight = desiredHeight;\n      if (meetOrSlice === 'meet') {\n        finalDesiredWidth *= scaleMin;\n        finalDesiredHeight *= scaleMin;\n      }\n      if (meetOrSlice === 'slice') {\n        finalDesiredWidth *= scaleMax;\n        finalDesiredHeight *= scaleMax;\n      }\n      var refXProp = new Property(document, 'refX', refX);\n      var refYProp = new Property(document, 'refY', refY);\n      var hasRefs = refXProp.hasValue() && refYProp.hasValue();\n      if (hasRefs) {\n        ctx.translate(-scaleMin * refXProp.getPixels('x'), -scaleMin * refYProp.getPixels('y'));\n      }\n      if (clip) {\n        var scaledClipX = scaleMin * clipX;\n        var scaledClipY = scaleMin * clipY;\n        ctx.beginPath();\n        ctx.moveTo(scaledClipX, scaledClipY);\n        ctx.lineTo(width, scaledClipY);\n        ctx.lineTo(width, height);\n        ctx.lineTo(scaledClipX, height);\n        ctx.closePath();\n        ctx.clip();\n      }\n      if (!hasRefs) {\n        var isMeetMinY = meetOrSlice === 'meet' && scaleMin === scaleY;\n        var isSliceMaxY = meetOrSlice === 'slice' && scaleMax === scaleY;\n        var isMeetMinX = meetOrSlice === 'meet' && scaleMin === scaleX;\n        var isSliceMaxX = meetOrSlice === 'slice' && scaleMax === scaleX;\n        if (/^xMid/.test(align) && (isMeetMinY || isSliceMaxY)) {\n          ctx.translate(width / 2.0 - finalDesiredWidth / 2.0, 0);\n        }\n        if (/YMid$/.test(align) && (isMeetMinX || isSliceMaxX)) {\n          ctx.translate(0, height / 2.0 - finalDesiredHeight / 2.0);\n        }\n        if (/^xMax/.test(align) && (isMeetMinY || isSliceMaxY)) {\n          ctx.translate(width - finalDesiredWidth, 0);\n        }\n        if (/YMax$/.test(align) && (isMeetMinX || isSliceMaxX)) {\n          ctx.translate(0, height - finalDesiredHeight);\n        }\n      } // scale\n\n      switch (true) {\n        case align === 'none':\n          ctx.scale(scaleX, scaleY);\n          break;\n        case meetOrSlice === 'meet':\n          ctx.scale(scaleMin, scaleMin);\n          break;\n        case meetOrSlice === 'slice':\n          ctx.scale(scaleMax, scaleMax);\n          break;\n      } // translate\n\n      ctx.translate(-minX, -minY);\n    }\n  }, {\n    key: \"start\",\n    value: function start(element) {\n      var _this = this;\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref3$enableRedraw = _ref3.enableRedraw,\n        enableRedraw = _ref3$enableRedraw === void 0 ? false : _ref3$enableRedraw,\n        _ref3$ignoreMouse = _ref3.ignoreMouse,\n        ignoreMouse = _ref3$ignoreMouse === void 0 ? false : _ref3$ignoreMouse,\n        _ref3$ignoreAnimation = _ref3.ignoreAnimation,\n        ignoreAnimation = _ref3$ignoreAnimation === void 0 ? false : _ref3$ignoreAnimation,\n        _ref3$ignoreDimension = _ref3.ignoreDimensions,\n        ignoreDimensions = _ref3$ignoreDimension === void 0 ? false : _ref3$ignoreDimension,\n        _ref3$ignoreClear = _ref3.ignoreClear,\n        ignoreClear = _ref3$ignoreClear === void 0 ? false : _ref3$ignoreClear,\n        forceRedraw = _ref3.forceRedraw,\n        scaleWidth = _ref3.scaleWidth,\n        scaleHeight = _ref3.scaleHeight,\n        offsetX = _ref3.offsetX,\n        offsetY = _ref3.offsetY;\n      var FRAMERATE = this.FRAMERATE,\n        mouse = this.mouse;\n      var frameDuration = 1000 / FRAMERATE;\n      this.frameDuration = frameDuration;\n      this.readyPromise = new Promise(function (resolve) {\n        _this.resolveReady = resolve;\n      });\n      if (this.isReady()) {\n        this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n      }\n      if (!enableRedraw) {\n        return;\n      }\n      var now = Date.now();\n      var then = now;\n      var delta = 0;\n      var tick = function tick() {\n        now = Date.now();\n        delta = now - then;\n        if (delta >= frameDuration) {\n          then = now - delta % frameDuration;\n          if (_this.shouldUpdate(ignoreAnimation, forceRedraw)) {\n            _this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n            mouse.runEvents();\n          }\n        }\n        _this.intervalId = requestAnimationFrame(tick);\n      };\n      if (!ignoreMouse) {\n        mouse.start();\n      }\n      this.intervalId = requestAnimationFrame(tick);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.intervalId) {\n        requestAnimationFrame.cancel(this.intervalId);\n        this.intervalId = null;\n      }\n      this.mouse.stop();\n    }\n  }, {\n    key: \"shouldUpdate\",\n    value: function shouldUpdate(ignoreAnimation, forceRedraw) {\n      // need update from animations?\n      if (!ignoreAnimation) {\n        var frameDuration = this.frameDuration;\n        var shouldUpdate = this.animations.reduce(function (shouldUpdate, animation) {\n          return animation.update(frameDuration) || shouldUpdate;\n        }, false);\n        if (shouldUpdate) {\n          return true;\n        }\n      } // need update from redraw?\n\n      if (typeof forceRedraw === 'function' && forceRedraw()) {\n        return true;\n      }\n      if (!this.isReadyLock && this.isReady()) {\n        return true;\n      } // need update from mouse events?\n\n      if (this.mouse.hasEvents()) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY) {\n      var CLIENT_WIDTH = this.CLIENT_WIDTH,\n        CLIENT_HEIGHT = this.CLIENT_HEIGHT,\n        viewPort = this.viewPort,\n        ctx = this.ctx,\n        isFirstRender = this.isFirstRender;\n      var canvas = ctx.canvas;\n      viewPort.clear();\n      if (canvas.width && canvas.height) {\n        viewPort.setCurrent(canvas.width, canvas.height);\n      } else {\n        viewPort.setCurrent(CLIENT_WIDTH, CLIENT_HEIGHT);\n      }\n      var widthStyle = element.getStyle('width');\n      var heightStyle = element.getStyle('height');\n      if (!ignoreDimensions && (isFirstRender || typeof scaleWidth !== 'number' && typeof scaleHeight !== 'number')) {\n        // set canvas size\n        if (widthStyle.hasValue()) {\n          canvas.width = widthStyle.getPixels('x');\n          if (canvas.style) {\n            canvas.style.width = \"\".concat(canvas.width, \"px\");\n          }\n        }\n        if (heightStyle.hasValue()) {\n          canvas.height = heightStyle.getPixels('y');\n          if (canvas.style) {\n            canvas.style.height = \"\".concat(canvas.height, \"px\");\n          }\n        }\n      }\n      var cWidth = canvas.clientWidth || canvas.width;\n      var cHeight = canvas.clientHeight || canvas.height;\n      if (ignoreDimensions && widthStyle.hasValue() && heightStyle.hasValue()) {\n        cWidth = widthStyle.getPixels('x');\n        cHeight = heightStyle.getPixels('y');\n      }\n      viewPort.setCurrent(cWidth, cHeight);\n      if (typeof offsetX === 'number') {\n        element.getAttribute('x', true).setValue(offsetX);\n      }\n      if (typeof offsetY === 'number') {\n        element.getAttribute('y', true).setValue(offsetY);\n      }\n      if (typeof scaleWidth === 'number' || typeof scaleHeight === 'number') {\n        var viewBox = toNumbers(element.getAttribute('viewBox').getString());\n        var xRatio = 0;\n        var yRatio = 0;\n        if (typeof scaleWidth === 'number') {\n          var _widthStyle = element.getStyle('width');\n          if (_widthStyle.hasValue()) {\n            xRatio = _widthStyle.getPixels('x') / scaleWidth;\n          } else if (!isNaN(viewBox[2])) {\n            xRatio = viewBox[2] / scaleWidth;\n          }\n        }\n        if (typeof scaleHeight === 'number') {\n          var _heightStyle = element.getStyle('height');\n          if (_heightStyle.hasValue()) {\n            yRatio = _heightStyle.getPixels('y') / scaleHeight;\n          } else if (!isNaN(viewBox[3])) {\n            yRatio = viewBox[3] / scaleHeight;\n          }\n        }\n        if (!xRatio) {\n          xRatio = yRatio;\n        }\n        if (!yRatio) {\n          yRatio = xRatio;\n        }\n        element.getAttribute('width', true).setValue(scaleWidth);\n        element.getAttribute('height', true).setValue(scaleHeight);\n        var transformStyle = element.getStyle('transform', true, true);\n        transformStyle.setValue(\"\".concat(transformStyle.getString(), \" scale(\").concat(1.0 / xRatio, \", \").concat(1.0 / yRatio, \")\"));\n      } // clear and render\n\n      if (!ignoreClear) {\n        ctx.clearRect(0, 0, cWidth, cHeight);\n      }\n      element.render(ctx);\n      if (isFirstRender) {\n        this.isFirstRender = false;\n      }\n    }\n  }]);\n  return Screen;\n}();\nScreen.defaultWindow = defaultWindow;\nScreen.defaultFetch = defaultFetch;\nvar defaultFetch$1 = Screen.defaultFetch;\nvar DefaultDOMParser = typeof DOMParser !== 'undefined' ? DOMParser : null;\nvar Parser = /*#__PURE__*/function () {\n  function Parser() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$fetch = _ref.fetch,\n      fetch = _ref$fetch === void 0 ? defaultFetch$1 : _ref$fetch,\n      _ref$DOMParser = _ref.DOMParser,\n      DOMParser = _ref$DOMParser === void 0 ? DefaultDOMParser : _ref$DOMParser;\n    _classCallCheck(this, Parser);\n    this.fetch = fetch;\n    this.DOMParser = DOMParser;\n  }\n  _createClass(Parser, [{\n    key: \"parse\",\n    value: function () {\n      var _parse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resource) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!/^</.test(resource)) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\", this.parseFromString(resource));\n              case 2:\n                return _context.abrupt(\"return\", this.load(resource));\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function parse(_x) {\n        return _parse.apply(this, arguments);\n      }\n      return parse;\n    }()\n  }, {\n    key: \"parseFromString\",\n    value: function parseFromString(xml) {\n      var parser = new this.DOMParser();\n      try {\n        return this.checkDocument(parser.parseFromString(xml, 'image/svg+xml'));\n      } catch (err) {\n        return this.checkDocument(parser.parseFromString(xml, 'text/xml'));\n      }\n    }\n  }, {\n    key: \"checkDocument\",\n    value: function checkDocument(document) {\n      var parserError = document.getElementsByTagName('parsererror')[0];\n      if (parserError) {\n        throw new Error(parserError.textContent);\n      }\n      return document;\n    }\n  }, {\n    key: \"load\",\n    value: function () {\n      var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url) {\n        var response, xml;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.fetch(url);\n              case 2:\n                response = _context2.sent;\n                _context2.next = 5;\n                return response.text();\n              case 5:\n                xml = _context2.sent;\n                return _context2.abrupt(\"return\", this.parseFromString(xml));\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function load(_x2) {\n        return _load.apply(this, arguments);\n      }\n      return load;\n    }()\n  }]);\n  return Parser;\n}();\nvar Translate = /*#__PURE__*/function () {\n  function Translate(_, point) {\n    _classCallCheck(this, Translate);\n    this.type = 'translate';\n    this.point = null;\n    this.point = Point.parse(point);\n  }\n  _createClass(Translate, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var _this$point = this.point,\n        x = _this$point.x,\n        y = _this$point.y;\n      ctx.translate(x || 0.0, y || 0.0);\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var _this$point2 = this.point,\n        x = _this$point2.x,\n        y = _this$point2.y;\n      ctx.translate(-1.0 * x || 0.0, -1.0 * y || 0.0);\n    }\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      var _this$point3 = this.point,\n        x = _this$point3.x,\n        y = _this$point3.y;\n      point.applyTransform([1, 0, 0, 1, x || 0.0, y || 0.0]);\n    }\n  }]);\n  return Translate;\n}();\nvar Rotate = /*#__PURE__*/function () {\n  function Rotate(document, rotate) {\n    var transformOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    _classCallCheck(this, Rotate);\n    this.type = 'rotate';\n    this.angle = null;\n    this.cx = 0;\n    this.cy = 0;\n    var numbers = toNumbers(rotate);\n    this.angle = new Property(document, 'angle', numbers[0]);\n    this.cx = (numbers[1] || 0) + (transformOrigin[0] || 0);\n    this.cy = (numbers[2] || 0) + (transformOrigin[1] || 0);\n  }\n  _createClass(Rotate, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var cx = this.cx,\n        cy = this.cy,\n        angle = this.angle;\n      ctx.translate(cx, cy);\n      ctx.rotate(angle.getRadians());\n      ctx.translate(-cx, -cy);\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var cx = this.cx,\n        cy = this.cy,\n        angle = this.angle;\n      ctx.translate(cx, cy);\n      ctx.rotate(-1.0 * angle.getRadians());\n      ctx.translate(-cx, -cy);\n    }\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      var cx = this.cx,\n        cy = this.cy,\n        angle = this.angle;\n      var rad = angle.getRadians();\n      point.applyTransform([1, 0, 0, 1, cx || 0.0, cy || 0.0 // this.p.y\n      ]);\n\n      point.applyTransform([Math.cos(rad), Math.sin(rad), -Math.sin(rad), Math.cos(rad), 0, 0]);\n      point.applyTransform([1, 0, 0, 1, -cx || 0.0, -cy || 0.0 // -this.p.y\n      ]);\n    }\n  }]);\n\n  return Rotate;\n}();\nvar Scale = /*#__PURE__*/function () {\n  function Scale(_, scale) {\n    _classCallCheck(this, Scale);\n    this.type = 'scale';\n    this.scale = null;\n    var scaleSize = Point.parseScale(scale); // Workaround for node-canvas\n\n    if (scaleSize.x === 0 || scaleSize.y === 0) {\n      scaleSize.x = PSEUDO_ZERO;\n      scaleSize.y = PSEUDO_ZERO;\n    }\n    this.scale = scaleSize;\n  }\n  _createClass(Scale, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var _this$scale = this.scale,\n        x = _this$scale.x,\n        y = _this$scale.y;\n      ctx.scale(x, y || x);\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var _this$scale2 = this.scale,\n        x = _this$scale2.x,\n        y = _this$scale2.y;\n      ctx.scale(1.0 / x, 1.0 / y || x);\n    }\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      var _this$scale3 = this.scale,\n        x = _this$scale3.x,\n        y = _this$scale3.y;\n      point.applyTransform([x || 0.0, 0, 0, y || 0.0, 0, 0]);\n    }\n  }]);\n  return Scale;\n}();\nvar Matrix = /*#__PURE__*/function () {\n  function Matrix(_, matrix) {\n    _classCallCheck(this, Matrix);\n    this.type = 'matrix';\n    this.matrix = [];\n    this.matrix = toNumbers(matrix);\n  }\n  _createClass(Matrix, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var matrix = this.matrix;\n      ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var matrix = this.matrix;\n      var a = matrix[0];\n      var b = matrix[2];\n      var c = matrix[4];\n      var d = matrix[1];\n      var e = matrix[3];\n      var f = matrix[5];\n      var g = 0.0;\n      var h = 0.0;\n      var i = 1.0;\n      var det = 1 / (a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g));\n      ctx.transform(det * (e * i - f * h), det * (f * g - d * i), det * (c * h - b * i), det * (a * i - c * g), det * (b * f - c * e), det * (c * d - a * f));\n    }\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      point.applyTransform(this.matrix);\n    }\n  }]);\n  return Matrix;\n}();\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar Skew = /*#__PURE__*/function (_Matrix) {\n  _inherits(Skew, _Matrix);\n  var _super = _createSuper(Skew);\n  function Skew(document, skew) {\n    var _this;\n    _classCallCheck(this, Skew);\n    _this = _super.call(this, document, skew);\n    _this.type = 'skew';\n    _this.angle = null;\n    _this.angle = new Property(document, 'angle', skew);\n    return _this;\n  }\n  return Skew;\n}(Matrix);\nfunction _createSuper$1(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$1()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$1() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar SkewX = /*#__PURE__*/function (_Skew) {\n  _inherits(SkewX, _Skew);\n  var _super = _createSuper$1(SkewX);\n  function SkewX(document, skew) {\n    var _this;\n    _classCallCheck(this, SkewX);\n    _this = _super.call(this, document, skew);\n    _this.type = 'skewX';\n    _this.matrix = [1, 0, Math.tan(_this.angle.getRadians()), 1, 0, 0];\n    return _this;\n  }\n  return SkewX;\n}(Skew);\nfunction _createSuper$2(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$2()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$2() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar SkewY = /*#__PURE__*/function (_Skew) {\n  _inherits(SkewY, _Skew);\n  var _super = _createSuper$2(SkewY);\n  function SkewY(document, skew) {\n    var _this;\n    _classCallCheck(this, SkewY);\n    _this = _super.call(this, document, skew);\n    _this.type = 'skewY';\n    _this.matrix = [1, Math.tan(_this.angle.getRadians()), 0, 1, 0, 0];\n    return _this;\n  }\n  return SkewY;\n}(Skew);\nfunction parseTransforms(transform) {\n  return compressSpaces(transform).trim().replace(/\\)([a-zA-Z])/g, ') $1').replace(/\\)(\\s?,\\s?)/g, ') ').split(/\\s(?=[a-z])/);\n}\nfunction parseTransform(transform) {\n  var _transform$split = transform.split('('),\n    _transform$split2 = _slicedToArray(_transform$split, 2),\n    type = _transform$split2[0],\n    value = _transform$split2[1];\n  return [type.trim(), value.trim().replace(')', '')];\n}\nvar Transform = /*#__PURE__*/function () {\n  function Transform(document, transform, transformOrigin) {\n    var _this = this;\n    _classCallCheck(this, Transform);\n    this.document = document;\n    this.transforms = [];\n    var data = parseTransforms(transform);\n    var originCoords = transformOrigin ? toNumbers(transformOrigin) : [];\n    data.forEach(function (transform) {\n      if (transform === 'none') {\n        return;\n      }\n      var _parseTransform = parseTransform(transform),\n        _parseTransform2 = _slicedToArray(_parseTransform, 2),\n        type = _parseTransform2[0],\n        value = _parseTransform2[1];\n      var TransformType = Transform.transformTypes[type];\n      if (typeof TransformType !== 'undefined') {\n        _this.transforms.push(new TransformType(_this.document, value, originCoords));\n      }\n    });\n  }\n  _createClass(Transform, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var transforms = this.transforms;\n      var len = transforms.length;\n      for (var i = 0; i < len; i++) {\n        transforms[i].apply(ctx);\n      }\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var transforms = this.transforms;\n      var len = transforms.length;\n      for (var i = len - 1; i >= 0; i--) {\n        transforms[i].unapply(ctx);\n      }\n    } // TODO: applyToPoint unused ... remove?\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      var transforms = this.transforms;\n      var len = transforms.length;\n      for (var i = 0; i < len; i++) {\n        transforms[i].applyToPoint(point);\n      }\n    }\n  }], [{\n    key: \"fromElement\",\n    value: function fromElement(document, element) {\n      var transformStyle = element.getStyle('transform', false, true);\n      var transformOriginStyle = element.getStyle('transform-origin', false, true);\n      if (transformStyle.hasValue()) {\n        return new Transform(document, transformStyle.getString(), transformOriginStyle.getString());\n      }\n      return null;\n    }\n  }]);\n  return Transform;\n}();\nTransform.transformTypes = {\n  translate: Translate,\n  rotate: Rotate,\n  scale: Scale,\n  matrix: Matrix,\n  skewX: SkewX,\n  skewY: SkewY\n};\nvar Element = /*#__PURE__*/function () {\n  function Element(document, node) {\n    var _this = this;\n    var captureTextNodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    _classCallCheck(this, Element);\n    this.document = document;\n    this.node = node;\n    this.captureTextNodes = captureTextNodes;\n    this.attributes = {};\n    this.styles = {};\n    this.stylesSpecificity = {};\n    this.animationFrozen = false;\n    this.animationFrozenValue = '';\n    this.parent = null;\n    this.children = [];\n    if (!node || node.nodeType !== 1) {\n      // ELEMENT_NODE\n      return;\n    } // add attributes\n\n    Array.from(node.attributes).forEach(function (attribute) {\n      var nodeName = normalizeAttributeName(attribute.nodeName);\n      _this.attributes[nodeName] = new Property(document, nodeName, attribute.value);\n    });\n    this.addStylesFromStyleDefinition(); // add inline styles\n\n    if (this.getAttribute('style').hasValue()) {\n      var styles = this.getAttribute('style').getString().split(';').map(function (_) {\n        return _.trim();\n      });\n      styles.forEach(function (style) {\n        if (!style) {\n          return;\n        }\n        var _style$split$map = style.split(':').map(function (_) {\n            return _.trim();\n          }),\n          _style$split$map2 = _slicedToArray(_style$split$map, 2),\n          name = _style$split$map2[0],\n          value = _style$split$map2[1];\n        _this.styles[name] = new Property(document, name, value);\n      });\n    }\n    var definitions = document.definitions;\n    var id = this.getAttribute('id'); // add id\n\n    if (id.hasValue()) {\n      if (!definitions[id.getValue()]) {\n        definitions[id.getValue()] = this;\n      }\n    }\n    Array.from(node.childNodes).forEach(function (childNode) {\n      if (childNode.nodeType === 1) {\n        _this.addChild(childNode); // ELEMENT_NODE\n      } else if (captureTextNodes && (childNode.nodeType === 3 || childNode.nodeType === 4)) {\n        var textNode = document.createTextNode(childNode);\n        if (textNode.getText().length > 0) {\n          _this.addChild(textNode); // TEXT_NODE\n        }\n      }\n    });\n  }\n\n  _createClass(Element, [{\n    key: \"getAttribute\",\n    value: function getAttribute(name) {\n      var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var attr = this.attributes[name];\n      if (!attr && createIfNotExists) {\n        var _attr = new Property(this.document, name, '');\n        this.attributes[name] = _attr;\n        return _attr;\n      }\n      return attr || Property.empty(this.document);\n    }\n  }, {\n    key: \"getHrefAttribute\",\n    value: function getHrefAttribute() {\n      for (var key in this.attributes) {\n        if (key === 'href' || /:href$/.test(key)) {\n          return this.attributes[key];\n        }\n      }\n      return Property.empty(this.document);\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle(name) {\n      var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var skipAncestors = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var style = this.styles[name];\n      if (style) {\n        return style;\n      }\n      var attr = this.getAttribute(name);\n      if (attr && attr.hasValue()) {\n        this.styles[name] = attr; // move up to me to cache\n\n        return attr;\n      }\n      if (!skipAncestors) {\n        var parent = this.parent;\n        if (parent) {\n          var parentStyle = parent.getStyle(name);\n          if (parentStyle && parentStyle.hasValue()) {\n            return parentStyle;\n          }\n        }\n      }\n      if (createIfNotExists) {\n        var _style = new Property(this.document, name, '');\n        this.styles[name] = _style;\n        return _style;\n      }\n      return style || Property.empty(this.document);\n    }\n  }, {\n    key: \"render\",\n    value: function render(ctx) {\n      // don't render display=none\n      // don't render visibility=hidden\n      if (this.getStyle('display').getString() === 'none' || this.getStyle('visibility').getString() === 'hidden') {\n        return;\n      }\n      ctx.save();\n      if (this.getStyle('mask').hasValue()) {\n        // mask\n        var mask = this.getStyle('mask').getDefinition();\n        if (mask) {\n          this.applyEffects(ctx);\n          mask.apply(ctx, this);\n        }\n      } else if (this.getStyle('filter').getValue('none') !== 'none') {\n        // filter\n        var filter = this.getStyle('filter').getDefinition();\n        if (filter) {\n          this.applyEffects(ctx);\n          filter.apply(ctx, this);\n        }\n      } else {\n        this.setContext(ctx);\n        this.renderChildren(ctx);\n        this.clearContext(ctx);\n      }\n      ctx.restore();\n    }\n  }, {\n    key: \"setContext\",\n    value: function setContext(_) {}\n  }, {\n    key: \"applyEffects\",\n    value: function applyEffects(ctx) {\n      // transform\n      var transform = Transform.fromElement(this.document, this);\n      if (transform) {\n        transform.apply(ctx);\n      } // clip\n\n      var clipPathStyleProp = this.getStyle('clip-path', false, true);\n      if (clipPathStyleProp.hasValue()) {\n        var clip = clipPathStyleProp.getDefinition();\n        if (clip) {\n          clip.apply(ctx);\n        }\n      }\n    }\n  }, {\n    key: \"clearContext\",\n    value: function clearContext(_) {}\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      this.children.forEach(function (child) {\n        child.render(ctx);\n      });\n    }\n  }, {\n    key: \"addChild\",\n    value: function addChild(childNode) {\n      var child = childNode instanceof Element ? childNode : this.document.createElement(childNode);\n      child.parent = this;\n      if (!Element.ignoreChildTypes.includes(child.type)) {\n        this.children.push(child);\n      }\n    }\n  }, {\n    key: \"matchesSelector\",\n    value: function matchesSelector(selector) {\n      var node = this.node;\n      if (typeof node.matches === 'function') {\n        return node.matches(selector);\n      }\n      var styleClasses = node.getAttribute('class');\n      if (!styleClasses || styleClasses === '') {\n        return false;\n      }\n      return styleClasses.split(' ').some(function (styleClass) {\n        if (\".\".concat(styleClass) === selector) {\n          return true;\n        }\n      });\n    }\n  }, {\n    key: \"addStylesFromStyleDefinition\",\n    value: function addStylesFromStyleDefinition() {\n      var _this$document = this.document,\n        styles = _this$document.styles,\n        stylesSpecificity = _this$document.stylesSpecificity;\n      for (var selector in styles) {\n        if (selector[0] !== '@' && this.matchesSelector(selector)) {\n          var style = styles[selector];\n          var specificity = stylesSpecificity[selector];\n          if (style) {\n            for (var name in style) {\n              var existingSpecificity = this.stylesSpecificity[name];\n              if (typeof existingSpecificity === 'undefined') {\n                existingSpecificity = '000';\n              }\n              if (specificity >= existingSpecificity) {\n                this.styles[name] = style[name];\n                this.stylesSpecificity[name] = specificity;\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"removeStyles\",\n    value: function removeStyles(element, ignoreStyles) {\n      var toRestore = ignoreStyles.reduce(function (toRestore, name) {\n        var styleProp = element.getStyle(name);\n        if (!styleProp.hasValue()) {\n          return toRestore;\n        }\n        var value = styleProp.getString();\n        styleProp.setValue('');\n        return [].concat(_toConsumableArray(toRestore), [[name, value]]);\n      }, []);\n      return toRestore;\n    }\n  }, {\n    key: \"restoreStyles\",\n    value: function restoreStyles(element, styles) {\n      styles.forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          name = _ref2[0],\n          value = _ref2[1];\n        element.getStyle(name, true).setValue(value);\n      });\n    }\n  }]);\n  return Element;\n}();\nElement.ignoreChildTypes = ['title'];\nfunction _createSuper$3(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$3()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$3() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar UnknownElement = /*#__PURE__*/function (_Element) {\n  _inherits(UnknownElement, _Element);\n  var _super = _createSuper$3(UnknownElement);\n  function UnknownElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, UnknownElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    return _this;\n  }\n  return UnknownElement;\n}(Element);\nfunction wrapFontFamily(fontFamily) {\n  var trimmed = fontFamily.trim();\n  return /^('|\")/.test(trimmed) ? trimmed : \"\\\"\".concat(trimmed, \"\\\"\");\n}\nfunction prepareFontFamily(fontFamily) {\n  return typeof process === 'undefined' ? fontFamily : fontFamily.trim().split(',').map(wrapFontFamily).join(',');\n}\n/**\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\n */\n\nfunction prepareFontStyle(fontStyle) {\n  if (!fontStyle) {\n    return '';\n  }\n  var targetFontStyle = fontStyle.trim().toLowerCase();\n  switch (targetFontStyle) {\n    case 'normal':\n    case 'italic':\n    case 'oblique':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontStyle;\n    default:\n      if (/^oblique\\s+(-|)\\d+deg$/.test(targetFontStyle)) {\n        return targetFontStyle;\n      }\n      return '';\n  }\n}\n/**\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\n */\n\nfunction prepareFontWeight(fontWeight) {\n  if (!fontWeight) {\n    return '';\n  }\n  var targetFontWeight = fontWeight.trim().toLowerCase();\n  switch (targetFontWeight) {\n    case 'normal':\n    case 'bold':\n    case 'lighter':\n    case 'bolder':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontWeight;\n    default:\n      if (/^[\\d.]+$/.test(targetFontWeight)) {\n        return targetFontWeight;\n      }\n      return '';\n  }\n}\nvar Font = /*#__PURE__*/function () {\n  function Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {\n    _classCallCheck(this, Font);\n    var inheritFont = inherit ? typeof inherit === 'string' ? Font.parse(inherit) : inherit : {};\n    this.fontFamily = fontFamily || inheritFont.fontFamily;\n    this.fontSize = fontSize || inheritFont.fontSize;\n    this.fontStyle = fontStyle || inheritFont.fontStyle;\n    this.fontWeight = fontWeight || inheritFont.fontWeight;\n    this.fontVariant = fontVariant || inheritFont.fontVariant;\n  }\n  _createClass(Font, [{\n    key: \"toString\",\n    value: function toString() {\n      return [prepareFontStyle(this.fontStyle), this.fontVariant, prepareFontWeight(this.fontWeight), this.fontSize,\n      // Wrap fontFamily only on nodejs and only for canvas.ctx\n      prepareFontFamily(this.fontFamily)].join(' ').trim();\n    }\n  }], [{\n    key: \"parse\",\n    value: function parse() {\n      var font = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var inherit = arguments.length > 1 ? arguments[1] : undefined;\n      var fontStyle = '';\n      var fontVariant = '';\n      var fontWeight = '';\n      var fontSize = '';\n      var fontFamily = '';\n      var parts = compressSpaces(font).trim().split(' ');\n      var set = {\n        fontSize: false,\n        fontStyle: false,\n        fontWeight: false,\n        fontVariant: false\n      };\n      parts.forEach(function (part) {\n        switch (true) {\n          case !set.fontStyle && Font.styles.includes(part):\n            if (part !== 'inherit') {\n              fontStyle = part;\n            }\n            set.fontStyle = true;\n            break;\n          case !set.fontVariant && Font.variants.includes(part):\n            if (part !== 'inherit') {\n              fontVariant = part;\n            }\n            set.fontStyle = true;\n            set.fontVariant = true;\n            break;\n          case !set.fontWeight && Font.weights.includes(part):\n            if (part !== 'inherit') {\n              fontWeight = part;\n            }\n            set.fontStyle = true;\n            set.fontVariant = true;\n            set.fontWeight = true;\n            break;\n          case !set.fontSize:\n            if (part !== 'inherit') {\n              var _part$split = part.split('/');\n              var _part$split2 = _slicedToArray(_part$split, 1);\n              fontSize = _part$split2[0];\n            }\n            set.fontStyle = true;\n            set.fontVariant = true;\n            set.fontWeight = true;\n            set.fontSize = true;\n            break;\n          default:\n            if (part !== 'inherit') {\n              fontFamily += part;\n            }\n        }\n      });\n      return new Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit);\n    }\n  }]);\n  return Font;\n}();\nFont.styles = 'normal|italic|oblique|inherit';\nFont.variants = 'normal|small-caps|inherit';\nFont.weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';\nvar BoundingBox = /*#__PURE__*/function () {\n  function BoundingBox() {\n    var x1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.NaN;\n    var y1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.NaN;\n    var x2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Number.NaN;\n    var y2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Number.NaN;\n    _classCallCheck(this, BoundingBox);\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.addPoint(x1, y1);\n    this.addPoint(x2, y2);\n  }\n  _createClass(BoundingBox, [{\n    key: \"addPoint\",\n    value: function addPoint(x, y) {\n      if (typeof x !== 'undefined') {\n        if (isNaN(this.x1) || isNaN(this.x2)) {\n          this.x1 = x;\n          this.x2 = x;\n        }\n        if (x < this.x1) {\n          this.x1 = x;\n        }\n        if (x > this.x2) {\n          this.x2 = x;\n        }\n      }\n      if (typeof y !== 'undefined') {\n        if (isNaN(this.y1) || isNaN(this.y2)) {\n          this.y1 = y;\n          this.y2 = y;\n        }\n        if (y < this.y1) {\n          this.y1 = y;\n        }\n        if (y > this.y2) {\n          this.y2 = y;\n        }\n      }\n    }\n  }, {\n    key: \"addX\",\n    value: function addX(x) {\n      this.addPoint(x, null);\n    }\n  }, {\n    key: \"addY\",\n    value: function addY(y) {\n      this.addPoint(null, y);\n    }\n  }, {\n    key: \"addBoundingBox\",\n    value: function addBoundingBox(boundingBox) {\n      if (!boundingBox) {\n        return;\n      }\n      var x1 = boundingBox.x1,\n        y1 = boundingBox.y1,\n        x2 = boundingBox.x2,\n        y2 = boundingBox.y2;\n      this.addPoint(x1, y1);\n      this.addPoint(x2, y2);\n    }\n  }, {\n    key: \"sumCubic\",\n    value: function sumCubic(t, p0, p1, p2, p3) {\n      return Math.pow(1 - t, 3) * p0 + 3 * Math.pow(1 - t, 2) * t * p1 + 3 * (1 - t) * Math.pow(t, 2) * p2 + Math.pow(t, 3) * p3;\n    }\n  }, {\n    key: \"bezierCurveAdd\",\n    value: function bezierCurveAdd(forX, p0, p1, p2, p3) {\n      var b = 6 * p0 - 12 * p1 + 6 * p2;\n      var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n      var c = 3 * p1 - 3 * p0;\n      if (a === 0) {\n        if (b === 0) {\n          return;\n        }\n        var t = -c / b;\n        if (0 < t && t < 1) {\n          if (forX) {\n            this.addX(this.sumCubic(t, p0, p1, p2, p3));\n          } else {\n            this.addY(this.sumCubic(t, p0, p1, p2, p3));\n          }\n        }\n        return;\n      }\n      var b2ac = Math.pow(b, 2) - 4 * c * a;\n      if (b2ac < 0) {\n        return;\n      }\n      var t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        if (forX) {\n          this.addX(this.sumCubic(t1, p0, p1, p2, p3));\n        } else {\n          this.addY(this.sumCubic(t1, p0, p1, p2, p3));\n        }\n      }\n      var t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        if (forX) {\n          this.addX(this.sumCubic(t2, p0, p1, p2, p3));\n        } else {\n          this.addY(this.sumCubic(t2, p0, p1, p2, p3));\n        }\n      }\n    } // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n  }, {\n    key: \"addBezierCurve\",\n    value: function addBezierCurve(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {\n      this.addPoint(p0x, p0y);\n      this.addPoint(p3x, p3y);\n      this.bezierCurveAdd(true, p0x, p1x, p2x, p3x);\n      this.bezierCurveAdd(false, p0y, p1y, p2y, p3y);\n    }\n  }, {\n    key: \"addQuadraticCurve\",\n    value: function addQuadraticCurve(p0x, p0y, p1x, p1y, p2x, p2y) {\n      var cp1x = p0x + 2 / 3 * (p1x - p0x); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n      var cp1y = p0y + 2 / 3 * (p1y - p0y); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n      var cp2x = cp1x + 1 / 3 * (p2x - p0x); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n      var cp2y = cp1y + 1 / 3 * (p2y - p0y); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n      this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y);\n    }\n  }, {\n    key: \"isPointInBox\",\n    value: function isPointInBox(x, y) {\n      var x1 = this.x1,\n        y1 = this.y1,\n        x2 = this.x2,\n        y2 = this.y2;\n      return x1 <= x && x <= x2 && y1 <= y && y <= y2;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.x1;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.y1;\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.x2 - this.x1;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.y2 - this.y1;\n    }\n  }]);\n  return BoundingBox;\n}();\nfunction _createSuper$4(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$4()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$4() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar RenderedElement = /*#__PURE__*/function (_Element) {\n  _inherits(RenderedElement, _Element);\n  var _super = _createSuper$4(RenderedElement);\n  function RenderedElement() {\n    var _this;\n    _classCallCheck(this, RenderedElement);\n    _this = _super.apply(this, arguments);\n    _this.modifiedEmSizeStack = false;\n    return _this;\n  }\n  _createClass(RenderedElement, [{\n    key: \"calculateOpacity\",\n    value: function calculateOpacity() {\n      var opacity = 1.0; // tslint:disable-next-line: no-this-assignment\n\n      var element = this;\n      while (element) {\n        var opacityStyle = element.getStyle('opacity', false, true); // no ancestors on style call\n\n        if (opacityStyle.hasValue()) {\n          opacity *= opacityStyle.getNumber();\n        }\n        element = element.parent;\n      }\n      return opacity;\n    }\n  }, {\n    key: \"setContext\",\n    value: function setContext(ctx) {\n      var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!fromMeasure) {\n        // causes stack overflow when measuring text with gradients\n        // fill\n        var fillStyleProp = this.getStyle('fill');\n        var fillOpacityStyleProp = this.getStyle('fill-opacity');\n        var strokeStyleProp = this.getStyle('stroke');\n        var strokeOpacityProp = this.getStyle('stroke-opacity');\n        if (fillStyleProp.isUrlDefinition()) {\n          var fillStyle = fillStyleProp.getFillStyleDefinition(this, fillOpacityStyleProp);\n          if (fillStyle) {\n            ctx.fillStyle = fillStyle;\n          }\n        } else if (fillStyleProp.hasValue()) {\n          if (fillStyleProp.getString() === 'currentColor') {\n            fillStyleProp.setValue(this.getStyle('color').getColor());\n          }\n          var _fillStyle = fillStyleProp.getColor();\n          if (_fillStyle !== 'inherit') {\n            ctx.fillStyle = _fillStyle === 'none' ? 'rgba(0,0,0,0)' : _fillStyle;\n          }\n        }\n        if (fillOpacityStyleProp.hasValue()) {\n          var _fillStyle2 = new Property(this.document, 'fill', ctx.fillStyle).addOpacity(fillOpacityStyleProp).getColor();\n          ctx.fillStyle = _fillStyle2;\n        } // stroke\n\n        if (strokeStyleProp.isUrlDefinition()) {\n          var strokeStyle = strokeStyleProp.getFillStyleDefinition(this, strokeOpacityProp);\n          if (strokeStyle) {\n            ctx.strokeStyle = strokeStyle;\n          }\n        } else if (strokeStyleProp.hasValue()) {\n          if (strokeStyleProp.getString() === 'currentColor') {\n            strokeStyleProp.setValue(this.getStyle('color').getColor());\n          }\n          var _strokeStyle = strokeStyleProp.getString();\n          if (_strokeStyle !== 'inherit') {\n            ctx.strokeStyle = _strokeStyle === 'none' ? 'rgba(0,0,0,0)' : _strokeStyle;\n          }\n        }\n        if (strokeOpacityProp.hasValue()) {\n          var _strokeStyle2 = new Property(this.document, 'stroke', ctx.strokeStyle).addOpacity(strokeOpacityProp).getString();\n          ctx.strokeStyle = _strokeStyle2;\n        }\n        var strokeWidthStyleProp = this.getStyle('stroke-width');\n        if (strokeWidthStyleProp.hasValue()) {\n          var newLineWidth = strokeWidthStyleProp.getPixels();\n          ctx.lineWidth = !newLineWidth ? PSEUDO_ZERO // browsers don't respect 0 (or node-canvas? :-)\n          : newLineWidth;\n        }\n        var strokeLinecapStyleProp = this.getStyle('stroke-linecap');\n        var strokeLinejoinStyleProp = this.getStyle('stroke-linejoin');\n        var strokeMiterlimitProp = this.getStyle('stroke-miterlimit');\n        var pointOrderStyleProp = this.getStyle('paint-order');\n        var strokeDasharrayStyleProp = this.getStyle('stroke-dasharray');\n        var strokeDashoffsetProp = this.getStyle('stroke-dashoffset');\n        if (strokeLinecapStyleProp.hasValue()) {\n          ctx.lineCap = strokeLinecapStyleProp.getString();\n        }\n        if (strokeLinejoinStyleProp.hasValue()) {\n          ctx.lineJoin = strokeLinejoinStyleProp.getString();\n        }\n        if (strokeMiterlimitProp.hasValue()) {\n          ctx.miterLimit = strokeMiterlimitProp.getNumber();\n        }\n        if (pointOrderStyleProp.hasValue()) {\n          // ?\n          ctx.paintOrder = pointOrderStyleProp.getValue();\n        }\n        if (strokeDasharrayStyleProp.hasValue() && strokeDasharrayStyleProp.getString() !== 'none') {\n          var gaps = toNumbers(strokeDasharrayStyleProp.getString());\n          if (typeof ctx.setLineDash !== 'undefined') {\n            ctx.setLineDash(gaps);\n          } else if (typeof ctx.webkitLineDash !== 'undefined') {\n            ctx.webkitLineDash = gaps;\n          } else if (typeof ctx.mozDash !== 'undefined' && !(gaps.length === 1 && gaps[0] === 0)) {\n            ctx.mozDash = gaps;\n          }\n          var offset = strokeDashoffsetProp.getPixels();\n          if (typeof ctx.lineDashOffset !== 'undefined') {\n            ctx.lineDashOffset = offset;\n          } else if (typeof ctx.webkitLineDashOffset !== 'undefined') {\n            ctx.webkitLineDashOffset = offset;\n          } else if (typeof ctx.mozDashOffset !== 'undefined') {\n            ctx.mozDashOffset = offset;\n          }\n        }\n      } // font\n\n      this.modifiedEmSizeStack = false;\n      if (typeof ctx.font !== 'undefined') {\n        var fontStyleProp = this.getStyle('font');\n        var fontStyleStyleProp = this.getStyle('font-style');\n        var fontVariantStyleProp = this.getStyle('font-variant');\n        var fontWeightStyleProp = this.getStyle('font-weight');\n        var fontSizeStyleProp = this.getStyle('font-size');\n        var fontFamilyStyleProp = this.getStyle('font-family');\n        var font = new Font(fontStyleStyleProp.getString(), fontVariantStyleProp.getString(), fontWeightStyleProp.getString(), fontSizeStyleProp.hasValue() ? \"\".concat(fontSizeStyleProp.getPixels(true), \"px\") : '', fontFamilyStyleProp.getString(), Font.parse(fontStyleProp.getString(), ctx.font));\n        fontStyleStyleProp.setValue(font.fontStyle);\n        fontVariantStyleProp.setValue(font.fontVariant);\n        fontWeightStyleProp.setValue(font.fontWeight);\n        fontSizeStyleProp.setValue(font.fontSize);\n        fontFamilyStyleProp.setValue(font.fontFamily);\n        ctx.font = font.toString();\n        if (fontSizeStyleProp.isPixels()) {\n          this.document.emSize = fontSizeStyleProp.getPixels();\n          this.modifiedEmSizeStack = true;\n        }\n      }\n      if (!fromMeasure) {\n        // effects\n        this.applyEffects(ctx); // opacity\n\n        ctx.globalAlpha = this.calculateOpacity();\n      }\n    }\n  }, {\n    key: \"clearContext\",\n    value: function clearContext(ctx) {\n      _get(_getPrototypeOf(RenderedElement.prototype), \"clearContext\", this).call(this, ctx);\n      if (this.modifiedEmSizeStack) {\n        this.document.popEmSize();\n      }\n    }\n  }]);\n  return RenderedElement;\n}(Element);\nfunction _createSuper$5(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$5()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$5() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar TextElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(TextElement, _RenderedElement);\n  var _super = _createSuper$5(TextElement);\n  function TextElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, TextElement);\n    _this = _super.call(this, document, node, (this instanceof TextElement ? this.constructor : void 0) === TextElement ? true : captureTextNodes);\n    _this.type = 'text';\n    _this.x = 0;\n    _this.y = 0;\n    _this.measureCache = -1;\n    return _this;\n  }\n  _createClass(TextElement, [{\n    key: \"setContext\",\n    value: function setContext(ctx) {\n      var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      _get(_getPrototypeOf(TextElement.prototype), \"setContext\", this).call(this, ctx, fromMeasure);\n      var textBaseline = this.getStyle('dominant-baseline').getTextBaseline() || this.getStyle('alignment-baseline').getTextBaseline();\n      if (textBaseline) {\n        ctx.textBaseline = textBaseline;\n      }\n    }\n  }, {\n    key: \"initializeCoordinates\",\n    value: function initializeCoordinates(ctx) {\n      this.x = this.getAttribute('x').getPixels('x');\n      this.y = this.getAttribute('y').getPixels('y');\n      var dxAttr = this.getAttribute('dx');\n      var dyAttr = this.getAttribute('dy');\n      if (dxAttr.hasValue()) {\n        this.x += dxAttr.getPixels('x');\n      }\n      if (dyAttr.hasValue()) {\n        this.y += dyAttr.getPixels('y');\n      }\n      this.x += this.getAnchorDelta(ctx, this, 0);\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(ctx) {\n      var _this2 = this;\n      if (this.type !== 'text') {\n        return this.getTElementBoundingBox(ctx);\n      }\n      this.initializeCoordinates(ctx);\n      var boundingBox = null;\n      this.children.forEach(function (_, i) {\n        var childBoundingBox = _this2.getChildBoundingBox(ctx, _this2, _this2, i);\n        if (!boundingBox) {\n          boundingBox = childBoundingBox;\n        } else {\n          boundingBox.addBoundingBox(childBoundingBox);\n        }\n      });\n      return boundingBox;\n    }\n  }, {\n    key: \"getFontSize\",\n    value: function getFontSize() {\n      var document = this.document,\n        parent = this.parent;\n      var inheritFontSize = Font.parse(document.ctx.font).fontSize;\n      var fontSize = parent.getStyle('font-size').getNumber(inheritFontSize);\n      return fontSize;\n    }\n  }, {\n    key: \"getTElementBoundingBox\",\n    value: function getTElementBoundingBox(ctx) {\n      var fontSize = this.getFontSize();\n      return new BoundingBox(this.x, this.y - fontSize, this.x + this.measureText(ctx), this.y);\n    }\n  }, {\n    key: \"getGlyph\",\n    value: function getGlyph(font, text, i) {\n      var char = text[i];\n      var glyph = null;\n      if (font.isArabic) {\n        var len = text.length;\n        var prevChar = text[i - 1];\n        var nextChar = text[i + 1];\n        var arabicForm = 'isolated';\n        if ((i === 0 || prevChar === ' ') && i < len - 2 && nextChar !== ' ') {\n          arabicForm = 'terminal';\n        }\n        if (i > 0 && prevChar !== ' ' && i < len - 2 && nextChar !== ' ') {\n          arabicForm = 'medial';\n        }\n        if (i > 0 && prevChar !== ' ' && (i === len - 1 || nextChar === ' ')) {\n          arabicForm = 'initial';\n        }\n        if (typeof font.glyphs[char] !== 'undefined') {\n          glyph = font.glyphs[char][arabicForm];\n          if (!glyph && font.glyphs[char].type === 'glyph') {\n            glyph = font.glyphs[char];\n          }\n        }\n      } else {\n        glyph = font.glyphs[char];\n      }\n      if (!glyph) {\n        glyph = font.missingGlyph;\n      }\n      return glyph;\n    }\n  }, {\n    key: \"getText\",\n    value: function getText() {\n      return '';\n    }\n  }, {\n    key: \"getTextFromNode\",\n    value: function getTextFromNode(node) {\n      var textNode = node || this.node;\n      var childNodes = Array.from(textNode.parentNode.childNodes);\n      var index = childNodes.indexOf(textNode);\n      var lastIndex = childNodes.length - 1;\n      var text = compressSpaces(textNode.value || textNode.text || textNode.textContent || '');\n      if (index === 0) {\n        text = trimLeft(text);\n      }\n      if (index === lastIndex) {\n        text = trimRight(text);\n      }\n      return text;\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      var _this3 = this;\n      if (this.type !== 'text') {\n        this.renderTElementChildren(ctx);\n        return;\n      }\n      this.initializeCoordinates(ctx);\n      this.children.forEach(function (_, i) {\n        _this3.renderChild(ctx, _this3, _this3, i);\n      });\n      var mouse = this.document.screen.mouse; // Do not calc bounding box if mouse is not working.\n\n      if (mouse.isWorking()) {\n        mouse.checkBoundingBox(this, this.getBoundingBox(ctx));\n      }\n    }\n  }, {\n    key: \"renderTElementChildren\",\n    value: function renderTElementChildren(ctx) {\n      var document = this.document,\n        parent = this.parent;\n      var renderText = this.getText();\n      var customFont = parent.getStyle('font-family').getDefinition();\n      if (customFont) {\n        var unitsPerEm = customFont.fontFace.unitsPerEm;\n        var ctxFont = Font.parse(document.ctx.font);\n        var fontSize = parent.getStyle('font-size').getNumber(ctxFont.fontSize);\n        var fontStyle = parent.getStyle('font-style').getString(ctxFont.fontStyle);\n        var scale = fontSize / unitsPerEm;\n        var text = customFont.isRTL ? renderText.split('').reverse().join('') : renderText;\n        var dx = toNumbers(parent.getAttribute('dx').getString());\n        var len = text.length;\n        for (var i = 0; i < len; i++) {\n          var glyph = this.getGlyph(customFont, text, i);\n          ctx.translate(this.x, this.y);\n          ctx.scale(scale, -scale);\n          var lw = ctx.lineWidth;\n          ctx.lineWidth = ctx.lineWidth * unitsPerEm / fontSize;\n          if (fontStyle === 'italic') {\n            ctx.transform(1, 0, .4, 1, 0, 0);\n          }\n          glyph.render(ctx);\n          if (fontStyle === 'italic') {\n            ctx.transform(1, 0, -.4, 1, 0, 0);\n          }\n          ctx.lineWidth = lw;\n          ctx.scale(1 / scale, -1 / scale);\n          ctx.translate(-this.x, -this.y);\n          this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / unitsPerEm;\n          if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n            this.x += dx[i];\n          }\n        }\n        return;\n      }\n      var x = this.x,\n        y = this.y;\n      if (ctx.paintOrder === 'stroke') {\n        if (ctx.strokeStyle) {\n          ctx.strokeText(renderText, x, y);\n        }\n        if (ctx.fillStyle) {\n          ctx.fillText(renderText, x, y);\n        }\n      } else {\n        if (ctx.fillStyle) {\n          ctx.fillText(renderText, x, y);\n        }\n        if (ctx.strokeStyle) {\n          ctx.strokeText(renderText, x, y);\n        }\n      }\n    }\n  }, {\n    key: \"getAnchorDelta\",\n    value: function getAnchorDelta(ctx, parent, startI) {\n      var textAnchor = this.getStyle('text-anchor').getString('start');\n      if (textAnchor !== 'start') {\n        var children = parent.children;\n        var len = children.length;\n        var child = null;\n        var width = 0;\n        for (var i = startI; i < len; i++) {\n          child = children[i];\n          if (i > startI && child.getAttribute('x').hasValue() || child.getAttribute('text-anchor').hasValue()) {\n            break; // new group\n          }\n\n          width += child.measureTextRecursive(ctx);\n        }\n        return -1 * (textAnchor === 'end' ? width : width / 2.0);\n      }\n      return 0;\n    }\n  }, {\n    key: \"adjustChildCoordinates\",\n    value: function adjustChildCoordinates(ctx, textParent, parent, i) {\n      var child = parent.children[i];\n      if (typeof child.measureText !== 'function') {\n        return child;\n      }\n      ctx.save();\n      child.setContext(ctx, true);\n      var xAttr = child.getAttribute('x');\n      var yAttr = child.getAttribute('y');\n      var dxAttr = child.getAttribute('dx');\n      var dyAttr = child.getAttribute('dy');\n      var textAnchor = child.getAttribute('text-anchor').getString('start');\n      if (i === 0 && child.type !== 'textNode') {\n        if (!xAttr.hasValue()) {\n          xAttr.setValue(textParent.getAttribute('x').getValue('0'));\n        }\n        if (!yAttr.hasValue()) {\n          yAttr.setValue(textParent.getAttribute('y').getValue('0'));\n        }\n        if (!dxAttr.hasValue()) {\n          dxAttr.setValue(textParent.getAttribute('dx').getValue('0'));\n        }\n        if (!dyAttr.hasValue()) {\n          dyAttr.setValue(textParent.getAttribute('dy').getValue('0'));\n        }\n      }\n      if (xAttr.hasValue()) {\n        child.x = xAttr.getPixels('x') + textParent.getAnchorDelta(ctx, parent, i);\n        if (textAnchor !== 'start') {\n          var width = child.measureTextRecursive(ctx);\n          child.x += -1 * (textAnchor === 'end' ? width : width / 2.0);\n        }\n        if (dxAttr.hasValue()) {\n          child.x += dxAttr.getPixels('x');\n        }\n      } else {\n        if (textAnchor !== 'start') {\n          var _width = child.measureTextRecursive(ctx);\n          textParent.x += -1 * (textAnchor === 'end' ? _width : _width / 2.0);\n        }\n        if (dxAttr.hasValue()) {\n          textParent.x += dxAttr.getPixels('x');\n        }\n        child.x = textParent.x;\n      }\n      textParent.x = child.x + child.measureText(ctx);\n      if (yAttr.hasValue()) {\n        child.y = yAttr.getPixels('y');\n        if (dyAttr.hasValue()) {\n          child.y += dyAttr.getPixels('y');\n        }\n      } else {\n        if (dyAttr.hasValue()) {\n          textParent.y += dyAttr.getPixels('y');\n        }\n        child.y = textParent.y;\n      }\n      textParent.y = child.y;\n      child.clearContext(ctx);\n      ctx.restore();\n      return child;\n    }\n  }, {\n    key: \"getChildBoundingBox\",\n    value: function getChildBoundingBox(ctx, textParent, parent, i) {\n      var child = this.adjustChildCoordinates(ctx, textParent, parent, i);\n      var boundingBox = child.getBoundingBox(ctx);\n      if (!boundingBox) {\n        return null;\n      }\n      child.children.forEach(function (_, i) {\n        var childBoundingBox = textParent.getChildBoundingBox(ctx, textParent, child, i);\n        boundingBox.addBoundingBox(childBoundingBox);\n      });\n      return boundingBox;\n    }\n  }, {\n    key: \"renderChild\",\n    value: function renderChild(ctx, textParent, parent, i) {\n      var child = this.adjustChildCoordinates(ctx, textParent, parent, i);\n      child.render(ctx);\n      child.children.forEach(function (_, i) {\n        textParent.renderChild(ctx, textParent, child, i);\n      });\n    }\n  }, {\n    key: \"measureTextRecursive\",\n    value: function measureTextRecursive(ctx) {\n      var width = this.children.reduce(function (width, child) {\n        return width + child.measureTextRecursive(ctx);\n      }, this.measureText(ctx));\n      return width;\n    }\n  }, {\n    key: \"measureText\",\n    value: function measureText(ctx) {\n      var measureCache = this.measureCache;\n      if (~measureCache) {\n        return measureCache;\n      }\n      var renderText = this.getText();\n      var measure = this.measureTargetText(ctx, renderText);\n      this.measureCache = measure;\n      return measure;\n    }\n  }, {\n    key: \"measureTargetText\",\n    value: function measureTargetText(ctx, targetText) {\n      if (!targetText.length) {\n        return 0;\n      }\n      var parent = this.parent;\n      var customFont = parent.getStyle('font-family').getDefinition();\n      if (customFont) {\n        var fontSize = this.getFontSize();\n        var text = customFont.isRTL ? targetText.split('').reverse().join('') : targetText;\n        var dx = toNumbers(parent.getAttribute('dx').getString());\n        var len = text.length;\n        var _measure = 0;\n        for (var i = 0; i < len; i++) {\n          var glyph = this.getGlyph(customFont, text, i);\n          _measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;\n          if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n            _measure += dx[i];\n          }\n        }\n        return _measure;\n      }\n      if (!ctx.measureText) {\n        return targetText.length * 10;\n      }\n      ctx.save();\n      this.setContext(ctx, true);\n      var _ctx$measureText = ctx.measureText(targetText),\n        measure = _ctx$measureText.width;\n      this.clearContext(ctx);\n      ctx.restore();\n      return measure;\n    }\n  }]);\n  return TextElement;\n}(RenderedElement);\nfunction _createSuper$6(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$6()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$6() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar TSpanElement = /*#__PURE__*/function (_TextElement) {\n  _inherits(TSpanElement, _TextElement);\n  var _super = _createSuper$6(TSpanElement);\n  function TSpanElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, TSpanElement);\n    _this = _super.call(this, document, node, (this instanceof TSpanElement ? this.constructor : void 0) === TSpanElement ? true : captureTextNodes);\n    _this.type = 'tspan'; // if this node has children, then they own the text\n\n    _this.text = _this.children.length > 0 ? '' : _this.getTextFromNode();\n    return _this;\n  }\n  _createClass(TSpanElement, [{\n    key: \"getText\",\n    value: function getText() {\n      return this.text;\n    }\n  }]);\n  return TSpanElement;\n}(TextElement);\nfunction _createSuper$7(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$7()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$7() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar TextNode = /*#__PURE__*/function (_TSpanElement) {\n  _inherits(TextNode, _TSpanElement);\n  var _super = _createSuper$7(TextNode);\n  function TextNode() {\n    var _this;\n    _classCallCheck(this, TextNode);\n    _this = _super.apply(this, arguments);\n    _this.type = 'textNode';\n    return _this;\n  }\n  return TextNode;\n}(TSpanElement);\nfunction preparePath(path) {\n  var d = path.replace(/,/gm, ' ') // get rid of all commas\n  // As the end of a match can also be the start of the next match, we need to run this replace twice.\n  .replace(/([MmZzLlHhVvCcSsQqTtAa])([^\\s])/gm, '$1 $2') // suffix commands with spaces\n  .replace(/([MmZzLlHhVvCcSsQqTtAa])([^\\s])/gm, '$1 $2') // suffix commands with spaces\n  .replace(/([^\\s])([MmZzLlHhVvCcSsQqTtAa])/gm, '$1 $2') // prefix commands with spaces\n  .replace(/([0-9])([+\\-])/gm, '$1 $2') // separate digits on +- signs\n  // Again, we need to run this twice to find all occurances\n  .replace(/(\\.[0-9]*)(\\.)/gm, '$1 $2') // separate digits when they start with a comma\n  .replace(/(\\.[0-9]*)(\\.)/gm, '$1 $2') // separate digits when they start with a comma\n  .replace(/([Aa](?:\\s+(?:[0-9]*\\.)?[0-9]+){3})\\s+([01])\\s*([01])/gm, '$1 $2 $3 '); // shorthand elliptical arc path syntax\n\n  return compressSpaces(d).trim();\n}\nvar PathParser = /*#__PURE__*/function () {\n  function PathParser(path) {\n    _classCallCheck(this, PathParser);\n    this.control = null;\n    this.start = null;\n    this.current = null;\n    this.command = '';\n    this.tokens = [];\n    this.i = -1;\n    this.previousCommand = '';\n    this.points = [];\n    this.angles = [];\n    this.tokens = preparePath(path).split(' ');\n  }\n  _createClass(PathParser, [{\n    key: \"reset\",\n    value: function reset() {\n      this.i = -1;\n      this.command = '';\n      this.previousCommand = '';\n      this.start = new Point(0, 0);\n      this.control = new Point(0, 0);\n      this.current = new Point(0, 0);\n      this.points = [];\n      this.angles = [];\n    }\n  }, {\n    key: \"isEnd\",\n    value: function isEnd() {\n      var i = this.i,\n        tokens = this.tokens;\n      return i >= tokens.length - 1;\n    }\n  }, {\n    key: \"isCommandOrEnd\",\n    value: function isCommandOrEnd() {\n      if (this.isEnd()) {\n        return true;\n      }\n      var i = this.i,\n        tokens = this.tokens;\n      return /^[A-Za-z]$/.test(tokens[i + 1]);\n    }\n  }, {\n    key: \"isRelativeCommand\",\n    value: function isRelativeCommand() {\n      switch (this.command) {\n        case 'm':\n        case 'l':\n        case 'h':\n        case 'v':\n        case 'c':\n        case 's':\n        case 'q':\n        case 't':\n        case 'a':\n        case 'z':\n          return true;\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getToken\",\n    value: function getToken() {\n      this.i++;\n      return this.tokens[this.i];\n    }\n  }, {\n    key: \"getScalar\",\n    value: function getScalar() {\n      return parseFloat(this.getToken());\n    }\n  }, {\n    key: \"nextCommand\",\n    value: function nextCommand() {\n      this.previousCommand = this.command;\n      this.command = this.getToken();\n    }\n  }, {\n    key: \"getPoint\",\n    value: function getPoint() {\n      var point = new Point(this.getScalar(), this.getScalar());\n      return this.makeAbsolute(point);\n    }\n  }, {\n    key: \"getAsControlPoint\",\n    value: function getAsControlPoint() {\n      var point = this.getPoint();\n      this.control = point;\n      return point;\n    }\n  }, {\n    key: \"getAsCurrentPoint\",\n    value: function getAsCurrentPoint() {\n      var point = this.getPoint();\n      this.current = point;\n      return point;\n    }\n  }, {\n    key: \"getReflectedControlPoint\",\n    value: function getReflectedControlPoint() {\n      var previousCommand = this.previousCommand.toLowerCase();\n      if (previousCommand !== 'c' && previousCommand !== 's' && previousCommand !== 'q' && previousCommand !== 't') {\n        return this.current;\n      } // reflect point\n\n      var _this$current = this.current,\n        cx = _this$current.x,\n        cy = _this$current.y,\n        _this$control = this.control,\n        ox = _this$control.x,\n        oy = _this$control.y;\n      var point = new Point(2 * cx - ox, 2 * cy - oy);\n      return point;\n    }\n  }, {\n    key: \"makeAbsolute\",\n    value: function makeAbsolute(point) {\n      if (this.isRelativeCommand()) {\n        var _this$current2 = this.current,\n          x = _this$current2.x,\n          y = _this$current2.y;\n        point.x += x;\n        point.y += y;\n      }\n      return point;\n    }\n  }, {\n    key: \"addMarker\",\n    value: function addMarker(point, from, priorTo) {\n      var points = this.points,\n        angles = this.angles; // if the last angle isn't filled in because we didn't have this point yet ...\n\n      if (priorTo && angles.length > 0 && !angles[angles.length - 1]) {\n        angles[angles.length - 1] = points[points.length - 1].angleTo(priorTo);\n      }\n      this.addMarkerAngle(point, from ? from.angleTo(point) : null);\n    }\n  }, {\n    key: \"addMarkerAngle\",\n    value: function addMarkerAngle(point, angle) {\n      this.points.push(point);\n      this.angles.push(angle);\n    }\n  }, {\n    key: \"getMarkerPoints\",\n    value: function getMarkerPoints() {\n      return this.points;\n    }\n  }, {\n    key: \"getMarkerAngles\",\n    value: function getMarkerAngles() {\n      var angles = this.angles;\n      var len = angles.length;\n      for (var i = 0; i < len; i++) {\n        if (!angles[i]) {\n          for (var j = i + 1; j < len; j++) {\n            if (angles[j]) {\n              angles[i] = angles[j];\n              break;\n            }\n          }\n        }\n      }\n      return angles;\n    }\n  }]);\n  return PathParser;\n}();\nfunction _createSuper$8(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$8()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$8() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar PathElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(PathElement, _RenderedElement);\n  var _super = _createSuper$8(PathElement);\n  function PathElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, PathElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'path';\n    _this.pathParser = null;\n    _this.pathParser = new PathParser(_this.getAttribute('d').getString());\n    return _this;\n  }\n  _createClass(PathElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var pathParser = this.pathParser;\n      var boundingBox = new BoundingBox();\n      pathParser.reset();\n      if (ctx) {\n        ctx.beginPath();\n      }\n      while (!pathParser.isEnd()) {\n        pathParser.nextCommand();\n        switch (pathParser.command) {\n          case 'M':\n          case 'm':\n            this.pathM(ctx, boundingBox);\n            break;\n          case 'L':\n          case 'l':\n            this.pathL(ctx, boundingBox);\n            break;\n          case 'H':\n          case 'h':\n            this.pathH(ctx, boundingBox);\n            break;\n          case 'V':\n          case 'v':\n            this.pathV(ctx, boundingBox);\n            break;\n          case 'C':\n          case 'c':\n            this.pathC(ctx, boundingBox);\n            break;\n          case 'S':\n          case 's':\n            this.pathS(ctx, boundingBox);\n            break;\n          case 'Q':\n          case 'q':\n            this.pathQ(ctx, boundingBox);\n            break;\n          case 'T':\n          case 't':\n            this.pathT(ctx, boundingBox);\n            break;\n          case 'A':\n          case 'a':\n            this.pathA(ctx, boundingBox);\n            break;\n          case 'Z':\n          case 'z':\n            this.pathZ(ctx, boundingBox);\n            break;\n        }\n      }\n      return boundingBox;\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(_) {\n      return this.path();\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      var pathParser = this.pathParser;\n      var points = pathParser.getMarkerPoints();\n      var angles = pathParser.getMarkerAngles();\n      var markers = points.map(function (point, i) {\n        return [point, angles[i]];\n      });\n      return markers;\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      this.path(ctx);\n      this.document.screen.mouse.checkPath(this, ctx);\n      var fillRuleStyleProp = this.getStyle('fill-rule');\n      if (ctx.fillStyle !== '') {\n        if (fillRuleStyleProp.getString('inherit') !== 'inherit') {\n          ctx.fill(fillRuleStyleProp.getString());\n        } else {\n          ctx.fill();\n        }\n      }\n      if (ctx.strokeStyle !== '') {\n        ctx.stroke();\n      }\n      var markers = this.getMarkers();\n      if (markers) {\n        var markersLastIndex = markers.length - 1;\n        var markerStartStyleProp = this.getStyle('marker-start');\n        var markerMidStyleProp = this.getStyle('marker-mid');\n        var markerEndStyleProp = this.getStyle('marker-end');\n        if (markerStartStyleProp.isUrlDefinition()) {\n          var marker = markerStartStyleProp.getDefinition();\n          var _markers$ = _slicedToArray(markers[0], 2),\n            point = _markers$[0],\n            angle = _markers$[1];\n          marker.render(ctx, point, angle);\n        }\n        if (markerMidStyleProp.isUrlDefinition()) {\n          var _marker = markerMidStyleProp.getDefinition();\n          for (var i = 1; i < markersLastIndex; i++) {\n            var _markers$i = _slicedToArray(markers[i], 2),\n              _point = _markers$i[0],\n              _angle = _markers$i[1];\n            _marker.render(ctx, _point, _angle);\n          }\n        }\n        if (markerEndStyleProp.isUrlDefinition()) {\n          var _marker2 = markerEndStyleProp.getDefinition();\n          var _markers$markersLastI = _slicedToArray(markers[markersLastIndex], 2),\n            _point2 = _markers$markersLastI[0],\n            _angle2 = _markers$markersLastI[1];\n          _marker2.render(ctx, _point2, _angle2);\n        }\n      }\n    }\n  }, {\n    key: \"pathM\",\n    value: function pathM(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      var point = pathParser.getAsCurrentPoint();\n      var x = point.x,\n        y = point.y;\n      pathParser.addMarker(point);\n      boundingBox.addPoint(x, y);\n      if (ctx) {\n        ctx.moveTo(x, y);\n      }\n      pathParser.start = pathParser.current;\n      while (!pathParser.isCommandOrEnd()) {\n        var _point3 = pathParser.getAsCurrentPoint();\n        var _x = _point3.x,\n          _y = _point3.y;\n        pathParser.addMarker(_point3, pathParser.start);\n        boundingBox.addPoint(_x, _y);\n        if (ctx) {\n          ctx.lineTo(_x, _y);\n        }\n      }\n    }\n  }, {\n    key: \"pathL\",\n    value: function pathL(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = pathParser.getAsCurrentPoint();\n        var x = point.x,\n          y = point.y;\n        pathParser.addMarker(point, current);\n        boundingBox.addPoint(x, y);\n        if (ctx) {\n          ctx.lineTo(x, y);\n        }\n      }\n    }\n  }, {\n    key: \"pathH\",\n    value: function pathH(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = new Point((pathParser.isRelativeCommand() ? current.x : 0) + pathParser.getScalar(), current.y);\n        pathParser.addMarker(point, current);\n        pathParser.current = point;\n        boundingBox.addPoint(point.x, point.y);\n        if (ctx) {\n          ctx.lineTo(point.x, point.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathV\",\n    value: function pathV(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = new Point(current.x, (pathParser.isRelativeCommand() ? current.y : 0) + pathParser.getScalar());\n        pathParser.addMarker(point, current);\n        pathParser.current = point;\n        boundingBox.addPoint(point.x, point.y);\n        if (ctx) {\n          ctx.lineTo(point.x, point.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathC\",\n    value: function pathC(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = pathParser.getPoint();\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        pathParser.addMarker(currentPoint, controlPoint, point);\n        boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        if (ctx) {\n          ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathS\",\n    value: function pathS(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = pathParser.getReflectedControlPoint();\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        pathParser.addMarker(currentPoint, controlPoint, point);\n        boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        if (ctx) {\n          ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathQ\",\n    value: function pathQ(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n        boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        if (ctx) {\n          ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathT\",\n    value: function pathT(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var controlPoint = pathParser.getReflectedControlPoint();\n        pathParser.control = controlPoint;\n        var currentPoint = pathParser.getAsCurrentPoint();\n        pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n        boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        if (ctx) {\n          ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathA\",\n    value: function pathA(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var rx = pathParser.getScalar();\n        var ry = pathParser.getScalar();\n        var xAxisRotation = pathParser.getScalar() * (Math.PI / 180.0);\n        var largeArcFlag = pathParser.getScalar();\n        var sweepFlag = pathParser.getScalar();\n        var currentPoint = pathParser.getAsCurrentPoint(); // Conversion from endpoint to center parameterization\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n        // x1', y1'\n\n        var currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2.0, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2.0); // adjust radii\n\n        var l = Math.pow(currp.x, 2) / Math.pow(rx, 2) + Math.pow(currp.y, 2) / Math.pow(ry, 2);\n        if (l > 1) {\n          rx *= Math.sqrt(l);\n          ry *= Math.sqrt(l);\n        } // cx', cy'\n\n        var s = (largeArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(currp.y, 2) - Math.pow(ry, 2) * Math.pow(currp.x, 2)) / (Math.pow(rx, 2) * Math.pow(currp.y, 2) + Math.pow(ry, 2) * Math.pow(currp.x, 2)));\n        if (isNaN(s)) {\n          s = 0;\n        }\n        var cpp = new Point(s * rx * currp.y / ry, s * -ry * currp.x / rx); // cx, cy\n\n        var centp = new Point((current.x + currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y); // initial angle\n\n        var a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry]); // angle delta\n\n        var u = [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry];\n        var v = [(-currp.x - cpp.x) / rx, (-currp.y - cpp.y) / ry];\n        var ad = vectorsAngle(u, v);\n        if (vectorsRatio(u, v) <= -1) {\n          ad = Math.PI;\n        }\n        if (vectorsRatio(u, v) >= 1) {\n          ad = 0;\n        } // for markers\n\n        var dir = 1 - sweepFlag ? 1.0 : -1.0;\n        var ah = a1 + dir * (ad / 2.0);\n        var halfWay = new Point(centp.x + rx * Math.cos(ah), centp.y + ry * Math.sin(ah));\n        pathParser.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n        pathParser.addMarkerAngle(currentPoint, ah - dir * Math.PI);\n        boundingBox.addPoint(currentPoint.x, currentPoint.y); // TODO: this is too naive, make it better\n\n        if (ctx && !isNaN(a1) && !isNaN(ad)) {\n          var r = rx > ry ? rx : ry;\n          var sx = rx > ry ? 1 : rx / ry;\n          var sy = rx > ry ? ry / rx : 1;\n          ctx.translate(centp.x, centp.y);\n          ctx.rotate(xAxisRotation);\n          ctx.scale(sx, sy);\n          ctx.arc(0, 0, r, a1, a1 + ad, Boolean(1 - sweepFlag));\n          ctx.scale(1 / sx, 1 / sy);\n          ctx.rotate(-xAxisRotation);\n          ctx.translate(-centp.x, -centp.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathZ\",\n    value: function pathZ(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      if (ctx) {\n        // only close path if it is not a straight line\n        if (boundingBox.x1 !== boundingBox.x2 && boundingBox.y1 !== boundingBox.y2) {\n          ctx.closePath();\n        }\n      }\n      pathParser.current = pathParser.start;\n    }\n  }]);\n  return PathElement;\n}(RenderedElement);\nfunction _createSuper$9(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$9()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$9() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar SVGElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(SVGElement, _RenderedElement);\n  var _super = _createSuper$9(SVGElement);\n  function SVGElement() {\n    var _this;\n    _classCallCheck(this, SVGElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'svg';\n    _this.root = false;\n    return _this;\n  }\n  _createClass(SVGElement, [{\n    key: \"clearContext\",\n    value: function clearContext(ctx) {\n      _get(_getPrototypeOf(SVGElement.prototype), \"clearContext\", this).call(this, ctx);\n      this.document.screen.viewPort.removeCurrent();\n    }\n  }, {\n    key: \"setContext\",\n    value: function setContext(ctx) {\n      var document = this.document;\n      var screen = document.screen,\n        window = document.window;\n      var canvas = ctx.canvas;\n      screen.setDefaults(ctx);\n      if (canvas.style && typeof ctx.font !== 'undefined' && window && typeof window.getComputedStyle !== 'undefined') {\n        ctx.font = window.getComputedStyle(canvas).getPropertyValue('font');\n        var fontSizeProp = new Property(document, 'fontSize', Font.parse(ctx.font).fontSize);\n        if (fontSizeProp.hasValue()) {\n          document.rootEmSize = fontSizeProp.getPixels('y');\n          document.emSize = document.rootEmSize;\n        }\n      }\n      _get(_getPrototypeOf(SVGElement.prototype), \"setContext\", this).call(this, ctx); // create new view port\n\n      if (!this.getAttribute('x').hasValue()) {\n        this.getAttribute('x', true).setValue(0);\n      }\n      if (!this.getAttribute('y').hasValue()) {\n        this.getAttribute('y', true).setValue(0);\n      }\n      ctx.translate(this.getAttribute('x').getPixels('x'), this.getAttribute('y').getPixels('y'));\n      var _screen$viewPort = screen.viewPort,\n        width = _screen$viewPort.width,\n        height = _screen$viewPort.height;\n      if (!this.getStyle('width').hasValue()) {\n        this.getStyle('width', true).setValue('100%');\n      }\n      if (!this.getStyle('height').hasValue()) {\n        this.getStyle('height', true).setValue('100%');\n      }\n      if (!this.getStyle('color').hasValue()) {\n        this.getStyle('color', true).setValue('black');\n      }\n      var refXAttr = this.getAttribute('refX');\n      var refYAttr = this.getAttribute('refY');\n      var viewBoxAttr = this.getAttribute('viewBox');\n      var viewBox = viewBoxAttr.hasValue() ? toNumbers(viewBoxAttr.getString()) : null;\n      var clip = !this.root && this.getAttribute('overflow').getValue('hidden') !== 'visible';\n      var minX = 0;\n      var minY = 0;\n      var clipX = 0;\n      var clipY = 0;\n      if (viewBox) {\n        minX = viewBox[0];\n        minY = viewBox[1];\n      }\n      if (!this.root) {\n        width = this.getStyle('width').getPixels('x');\n        height = this.getStyle('height').getPixels('y');\n        if (this.type === 'marker') {\n          clipX = minX;\n          clipY = minY;\n          minX = 0;\n          minY = 0;\n        }\n      }\n      screen.viewPort.setCurrent(width, height);\n      if (viewBox) {\n        width = viewBox[2];\n        height = viewBox[3];\n      }\n      document.setViewBox({\n        ctx: ctx,\n        aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n        width: screen.viewPort.width,\n        desiredWidth: width,\n        height: screen.viewPort.height,\n        desiredHeight: height,\n        minX: minX,\n        minY: minY,\n        refX: refXAttr.getValue(),\n        refY: refYAttr.getValue(),\n        clip: clip,\n        clipX: clipX,\n        clipY: clipY\n      });\n      if (viewBox) {\n        screen.viewPort.removeCurrent();\n        screen.viewPort.setCurrent(width, height);\n      }\n    }\n    /**\n     * Resize SVG to fit in given size.\n     * @param width\n     * @param height\n     * @param preserveAspectRatio\n     */\n  }, {\n    key: \"resize\",\n    value: function resize(width) {\n      var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n      var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var widthAttr = this.getAttribute('width', true);\n      var heightAttr = this.getAttribute('height', true);\n      var viewBoxAttr = this.getAttribute('viewBox');\n      var styleAttr = this.getAttribute('style');\n      var originWidth = widthAttr.getNumber(0);\n      var originHeight = heightAttr.getNumber(0);\n      if (preserveAspectRatio) {\n        if (typeof preserveAspectRatio === 'string') {\n          this.getAttribute('preserveAspectRatio', true).setValue(preserveAspectRatio);\n        } else {\n          var preserveAspectRatioAttr = this.getAttribute('preserveAspectRatio');\n          if (preserveAspectRatioAttr.hasValue()) {\n            preserveAspectRatioAttr.setValue(preserveAspectRatioAttr.getString().replace(/^\\s*(\\S.*\\S)\\s*$/, '$1'));\n          }\n        }\n      }\n      widthAttr.setValue(width);\n      heightAttr.setValue(height);\n      if (!viewBoxAttr.hasValue()) {\n        viewBoxAttr.setValue(\"0 0 \".concat(originWidth || width, \" \").concat(originHeight || height));\n      }\n      if (styleAttr.hasValue()) {\n        var widthStyle = this.getStyle('width');\n        var heightStyle = this.getStyle('height');\n        if (widthStyle.hasValue()) {\n          widthStyle.setValue(\"\".concat(width, \"px\"));\n        }\n        if (heightStyle.hasValue()) {\n          heightStyle.setValue(\"\".concat(height, \"px\"));\n        }\n      }\n    }\n  }]);\n  return SVGElement;\n}(RenderedElement);\nfunction _createSuper$a(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$a()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$a() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar RectElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(RectElement, _PathElement);\n  var _super = _createSuper$a(RectElement);\n  function RectElement() {\n    var _this;\n    _classCallCheck(this, RectElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'rect';\n    return _this;\n  }\n  _createClass(RectElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var x = this.getAttribute('x').getPixels('x');\n      var y = this.getAttribute('y').getPixels('y');\n      var width = this.getStyle('width').getPixels('x');\n      var height = this.getStyle('height').getPixels('y');\n      var rxAttr = this.getAttribute('rx');\n      var ryAttr = this.getAttribute('ry');\n      var rx = rxAttr.getPixels('x');\n      var ry = ryAttr.getPixels('y');\n      if (rxAttr.hasValue() && !ryAttr.hasValue()) {\n        ry = rx;\n      }\n      if (ryAttr.hasValue() && !rxAttr.hasValue()) {\n        rx = ry;\n      }\n      rx = Math.min(rx, width / 2.0);\n      ry = Math.min(ry, height / 2.0);\n      if (ctx) {\n        var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n        ctx.beginPath(); // always start the path so we don't fill prior paths\n\n        if (height > 0 && width > 0) {\n          ctx.moveTo(x + rx, y);\n          ctx.lineTo(x + width - rx, y);\n          ctx.bezierCurveTo(x + width - rx + KAPPA * rx, y, x + width, y + ry - KAPPA * ry, x + width, y + ry);\n          ctx.lineTo(x + width, y + height - ry);\n          ctx.bezierCurveTo(x + width, y + height - ry + KAPPA * ry, x + width - rx + KAPPA * rx, y + height, x + width - rx, y + height);\n          ctx.lineTo(x + rx, y + height);\n          ctx.bezierCurveTo(x + rx - KAPPA * rx, y + height, x, y + height - ry + KAPPA * ry, x, y + height - ry);\n          ctx.lineTo(x, y + ry);\n          ctx.bezierCurveTo(x, y + ry - KAPPA * ry, x + rx - KAPPA * rx, y, x + rx, y);\n          ctx.closePath();\n        }\n      }\n      return new BoundingBox(x, y, x + width, y + height);\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      return null;\n    }\n  }]);\n  return RectElement;\n}(PathElement);\nfunction _createSuper$b(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$b()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$b() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar CircleElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(CircleElement, _PathElement);\n  var _super = _createSuper$b(CircleElement);\n  function CircleElement() {\n    var _this;\n    _classCallCheck(this, CircleElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'circle';\n    return _this;\n  }\n  _createClass(CircleElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var cx = this.getAttribute('cx').getPixels('x');\n      var cy = this.getAttribute('cy').getPixels('y');\n      var r = this.getAttribute('r').getPixels();\n      if (ctx && r > 0) {\n        ctx.beginPath();\n        ctx.arc(cx, cy, r, 0, Math.PI * 2, false);\n        ctx.closePath();\n      }\n      return new BoundingBox(cx - r, cy - r, cx + r, cy + r);\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      return null;\n    }\n  }]);\n  return CircleElement;\n}(PathElement);\nfunction _createSuper$c(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$c()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$c() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar EllipseElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(EllipseElement, _PathElement);\n  var _super = _createSuper$c(EllipseElement);\n  function EllipseElement() {\n    var _this;\n    _classCallCheck(this, EllipseElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'ellipse';\n    return _this;\n  }\n  _createClass(EllipseElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n      var rx = this.getAttribute('rx').getPixels('x');\n      var ry = this.getAttribute('ry').getPixels('y');\n      var cx = this.getAttribute('cx').getPixels('x');\n      var cy = this.getAttribute('cy').getPixels('y');\n      if (ctx && rx > 0 && ry > 0) {\n        ctx.beginPath();\n        ctx.moveTo(cx + rx, cy);\n        ctx.bezierCurveTo(cx + rx, cy + KAPPA * ry, cx + KAPPA * rx, cy + ry, cx, cy + ry);\n        ctx.bezierCurveTo(cx - KAPPA * rx, cy + ry, cx - rx, cy + KAPPA * ry, cx - rx, cy);\n        ctx.bezierCurveTo(cx - rx, cy - KAPPA * ry, cx - KAPPA * rx, cy - ry, cx, cy - ry);\n        ctx.bezierCurveTo(cx + KAPPA * rx, cy - ry, cx + rx, cy - KAPPA * ry, cx + rx, cy);\n        ctx.closePath();\n      }\n      return new BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      return null;\n    }\n  }]);\n  return EllipseElement;\n}(PathElement);\nfunction _createSuper$d(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$d()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$d() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar LineElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(LineElement, _PathElement);\n  var _super = _createSuper$d(LineElement);\n  function LineElement() {\n    var _this;\n    _classCallCheck(this, LineElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'line';\n    return _this;\n  }\n  _createClass(LineElement, [{\n    key: \"getPoints\",\n    value: function getPoints() {\n      return [new Point(this.getAttribute('x1').getPixels('x'), this.getAttribute('y1').getPixels('y')), new Point(this.getAttribute('x2').getPixels('x'), this.getAttribute('y2').getPixels('y'))];\n    }\n  }, {\n    key: \"path\",\n    value: function path(ctx) {\n      var _this$getPoints = this.getPoints(),\n        _this$getPoints2 = _slicedToArray(_this$getPoints, 2),\n        _this$getPoints2$ = _this$getPoints2[0],\n        x0 = _this$getPoints2$.x,\n        y0 = _this$getPoints2$.y,\n        _this$getPoints2$2 = _this$getPoints2[1],\n        x1 = _this$getPoints2$2.x,\n        y1 = _this$getPoints2$2.y;\n      if (ctx) {\n        ctx.beginPath();\n        ctx.moveTo(x0, y0);\n        ctx.lineTo(x1, y1);\n      }\n      return new BoundingBox(x0, y0, x1, y1);\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      var _this$getPoints3 = this.getPoints(),\n        _this$getPoints4 = _slicedToArray(_this$getPoints3, 2),\n        p0 = _this$getPoints4[0],\n        p1 = _this$getPoints4[1];\n      var a = p0.angleTo(p1);\n      return [[p0, a], [p1, a]];\n    }\n  }]);\n  return LineElement;\n}(PathElement);\nfunction _createSuper$e(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$e()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$e() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar PolylineElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(PolylineElement, _PathElement);\n  var _super = _createSuper$e(PolylineElement);\n  function PolylineElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, PolylineElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'polyline';\n    _this.points = [];\n    _this.points = Point.parsePath(_this.getAttribute('points').getString());\n    return _this;\n  }\n  _createClass(PolylineElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var points = this.points;\n      var _points = _slicedToArray(points, 1),\n        _points$ = _points[0],\n        x0 = _points$.x,\n        y0 = _points$.y;\n      var boundingBox = new BoundingBox(x0, y0);\n      if (ctx) {\n        ctx.beginPath();\n        ctx.moveTo(x0, y0);\n      }\n      points.forEach(function (_ref) {\n        var x = _ref.x,\n          y = _ref.y;\n        boundingBox.addPoint(x, y);\n        if (ctx) {\n          ctx.lineTo(x, y);\n        }\n      });\n      return boundingBox;\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      var points = this.points;\n      var lastIndex = points.length - 1;\n      var markers = [];\n      points.forEach(function (point, i) {\n        if (i === lastIndex) {\n          return;\n        }\n        markers.push([point, point.angleTo(points[i + 1])]);\n      });\n      if (markers.length > 0) {\n        markers.push([points[points.length - 1], markers[markers.length - 1][1]]);\n      }\n      return markers;\n    }\n  }]);\n  return PolylineElement;\n}(PathElement);\nfunction _createSuper$f(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$f()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$f() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar PolygonElement = /*#__PURE__*/function (_PolylineElement) {\n  _inherits(PolygonElement, _PolylineElement);\n  var _super = _createSuper$f(PolygonElement);\n  function PolygonElement() {\n    var _this;\n    _classCallCheck(this, PolygonElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'polygon';\n    return _this;\n  }\n  _createClass(PolygonElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var boundingBox = _get(_getPrototypeOf(PolygonElement.prototype), \"path\", this).call(this, ctx);\n      var _this$points = _slicedToArray(this.points, 1),\n        _this$points$ = _this$points[0],\n        x = _this$points$.x,\n        y = _this$points$.y;\n      if (ctx) {\n        ctx.lineTo(x, y);\n        ctx.closePath();\n      }\n      return boundingBox;\n    }\n  }]);\n  return PolygonElement;\n}(PolylineElement);\nfunction _createSuper$g(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$g()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$g() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar PatternElement = /*#__PURE__*/function (_Element) {\n  _inherits(PatternElement, _Element);\n  var _super = _createSuper$g(PatternElement);\n  function PatternElement() {\n    var _this;\n    _classCallCheck(this, PatternElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'pattern';\n    return _this;\n  }\n  _createClass(PatternElement, [{\n    key: \"createPattern\",\n    value: function createPattern(ctx, _, parentOpacityProp) {\n      var width = this.getStyle('width').getPixels('x', true);\n      var height = this.getStyle('height').getPixels('y', true); // render me using a temporary svg element\n\n      var patternSvg = new SVGElement(this.document, null);\n      patternSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n      patternSvg.attributes.width = new Property(this.document, 'width', \"\".concat(width, \"px\"));\n      patternSvg.attributes.height = new Property(this.document, 'height', \"\".concat(height, \"px\"));\n      patternSvg.attributes.transform = new Property(this.document, 'transform', this.getAttribute('patternTransform').getValue());\n      patternSvg.children = this.children;\n      var patternCanvas = this.document.createCanvas(width, height);\n      var patternCtx = patternCanvas.getContext('2d');\n      var xAttr = this.getAttribute('x');\n      var yAttr = this.getAttribute('y');\n      if (xAttr.hasValue() && yAttr.hasValue()) {\n        patternCtx.translate(xAttr.getPixels('x', true), yAttr.getPixels('y', true));\n      }\n      if (parentOpacityProp.hasValue()) {\n        this.styles['fill-opacity'] = parentOpacityProp;\n      } else {\n        Reflect.deleteProperty(this.styles, 'fill-opacity');\n      } // render 3x3 grid so when we transform there's no white space on edges\n\n      for (var x = -1; x <= 1; x++) {\n        for (var y = -1; y <= 1; y++) {\n          patternCtx.save();\n          patternSvg.attributes.x = new Property(this.document, 'x', x * patternCanvas.width);\n          patternSvg.attributes.y = new Property(this.document, 'y', y * patternCanvas.height);\n          patternSvg.render(patternCtx);\n          patternCtx.restore();\n        }\n      }\n      var pattern = ctx.createPattern(patternCanvas, 'repeat');\n      return pattern;\n    }\n  }]);\n  return PatternElement;\n}(Element);\nfunction _createSuper$h(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$h()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$h() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar MarkerElement = /*#__PURE__*/function (_Element) {\n  _inherits(MarkerElement, _Element);\n  var _super = _createSuper$h(MarkerElement);\n  function MarkerElement() {\n    var _this;\n    _classCallCheck(this, MarkerElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'marker';\n    return _this;\n  }\n  _createClass(MarkerElement, [{\n    key: \"render\",\n    value: function render(ctx, point, angle) {\n      if (!point) {\n        return;\n      }\n      var x = point.x,\n        y = point.y;\n      var orient = this.getAttribute('orient').getValue('auto');\n      var markerUnits = this.getAttribute('markerUnits').getValue('strokeWidth');\n      ctx.translate(x, y);\n      if (orient === 'auto') {\n        ctx.rotate(angle);\n      }\n      if (markerUnits === 'strokeWidth') {\n        ctx.scale(ctx.lineWidth, ctx.lineWidth);\n      }\n      ctx.save(); // render me using a temporary svg element\n\n      var markerSvg = new SVGElement(this.document, null);\n      markerSvg.type = this.type;\n      markerSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n      markerSvg.attributes.refX = new Property(this.document, 'refX', this.getAttribute('refX').getValue());\n      markerSvg.attributes.refY = new Property(this.document, 'refY', this.getAttribute('refY').getValue());\n      markerSvg.attributes.width = new Property(this.document, 'width', this.getAttribute('markerWidth').getValue());\n      markerSvg.attributes.height = new Property(this.document, 'height', this.getAttribute('markerHeight').getValue());\n      markerSvg.attributes.overflow = new Property(this.document, 'overflow', this.getAttribute('overflow').getValue());\n      markerSvg.attributes.fill = new Property(this.document, 'fill', this.getAttribute('fill').getColor('black'));\n      markerSvg.attributes.stroke = new Property(this.document, 'stroke', this.getAttribute('stroke').getValue('none'));\n      markerSvg.children = this.children;\n      markerSvg.render(ctx);\n      ctx.restore();\n      if (markerUnits === 'strokeWidth') {\n        ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth);\n      }\n      if (orient === 'auto') {\n        ctx.rotate(-angle);\n      }\n      ctx.translate(-x, -y);\n    }\n  }]);\n  return MarkerElement;\n}(Element);\nfunction _createSuper$i(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$i()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$i() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar DefsElement = /*#__PURE__*/function (_Element) {\n  _inherits(DefsElement, _Element);\n  var _super = _createSuper$i(DefsElement);\n  function DefsElement() {\n    var _this;\n    _classCallCheck(this, DefsElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'defs';\n    return _this;\n  }\n  _createClass(DefsElement, [{\n    key: \"render\",\n    value: function render() {// NOOP\n    }\n  }]);\n  return DefsElement;\n}(Element);\nfunction _createSuper$j(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$j()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$j() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar GElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(GElement, _RenderedElement);\n  var _super = _createSuper$j(GElement);\n  function GElement() {\n    var _this;\n    _classCallCheck(this, GElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'g';\n    return _this;\n  }\n  _createClass(GElement, [{\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(ctx) {\n      var boundingBox = new BoundingBox();\n      this.children.forEach(function (child) {\n        boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n      });\n      return boundingBox;\n    }\n  }]);\n  return GElement;\n}(RenderedElement);\nfunction _createSuper$k(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$k()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$k() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar GradientElement = /*#__PURE__*/function (_Element) {\n  _inherits(GradientElement, _Element);\n  var _super = _createSuper$k(GradientElement);\n  function GradientElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, GradientElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.attributesToInherit = ['gradientUnits'];\n    _this.stops = [];\n    var _assertThisInitialize = _assertThisInitialized(_this),\n      stops = _assertThisInitialize.stops,\n      children = _assertThisInitialize.children;\n    children.forEach(function (child) {\n      if (child.type === 'stop') {\n        stops.push(child);\n      }\n    });\n    return _this;\n  }\n  _createClass(GradientElement, [{\n    key: \"getGradientUnits\",\n    value: function getGradientUnits() {\n      return this.getAttribute('gradientUnits').getString('objectBoundingBox');\n    }\n  }, {\n    key: \"createGradient\",\n    value: function createGradient(ctx, element, parentOpacityProp) {\n      var _this2 = this;\n\n      // tslint:disable-next-line: no-this-assignment\n      var stopsContainer = this;\n      if (this.getHrefAttribute().hasValue()) {\n        stopsContainer = this.getHrefAttribute().getDefinition();\n        this.inheritStopContainer(stopsContainer);\n      }\n      var _stopsContainer = stopsContainer,\n        stops = _stopsContainer.stops;\n      var gradient = this.getGradient(ctx, element);\n      if (!gradient) {\n        return this.addParentOpacity(parentOpacityProp, stops[stops.length - 1].color);\n      }\n      stops.forEach(function (stop) {\n        gradient.addColorStop(stop.offset, _this2.addParentOpacity(parentOpacityProp, stop.color));\n      });\n      if (this.getAttribute('gradientTransform').hasValue()) {\n        // render as transformed pattern on temporary canvas\n        var document = this.document;\n        var _document$screen = document.screen,\n          MAX_VIRTUAL_PIXELS = _document$screen.MAX_VIRTUAL_PIXELS,\n          viewPort = _document$screen.viewPort;\n        var _viewPort$viewPorts = _slicedToArray(viewPort.viewPorts, 1),\n          rootView = _viewPort$viewPorts[0];\n        var rect = new RectElement(document, null);\n        rect.attributes.x = new Property(document, 'x', -MAX_VIRTUAL_PIXELS / 3.0);\n        rect.attributes.y = new Property(document, 'y', -MAX_VIRTUAL_PIXELS / 3.0);\n        rect.attributes.width = new Property(document, 'width', MAX_VIRTUAL_PIXELS);\n        rect.attributes.height = new Property(document, 'height', MAX_VIRTUAL_PIXELS);\n        var group = new GElement(document, null);\n        group.attributes.transform = new Property(document, 'transform', this.getAttribute('gradientTransform').getValue());\n        group.children = [rect];\n        var patternSvg = new SVGElement(document, null);\n        patternSvg.attributes.x = new Property(document, 'x', 0);\n        patternSvg.attributes.y = new Property(document, 'y', 0);\n        patternSvg.attributes.width = new Property(document, 'width', rootView.width);\n        patternSvg.attributes.height = new Property(document, 'height', rootView.height);\n        patternSvg.children = [group];\n        var patternCanvas = document.createCanvas(rootView.width, rootView.height);\n        var patternCtx = patternCanvas.getContext('2d');\n        patternCtx.fillStyle = gradient;\n        patternSvg.render(patternCtx);\n        return patternCtx.createPattern(patternCanvas, 'no-repeat');\n      }\n      return gradient;\n    }\n  }, {\n    key: \"inheritStopContainer\",\n    value: function inheritStopContainer(stopsContainer) {\n      var _this3 = this;\n      this.attributesToInherit.forEach(function (attributeToInherit) {\n        if (!_this3.getAttribute(attributeToInherit).hasValue() && stopsContainer.getAttribute(attributeToInherit).hasValue()) {\n          _this3.getAttribute(attributeToInherit, true).setValue(stopsContainer.getAttribute(attributeToInherit).getValue());\n        }\n      });\n    }\n  }, {\n    key: \"addParentOpacity\",\n    value: function addParentOpacity(parentOpacityProp, color) {\n      if (parentOpacityProp.hasValue()) {\n        var colorProp = new Property(this.document, 'color', color);\n        return colorProp.addOpacity(parentOpacityProp).getColor();\n      }\n      return color;\n    }\n  }]);\n  return GradientElement;\n}(Element);\nfunction _createSuper$l(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$l()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$l() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar LinearGradientElement = /*#__PURE__*/function (_GradientElement) {\n  _inherits(LinearGradientElement, _GradientElement);\n  var _super = _createSuper$l(LinearGradientElement);\n  function LinearGradientElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, LinearGradientElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'linearGradient';\n    _this.attributesToInherit.push('x1', 'y1', 'x2', 'y2');\n    return _this;\n  }\n  _createClass(LinearGradientElement, [{\n    key: \"getGradient\",\n    value: function getGradient(ctx, element) {\n      var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n      var boundingBox = isBoundingBoxUnits ? element.getBoundingBox(ctx) : null;\n      if (isBoundingBoxUnits && !boundingBox) {\n        return null;\n      }\n      if (!this.getAttribute('x1').hasValue() && !this.getAttribute('y1').hasValue() && !this.getAttribute('x2').hasValue() && !this.getAttribute('y2').hasValue()) {\n        this.getAttribute('x1', true).setValue(0);\n        this.getAttribute('y1', true).setValue(0);\n        this.getAttribute('x2', true).setValue(1);\n        this.getAttribute('y2', true).setValue(0);\n      }\n      var x1 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x1').getNumber() : this.getAttribute('x1').getPixels('x');\n      var y1 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y1').getNumber() : this.getAttribute('y1').getPixels('y');\n      var x2 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x2').getNumber() : this.getAttribute('x2').getPixels('x');\n      var y2 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y2').getNumber() : this.getAttribute('y2').getPixels('y');\n      if (x1 === x2 && y1 === y2) {\n        return null;\n      }\n      return ctx.createLinearGradient(x1, y1, x2, y2);\n    }\n  }]);\n  return LinearGradientElement;\n}(GradientElement);\nfunction _createSuper$m(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$m()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$m() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar RadialGradientElement = /*#__PURE__*/function (_GradientElement) {\n  _inherits(RadialGradientElement, _GradientElement);\n  var _super = _createSuper$m(RadialGradientElement);\n  function RadialGradientElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, RadialGradientElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'radialGradient';\n    _this.attributesToInherit.push('cx', 'cy', 'r', 'fx', 'fy', 'fr');\n    return _this;\n  }\n  _createClass(RadialGradientElement, [{\n    key: \"getGradient\",\n    value: function getGradient(ctx, element) {\n      var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n      var boundingBox = element.getBoundingBox(ctx);\n      if (isBoundingBoxUnits && !boundingBox) {\n        return null;\n      }\n      if (!this.getAttribute('cx').hasValue()) {\n        this.getAttribute('cx', true).setValue('50%');\n      }\n      if (!this.getAttribute('cy').hasValue()) {\n        this.getAttribute('cy', true).setValue('50%');\n      }\n      if (!this.getAttribute('r').hasValue()) {\n        this.getAttribute('r', true).setValue('50%');\n      }\n      var cx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('cx').getNumber() : this.getAttribute('cx').getPixels('x');\n      var cy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('cy').getNumber() : this.getAttribute('cy').getPixels('y');\n      var fx = cx;\n      var fy = cy;\n      if (this.getAttribute('fx').hasValue()) {\n        fx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('fx').getNumber() : this.getAttribute('fx').getPixels('x');\n      }\n      if (this.getAttribute('fy').hasValue()) {\n        fy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('fy').getNumber() : this.getAttribute('fy').getPixels('y');\n      }\n      var r = isBoundingBoxUnits ? (boundingBox.width + boundingBox.height) / 2.0 * this.getAttribute('r').getNumber() : this.getAttribute('r').getPixels();\n      var fr = this.getAttribute('fr').getPixels();\n      return ctx.createRadialGradient(fx, fy, fr, cx, cy, r);\n    }\n  }]);\n  return RadialGradientElement;\n}(GradientElement);\nfunction _createSuper$n(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$n()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$n() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar StopElement = /*#__PURE__*/function (_Element) {\n  _inherits(StopElement, _Element);\n  var _super = _createSuper$n(StopElement);\n  function StopElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, StopElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'stop';\n    var offset = Math.max(0, Math.min(1, _this.getAttribute('offset').getNumber()));\n    var stopOpacity = _this.getStyle('stop-opacity');\n    var stopColor = _this.getStyle('stop-color', true);\n    if (stopColor.getString() === '') {\n      stopColor.setValue('#000');\n    }\n    if (stopOpacity.hasValue()) {\n      stopColor = stopColor.addOpacity(stopOpacity);\n    }\n    _this.offset = offset;\n    _this.color = stopColor.getColor();\n    return _this;\n  }\n  return StopElement;\n}(Element);\nfunction _createSuper$o(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$o()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$o() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar AnimateElement = /*#__PURE__*/function (_Element) {\n  _inherits(AnimateElement, _Element);\n  var _super = _createSuper$o(AnimateElement);\n  function AnimateElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, AnimateElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'animate';\n    _this.duration = 0;\n    _this.initialValue = null;\n    _this.initialUnits = '';\n    _this.removed = false;\n    _this.frozen = false;\n    document.screen.animations.push(_assertThisInitialized(_this));\n    _this.begin = _this.getAttribute('begin').getMilliseconds();\n    _this.maxDuration = _this.begin + _this.getAttribute('dur').getMilliseconds();\n    _this.from = _this.getAttribute('from');\n    _this.to = _this.getAttribute('to');\n    _this.values = _this.getAttribute('values');\n    if (_this.values.hasValue()) {\n      _this.values.setValue(_this.values.getString().split(';'));\n    }\n    return _this;\n  }\n  _createClass(AnimateElement, [{\n    key: \"getProperty\",\n    value: function getProperty() {\n      var attributeType = this.getAttribute('attributeType').getString();\n      var attributeName = this.getAttribute('attributeName').getString();\n      if (attributeType === 'CSS') {\n        return this.parent.getStyle(attributeName, true);\n      }\n      return this.parent.getAttribute(attributeName, true);\n    }\n  }, {\n    key: \"calcValue\",\n    value: function calcValue() {\n      var initialUnits = this.initialUnits;\n      var _this$getProgress = this.getProgress(),\n        progress = _this$getProgress.progress,\n        from = _this$getProgress.from,\n        to = _this$getProgress.to; // tween value linearly\n\n      var newValue = from.getNumber() + (to.getNumber() - from.getNumber()) * progress;\n      if (initialUnits === '%') {\n        newValue *= 100.0; // numValue() returns 0-1 whereas properties are 0-100\n      }\n\n      return \"\".concat(newValue).concat(initialUnits);\n    }\n  }, {\n    key: \"update\",\n    value: function update(delta) {\n      var parent = this.parent;\n      var prop = this.getProperty(); // set initial value\n\n      if (!this.initialValue) {\n        this.initialValue = prop.getString();\n        this.initialUnits = prop.getUnits();\n      } // if we're past the end time\n\n      if (this.duration > this.maxDuration) {\n        var fill = this.getAttribute('fill').getString('remove'); // loop for indefinitely repeating animations\n\n        if (this.getAttribute('repeatCount').getString() === 'indefinite' || this.getAttribute('repeatDur').getString() === 'indefinite') {\n          this.duration = 0;\n        } else if (fill === 'freeze' && !this.frozen) {\n          this.frozen = true;\n          parent.animationFrozen = true;\n          parent.animationFrozenValue = prop.getString();\n        } else if (fill === 'remove' && !this.removed) {\n          this.removed = true;\n          prop.setValue(parent.animationFrozen ? parent.animationFrozenValue : this.initialValue);\n          return true;\n        }\n        return false;\n      }\n      this.duration += delta; // if we're past the begin time\n\n      var updated = false;\n      if (this.begin < this.duration) {\n        var newValue = this.calcValue(); // tween\n\n        var typeAttr = this.getAttribute('type');\n        if (typeAttr.hasValue()) {\n          // for transform, etc.\n          var type = typeAttr.getString();\n          newValue = \"\".concat(type, \"(\").concat(newValue, \")\");\n        }\n        prop.setValue(newValue);\n        updated = true;\n      }\n      return updated;\n    }\n  }, {\n    key: \"getProgress\",\n    value: function getProgress() {\n      var document = this.document,\n        values = this.values;\n      var result = {\n        progress: (this.duration - this.begin) / (this.maxDuration - this.begin)\n      };\n      if (values.hasValue()) {\n        var p = result.progress * (values.getValue().length - 1);\n        var lb = Math.floor(p);\n        var ub = Math.ceil(p);\n        result.from = new Property(document, 'from', parseFloat(values.getValue()[lb]));\n        result.to = new Property(document, 'to', parseFloat(values.getValue()[ub]));\n        result.progress = (p - lb) / (ub - lb);\n      } else {\n        result.from = this.from;\n        result.to = this.to;\n      }\n      return result;\n    }\n  }]);\n  return AnimateElement;\n}(Element);\nfunction _createSuper$p(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$p()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$p() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar AnimateColorElement = /*#__PURE__*/function (_AnimateElement) {\n  _inherits(AnimateColorElement, _AnimateElement);\n  var _super = _createSuper$p(AnimateColorElement);\n  function AnimateColorElement() {\n    var _this;\n    _classCallCheck(this, AnimateColorElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'animateColor';\n    return _this;\n  }\n  _createClass(AnimateColorElement, [{\n    key: \"calcValue\",\n    value: function calcValue() {\n      var _this$getProgress = this.getProgress(),\n        progress = _this$getProgress.progress,\n        from = _this$getProgress.from,\n        to = _this$getProgress.to;\n      var colorFrom = new RGBColor(from.getColor());\n      var colorTo = new RGBColor(to.getColor());\n      if (colorFrom.ok && colorTo.ok) {\n        // tween color linearly\n        var r = colorFrom.r + (colorTo.r - colorFrom.r) * progress;\n        var g = colorFrom.g + (colorTo.g - colorFrom.g) * progress;\n        var b = colorFrom.b + (colorTo.b - colorFrom.b) * progress; // ? alpha\n\n        return \"rgb(\".concat(parseInt(r, 10), \", \").concat(parseInt(g, 10), \", \").concat(parseInt(b, 10), \")\");\n      }\n      return this.getAttribute('from').getColor();\n    }\n  }]);\n  return AnimateColorElement;\n}(AnimateElement);\nfunction _createSuper$q(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$q()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$q() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar AnimateTransformElement = /*#__PURE__*/function (_AnimateElement) {\n  _inherits(AnimateTransformElement, _AnimateElement);\n  var _super = _createSuper$q(AnimateTransformElement);\n  function AnimateTransformElement() {\n    var _this;\n    _classCallCheck(this, AnimateTransformElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'animateTransform';\n    return _this;\n  }\n  _createClass(AnimateTransformElement, [{\n    key: \"calcValue\",\n    value: function calcValue() {\n      var _this$getProgress = this.getProgress(),\n        progress = _this$getProgress.progress,\n        from = _this$getProgress.from,\n        to = _this$getProgress.to; // tween value linearly\n\n      var transformFrom = toNumbers(from.getString());\n      var transformTo = toNumbers(to.getString());\n      var newValue = transformFrom.map(function (from, i) {\n        var to = transformTo[i];\n        return from + (to - from) * progress;\n      }).join(' ');\n      return newValue;\n    }\n  }]);\n  return AnimateTransformElement;\n}(AnimateElement);\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) {\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var it,\n    normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction _createSuper$r(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$r()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$r() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar FontElement = /*#__PURE__*/function (_Element) {\n  _inherits(FontElement, _Element);\n  var _super = _createSuper$r(FontElement);\n  function FontElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, FontElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'font';\n    _this.glyphs = {};\n    _this.horizAdvX = _this.getAttribute('horiz-adv-x').getNumber();\n    var definitions = document.definitions;\n    var _assertThisInitialize = _assertThisInitialized(_this),\n      children = _assertThisInitialize.children;\n    var _iterator = _createForOfIteratorHelper(children),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var child = _step.value;\n        switch (child.type) {\n          case 'font-face':\n            {\n              _this.fontFace = child;\n              var fontFamilyStyle = child.getStyle('font-family');\n              if (fontFamilyStyle.hasValue()) {\n                definitions[fontFamilyStyle.getString()] = _assertThisInitialized(_this);\n              }\n              break;\n            }\n          case 'missing-glyph':\n            _this.missingGlyph = child;\n            break;\n          case 'glyph':\n            {\n              var glyph = child;\n              if (glyph.arabicForm) {\n                _this.isRTL = true;\n                _this.isArabic = true;\n                if (typeof _this.glyphs[glyph.unicode] === 'undefined') {\n                  _this.glyphs[glyph.unicode] = {};\n                }\n                _this.glyphs[glyph.unicode][glyph.arabicForm] = glyph;\n              } else {\n                _this.glyphs[glyph.unicode] = glyph;\n              }\n              break;\n            }\n          default:\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return _this;\n  }\n  _createClass(FontElement, [{\n    key: \"render\",\n    value: function render() {// NO RENDER\n    }\n  }]);\n  return FontElement;\n}(Element);\nfunction _createSuper$s(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$s()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$s() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar FontFaceElement = /*#__PURE__*/function (_Element) {\n  _inherits(FontFaceElement, _Element);\n  var _super = _createSuper$s(FontFaceElement);\n  function FontFaceElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, FontFaceElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'font-face';\n    _this.ascent = _this.getAttribute('ascent').getNumber();\n    _this.descent = _this.getAttribute('descent').getNumber();\n    _this.unitsPerEm = _this.getAttribute('units-per-em').getNumber();\n    return _this;\n  }\n  return FontFaceElement;\n}(Element);\nfunction _createSuper$t(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$t()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$t() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar MissingGlyphElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(MissingGlyphElement, _PathElement);\n  var _super = _createSuper$t(MissingGlyphElement);\n  function MissingGlyphElement() {\n    var _this;\n    _classCallCheck(this, MissingGlyphElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'missing-glyph';\n    _this.horizAdvX = 0;\n    return _this;\n  }\n  return MissingGlyphElement;\n}(PathElement);\nfunction _createSuper$u(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$u()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$u() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar GlyphElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(GlyphElement, _PathElement);\n  var _super = _createSuper$u(GlyphElement);\n  function GlyphElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, GlyphElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'glyph';\n    _this.horizAdvX = _this.getAttribute('horiz-adv-x').getNumber();\n    _this.unicode = _this.getAttribute('unicode').getString();\n    _this.arabicForm = _this.getAttribute('arabic-form').getString();\n    return _this;\n  }\n  return GlyphElement;\n}(PathElement);\nfunction _createSuper$v(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$v()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$v() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar TRefElement = /*#__PURE__*/function (_TextElement) {\n  _inherits(TRefElement, _TextElement);\n  var _super = _createSuper$v(TRefElement);\n  function TRefElement() {\n    var _this;\n    _classCallCheck(this, TRefElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'tref';\n    return _this;\n  }\n  _createClass(TRefElement, [{\n    key: \"getText\",\n    value: function getText() {\n      var element = this.getHrefAttribute().getDefinition();\n      if (element) {\n        var firstChild = element.children[0];\n        if (firstChild) {\n          return firstChild.getText();\n        }\n      }\n      return '';\n    }\n  }]);\n  return TRefElement;\n}(TextElement);\nfunction _createSuper$w(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$w()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$w() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar AElement = /*#__PURE__*/function (_TextElement) {\n  _inherits(AElement, _TextElement);\n  var _super = _createSuper$w(AElement);\n  function AElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, AElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'a';\n    var childNodes = node.childNodes;\n    var firstChild = childNodes[0];\n    var hasText = childNodes.length > 0 && Array.from(childNodes).every(function (node) {\n      return node.nodeType === 3;\n    });\n    _this.hasText = hasText;\n    _this.text = hasText ? _this.getTextFromNode(firstChild) : '';\n    return _this;\n  }\n  _createClass(AElement, [{\n    key: \"getText\",\n    value: function getText() {\n      return this.text;\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      if (this.hasText) {\n        // render as text element\n        _get(_getPrototypeOf(AElement.prototype), \"renderChildren\", this).call(this, ctx);\n        var document = this.document,\n          x = this.x,\n          y = this.y;\n        var mouse = document.screen.mouse;\n        var fontSize = new Property(document, 'fontSize', Font.parse(document.ctx.font).fontSize); // Do not calc bounding box if mouse is not working.\n\n        if (mouse.isWorking()) {\n          mouse.checkBoundingBox(this, new BoundingBox(x, y - fontSize.getPixels('y'), x + this.measureText(ctx), y));\n        }\n      } else if (this.children.length > 0) {\n        // render as temporary group\n        var g = new GElement(this.document, null);\n        g.children = this.children;\n        g.parent = this;\n        g.render(ctx);\n      }\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      var window = this.document.window;\n      if (window) {\n        window.open(this.getHrefAttribute().getString());\n      }\n    }\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove() {\n      var ctx = this.document.ctx;\n      ctx.canvas.style.cursor = 'pointer';\n    }\n  }]);\n  return AElement;\n}(TextElement);\nfunction _createForOfIteratorHelper$1(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray$1(o))) {\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var it,\n    normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray$1(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen);\n}\nfunction _arrayLikeToArray$1(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction _createSuper$x(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$x()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$x() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar TextPathElement = /*#__PURE__*/function (_TextElement) {\n  _inherits(TextPathElement, _TextElement);\n  var _super = _createSuper$x(TextPathElement);\n  function TextPathElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, TextPathElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'textPath';\n    _this.textWidth = 0;\n    _this.textHeight = 0;\n    _this.pathLength = -1;\n    _this.glyphInfo = null;\n    _this.letterSpacingCache = [];\n    _this.measuresCache = new Map([['', 0]]);\n    var pathElement = _this.getHrefAttribute().getDefinition();\n    _this.text = _this.getTextFromNode();\n    _this.dataArray = _this.parsePathData(pathElement);\n    return _this;\n  }\n  _createClass(TextPathElement, [{\n    key: \"getText\",\n    value: function getText() {\n      return this.text;\n    }\n  }, {\n    key: \"path\",\n    value: function path(ctx) {\n      var dataArray = this.dataArray;\n      if (ctx) {\n        ctx.beginPath();\n      }\n      dataArray.forEach(function (_ref) {\n        var command = _ref.command,\n          points = _ref.points;\n        switch (command) {\n          case 'L':\n            if (ctx) {\n              ctx.lineTo(points[0], points[1]);\n            }\n            break;\n          case 'M':\n            if (ctx) {\n              ctx.moveTo(points[0], points[1]);\n            }\n            break;\n          case 'C':\n            if (ctx) {\n              ctx.bezierCurveTo(points[0], points[1], points[2], points[3], points[4], points[5]);\n            }\n            break;\n          case 'Q':\n            if (ctx) {\n              ctx.quadraticCurveTo(points[0], points[1], points[2], points[3]);\n            }\n            break;\n          case 'A':\n            {\n              var cx = points[0];\n              var cy = points[1];\n              var rx = points[2];\n              var ry = points[3];\n              var theta = points[4];\n              var dTheta = points[5];\n              var psi = points[6];\n              var fs = points[7];\n              var r = rx > ry ? rx : ry;\n              var scaleX = rx > ry ? 1 : rx / ry;\n              var scaleY = rx > ry ? ry / rx : 1;\n              if (ctx) {\n                ctx.translate(cx, cy);\n                ctx.rotate(psi);\n                ctx.scale(scaleX, scaleY);\n                ctx.arc(0, 0, r, theta, theta + dTheta, Boolean(1 - fs));\n                ctx.scale(1 / scaleX, 1 / scaleY);\n                ctx.rotate(-psi);\n                ctx.translate(-cx, -cy);\n              }\n              break;\n            }\n          case 'z':\n            if (ctx) {\n              ctx.closePath();\n            }\n            break;\n        }\n      });\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      this.setTextData(ctx);\n      ctx.save();\n      var textDecoration = this.parent.getStyle('text-decoration').getString();\n      var fontSize = this.getFontSize();\n      var glyphInfo = this.glyphInfo;\n      var fill = ctx.fillStyle;\n      if (textDecoration === 'underline') {\n        ctx.beginPath();\n      }\n      glyphInfo.forEach(function (glyph, i) {\n        var p0 = glyph.p0,\n          p1 = glyph.p1,\n          partialText = glyph.text;\n        ctx.save();\n        ctx.translate(p0.x, p0.y);\n        ctx.rotate(glyphInfo[i].rotation);\n        if (ctx.fillStyle) {\n          ctx.fillText(partialText, 0, 0);\n        }\n        if (ctx.strokeStyle) {\n          ctx.strokeText(partialText, 0, 0);\n        }\n        ctx.restore();\n        if (textDecoration === 'underline') {\n          if (i === 0) {\n            ctx.moveTo(p0.x, p0.y + fontSize / 8);\n          }\n          ctx.lineTo(p1.x, p1.y + fontSize / 5);\n        } //// To assist with debugging visually, uncomment following\n        //\n        // ctx.beginPath();\n        // if (i % 2)\n        // \tctx.strokeStyle = 'red';\n        // else\n        // \tctx.strokeStyle = 'green';\n        // ctx.moveTo(p0.x, p0.y);\n        // ctx.lineTo(p1.x, p1.y);\n        // ctx.stroke();\n        // ctx.closePath();\n      });\n\n      if (textDecoration === 'underline') {\n        ctx.lineWidth = fontSize / 20;\n        ctx.strokeStyle = fill;\n        ctx.stroke();\n        ctx.closePath();\n      }\n      ctx.restore();\n    }\n  }, {\n    key: \"getLetterSpacingAt\",\n    value: function getLetterSpacingAt() {\n      var idx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this.letterSpacingCache[idx] || 0;\n    }\n  }, {\n    key: \"findSegmentToFitChar\",\n    value: function findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, inputOffset, c, charI) {\n      var offset = inputOffset;\n      var glyphWidth = this.measureText(ctx, c);\n      if (c === ' ' && anchor === 'justify' && textFullWidth < fullPathWidth) {\n        glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n      }\n      if (charI > -1) {\n        offset += this.getLetterSpacingAt(charI);\n      }\n      var splineStep = this.textHeight / 20;\n      var segment = {\n        p0: this.getEquidistantPointOnPath(offset, splineStep),\n        p1: this.getEquidistantPointOnPath(offset + glyphWidth, splineStep)\n      };\n      offset += glyphWidth;\n      return {\n        offset: offset,\n        segment: segment\n      };\n    }\n  }, {\n    key: \"measureText\",\n    value: function measureText(ctx, text) {\n      var measuresCache = this.measuresCache;\n      var targetText = text || this.getText();\n      if (measuresCache.has(targetText)) {\n        return measuresCache.get(targetText);\n      }\n      var measure = this.measureTargetText(ctx, targetText);\n      measuresCache.set(targetText, measure);\n      return measure;\n    } // This method supposes what all custom fonts already loaded.\n    // If some font will be loaded after this method call, <textPath> will not be rendered correctly.\n    // You need to call this method manually to update glyphs cache.\n  }, {\n    key: \"setTextData\",\n    value: function setTextData(ctx) {\n      var _this2 = this;\n      if (this.glyphInfo) {\n        return;\n      }\n      var renderText = this.getText();\n      var chars = renderText.split('');\n      var spacesNumber = renderText.split(' ').length - 1;\n      var dx = toNumbers(this.parent.getAttribute('dx').getString('0'));\n      var anchor = this.parent.getStyle('text-anchor').getString('start');\n      var thisSpacing = this.getStyle('letter-spacing');\n      var parentSpacing = this.parent.getStyle('letter-spacing');\n      var letterSpacing = 0;\n      if (!thisSpacing.hasValue() || thisSpacing.getValue() === 'inherit') {\n        letterSpacing = parentSpacing.getPixels();\n      } else if (thisSpacing.hasValue()) {\n        if (thisSpacing.getValue() !== 'initial' && thisSpacing.getValue() !== 'unset') {\n          letterSpacing = thisSpacing.getPixels();\n        }\n      } // fill letter-spacing cache\n\n      var letterSpacingCache = [];\n      var textLen = renderText.length;\n      this.letterSpacingCache = letterSpacingCache;\n      for (var i = 0; i < textLen; i++) {\n        letterSpacingCache.push(typeof dx[i] !== 'undefined' ? dx[i] : letterSpacing);\n      }\n      var dxSum = letterSpacingCache.reduce(function (acc, cur) {\n        return acc + cur || 0;\n      }, 0);\n      this.textWidth = this.measureText(ctx);\n      this.textHeight = this.getFontSize();\n      var textFullWidth = Math.max(this.textWidth + dxSum, 0);\n      this.glyphInfo = [];\n      var fullPathWidth = this.getPathLength();\n      var startOffset = this.getStyle('startOffset').getNumber(0) * fullPathWidth;\n      var offset = 0;\n      if (anchor === 'middle' || anchor === 'center') {\n        offset = -textFullWidth / 2;\n      }\n      if (anchor === 'end' || anchor === 'right') {\n        offset = -textFullWidth;\n      }\n      offset += startOffset;\n      chars.forEach(function (char, i) {\n        // Find such segment what distance between p0 and p1 is approx. width of glyph\n        var _this2$findSegmentToF = _this2.findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, offset, char, i),\n          nextOffset = _this2$findSegmentToF.offset,\n          segment = _this2$findSegmentToF.segment;\n        offset = nextOffset;\n        if (!segment.p0 || !segment.p1) {\n          return;\n        }\n        var width = _this2.getLineLength(segment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y); // Note: Since glyphs are rendered one at a time, any kerning pair data built into the font will not be used.\n        // Can foresee having a rough pair table built in that the developer can override as needed.\n        // Or use \"dx\" attribute of the <text> node as a naive replacement\n\n        var kern = 0; // placeholder for future implementation\n\n        var midpoint = _this2.getPointOnLine(kern + width / 2.0, segment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y);\n        var rotation = Math.atan2(segment.p1.y - segment.p0.y, segment.p1.x - segment.p0.x);\n        _this2.glyphInfo.push({\n          transposeX: midpoint.x,\n          transposeY: midpoint.y,\n          text: chars[i],\n          p0: segment.p0,\n          p1: segment.p1,\n          rotation: rotation\n        });\n      });\n    }\n  }, {\n    key: \"parsePathData\",\n    value: function parsePathData(path) {\n      this.pathLength = -1; // reset path length\n\n      if (!path) {\n        return [];\n      }\n      var pathCommands = [];\n      var pathParser = path.pathParser;\n      pathParser.reset(); // convert l, H, h, V, and v to L\n\n      while (!pathParser.isEnd()) {\n        var current = pathParser.current;\n        var startX = current ? current.x : 0;\n        var startY = current ? current.y : 0;\n        var cmd = '';\n        var points = [];\n        pathParser.nextCommand();\n        var upperCommand = pathParser.command.toUpperCase();\n        switch (pathParser.command) {\n          case 'M':\n          case 'm':\n            cmd = this.pathM(pathParser, points);\n            break;\n          case 'L':\n          case 'l':\n            cmd = this.pathL(pathParser, points);\n            break;\n          case 'H':\n          case 'h':\n            cmd = this.pathH(pathParser, points);\n            break;\n          case 'V':\n          case 'v':\n            cmd = this.pathV(pathParser, points);\n            break;\n          case 'C':\n          case 'c':\n            this.pathC(pathParser, points);\n            break;\n          case 'S':\n          case 's':\n            cmd = this.pathS(pathParser, points);\n            break;\n          case 'Q':\n          case 'q':\n            this.pathQ(pathParser, points);\n            break;\n          case 'T':\n          case 't':\n            cmd = this.pathT(pathParser, points);\n            break;\n          case 'A':\n          case 'a':\n            points = this.pathA(pathParser);\n            break;\n          case 'Z':\n          case 'z':\n            pathParser.current = pathParser.start;\n            break;\n        }\n        if (upperCommand !== 'Z') {\n          pathCommands.push({\n            command: cmd || upperCommand,\n            points: points,\n            start: {\n              x: startX,\n              y: startY\n            },\n            pathLength: this.calcLength(startX, startY, cmd || upperCommand, points)\n          });\n        } else {\n          pathCommands.push({\n            command: 'z',\n            points: [],\n            pathLength: 0\n          });\n        }\n      }\n      return pathCommands;\n    }\n  }, {\n    key: \"pathM\",\n    value: function pathM(pathParser, points) {\n      var p = pathParser.getAsCurrentPoint(); // pathParser.addMarker(p);\n\n      points.push(p.x, p.y);\n      pathParser.start = pathParser.current;\n      while (!pathParser.isCommandOrEnd()) {\n        var _p = pathParser.getAsCurrentPoint();\n        points.push(_p.x, _p.y);\n        return 'L';\n      }\n    }\n  }, {\n    key: \"pathL\",\n    value: function pathL(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var p = pathParser.getAsCurrentPoint();\n        points.push(p.x, p.y);\n      }\n      return 'L';\n    }\n  }, {\n    key: \"pathH\",\n    value: function pathH(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = new Point((pathParser.isRelativeCommand() ? current.x : 0) + pathParser.getScalar(), current.y);\n        points.push(point.x, point.y);\n        pathParser.current = point;\n      }\n      return 'L';\n    }\n  }, {\n    key: \"pathV\",\n    value: function pathV(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = new Point(current.x, (pathParser.isRelativeCommand() ? current.y : 0) + pathParser.getScalar());\n        points.push(point.x, point.y);\n        pathParser.current = point;\n      }\n      return 'L';\n    }\n  }, {\n    key: \"pathC\",\n    value: function pathC(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var point = pathParser.getPoint();\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n      }\n    }\n  }, {\n    key: \"pathS\",\n    value: function pathS(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var point = pathParser.getReflectedControlPoint();\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n      }\n      return 'C';\n    }\n  }, {\n    key: \"pathQ\",\n    value: function pathQ(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n      }\n    }\n  }, {\n    key: \"pathT\",\n    value: function pathT(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var controlPoint = pathParser.getReflectedControlPoint();\n        pathParser.control = controlPoint;\n        var currentPoint = pathParser.getAsCurrentPoint();\n        points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n      }\n      return 'Q';\n    }\n  }, {\n    key: \"pathA\",\n    value: function pathA(pathParser) {\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current; // x1, y1\n\n        var rx = pathParser.getScalar();\n        var ry = pathParser.getScalar();\n        var xAxisRotation = pathParser.getScalar() * (Math.PI / 180.0); // \n\n        var largeArcFlag = pathParser.getScalar(); //  fA\n\n        var sweepFlag = pathParser.getScalar(); //  fS\n\n        var currentPoint = pathParser.getAsCurrentPoint(); // x2, y2\n        // Conversion from endpoint to center parameterization\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n        // x1', y1'\n\n        var currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2.0, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2.0); // adjust radii\n\n        var l = Math.pow(currp.x, 2) / Math.pow(rx, 2) + Math.pow(currp.y, 2) / Math.pow(ry, 2);\n        if (l > 1) {\n          rx *= Math.sqrt(l);\n          ry *= Math.sqrt(l);\n        } // cx', cy'\n\n        var s = (largeArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(currp.y, 2) - Math.pow(ry, 2) * Math.pow(currp.x, 2)) / (Math.pow(rx, 2) * Math.pow(currp.y, 2) + Math.pow(ry, 2) * Math.pow(currp.x, 2)));\n        if (isNaN(s)) {\n          s = 0;\n        }\n        var cpp = new Point(s * rx * currp.y / ry, s * -ry * currp.x / rx); // cx, cy\n\n        var centp = new Point((current.x + currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y); // initial angle\n\n        var a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry]); // 1\n        // angle delta\n\n        var u = [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry];\n        var v = [(-currp.x - cpp.x) / rx, (-currp.y - cpp.y) / ry];\n        var ad = vectorsAngle(u, v); // \n\n        if (vectorsRatio(u, v) <= -1) {\n          ad = Math.PI;\n        }\n        if (vectorsRatio(u, v) >= 1) {\n          ad = 0;\n        }\n        if (sweepFlag === 0 && ad > 0) {\n          ad = ad - 2 * Math.PI;\n        }\n        if (sweepFlag === 1 && ad < 0) {\n          ad = ad + 2 * Math.PI;\n        }\n        return [centp.x, centp.y, rx, ry, a1, ad, xAxisRotation, sweepFlag];\n      }\n    }\n  }, {\n    key: \"calcLength\",\n    value: function calcLength(x, y, cmd, points) {\n      var len = 0;\n      var p1 = null;\n      var p2 = null;\n      var t = 0;\n      switch (cmd) {\n        case 'L':\n          return this.getLineLength(x, y, points[0], points[1]);\n        case 'C':\n          // Approximates by breaking curve into 100 line segments\n          len = 0.0;\n          p1 = this.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          for (t = 0.01; t <= 1; t += 0.01) {\n            p2 = this.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n            len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n          return len;\n        case 'Q':\n          // Approximates by breaking curve into 100 line segments\n          len = 0.0;\n          p1 = this.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n          for (t = 0.01; t <= 1; t += 0.01) {\n            p2 = this.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n            len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n          return len;\n        case 'A':\n          // Approximates by breaking curve into line segments\n          len = 0.0;\n          var start = points[4]; // 4 = theta\n\n          var dTheta = points[5]; // 5 = dTheta\n\n          var end = points[4] + dTheta;\n          var inc = Math.PI / 180.0; // 1 degree resolution\n\n          if (Math.abs(start - end) < inc) {\n            inc = Math.abs(start - end);\n          } // Note: for purpose of calculating arc length, not going to worry about rotating X-axis by angle psi\n\n          p1 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n          if (dTheta < 0) {\n            // clockwise\n            for (t = start - inc; t > end; t -= inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          } else {\n            // counter-clockwise\n            for (t = start + inc; t < end; t += inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          }\n          p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          return len;\n      }\n      return 0;\n    }\n  }, {\n    key: \"getPointOnLine\",\n    value: function getPointOnLine(dist, P1x, P1y, P2x, P2y) {\n      var fromX = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : P1x;\n      var fromY = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : P1y;\n      var m = (P2y - P1y) / (P2x - P1x + PSEUDO_ZERO);\n      var run = Math.sqrt(dist * dist / (1 + m * m));\n      if (P2x < P1x) {\n        run *= -1;\n      }\n      var rise = m * run;\n      var pt = null;\n      if (P2x === P1x) {\n        // vertical line\n        pt = {\n          x: fromX,\n          y: fromY + rise\n        };\n      } else if ((fromY - P1y) / (fromX - P1x + PSEUDO_ZERO) === m) {\n        pt = {\n          x: fromX + run,\n          y: fromY + rise\n        };\n      } else {\n        var ix = 0;\n        var iy = 0;\n        var len = this.getLineLength(P1x, P1y, P2x, P2y);\n        if (len < PSEUDO_ZERO) {\n          return null;\n        }\n        var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n        u = u / (len * len);\n        ix = P1x + u * (P2x - P1x);\n        iy = P1y + u * (P2y - P1y);\n        var pRise = this.getLineLength(fromX, fromY, ix, iy);\n        var pRun = Math.sqrt(dist * dist - pRise * pRise);\n        run = Math.sqrt(pRun * pRun / (1 + m * m));\n        if (P2x < P1x) {\n          run *= -1;\n        }\n        rise = m * run;\n        pt = {\n          x: ix + run,\n          y: iy + rise\n        };\n      }\n      return pt;\n    }\n  }, {\n    key: \"getPointOnPath\",\n    value: function getPointOnPath(distance) {\n      var fullLen = this.getPathLength();\n      var cumulativePathLength = 0;\n      var p = null;\n      if (distance < -0.00005 || distance - 0.00005 > fullLen) {\n        return null;\n      }\n      var dataArray = this.dataArray;\n      var _iterator = _createForOfIteratorHelper$1(dataArray),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var pathCmd = _step.value;\n          if (pathCmd && (pathCmd.pathLength < 0.00005 || cumulativePathLength + pathCmd.pathLength + 0.00005 < distance)) {\n            cumulativePathLength += pathCmd.pathLength;\n            continue;\n          }\n          var delta = distance - cumulativePathLength;\n          var currentT = 0;\n          switch (pathCmd.command) {\n            case 'L':\n              p = this.getPointOnLine(delta, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.start.x, pathCmd.start.y);\n              break;\n            case 'A':\n              var start = pathCmd.points[4]; // 4 = theta\n\n              var dTheta = pathCmd.points[5]; // 5 = dTheta\n\n              var end = pathCmd.points[4] + dTheta;\n              currentT = start + delta / pathCmd.pathLength * dTheta;\n              if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n                break;\n              }\n              p = this.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n              break;\n            case 'C':\n              currentT = delta / pathCmd.pathLength;\n              if (currentT > 1) {\n                currentT = 1;\n              }\n              p = this.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n              break;\n            case 'Q':\n              currentT = delta / pathCmd.pathLength;\n              if (currentT > 1) {\n                currentT = 1;\n              }\n              p = this.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n              break;\n            default:\n          }\n          if (p) {\n            return p;\n          }\n          break;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return null;\n    }\n  }, {\n    key: \"getLineLength\",\n    value: function getLineLength(x1, y1, x2, y2) {\n      return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    }\n  }, {\n    key: \"getPathLength\",\n    value: function getPathLength() {\n      if (this.pathLength === -1) {\n        this.pathLength = this.dataArray.reduce(function (length, command) {\n          return command.pathLength > 0 ? length + command.pathLength : length;\n        }, 0);\n      }\n      return this.pathLength;\n    }\n  }, {\n    key: \"getPointOnCubicBezier\",\n    value: function getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n      var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n      var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"getPointOnQuadraticBezier\",\n    value: function getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n      var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n      var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"getPointOnEllipticalArc\",\n    value: function getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n      var cosPsi = Math.cos(psi);\n      var sinPsi = Math.sin(psi);\n      var pt = {\n        x: rx * Math.cos(theta),\n        y: ry * Math.sin(theta)\n      };\n      return {\n        x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n        y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n      };\n    } // TODO need some optimisations. possibly build cache only for curved segments?\n  }, {\n    key: \"buildEquidistantCache\",\n    value: function buildEquidistantCache(inputStep, inputPrecision) {\n      var fullLen = this.getPathLength();\n      var precision = inputPrecision || 0.25; // accuracy vs performance\n\n      var step = inputStep || fullLen / 100;\n      if (!this.equidistantCache || this.equidistantCache.step !== step || this.equidistantCache.precision !== precision) {\n        // Prepare cache\n        this.equidistantCache = {\n          step: step,\n          precision: precision,\n          points: []\n        }; // Calculate points\n\n        var s = 0;\n        for (var l = 0; l <= fullLen; l += precision) {\n          var p0 = this.getPointOnPath(l);\n          var p1 = this.getPointOnPath(l + precision);\n          if (!p0 || !p1) {\n            continue;\n          }\n          s += this.getLineLength(p0.x, p0.y, p1.x, p1.y);\n          if (s >= step) {\n            this.equidistantCache.points.push({\n              x: p0.x,\n              y: p0.y,\n              distance: l\n            });\n            s -= step;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"getEquidistantPointOnPath\",\n    value: function getEquidistantPointOnPath(targetDistance, step, precision) {\n      this.buildEquidistantCache(step, precision);\n      if (targetDistance < 0 || targetDistance - this.getPathLength() > 0.00005) {\n        return null;\n      }\n      var idx = Math.round(targetDistance / this.getPathLength() * (this.equidistantCache.points.length - 1));\n      return this.equidistantCache.points[idx] || null;\n    }\n  }]);\n  return TextPathElement;\n}(TextElement);\nfunction _createSuper$y(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$y()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$y() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar ImageElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(ImageElement, _RenderedElement);\n  var _super = _createSuper$y(ImageElement);\n  function ImageElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, ImageElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'image';\n    _this.loaded = false;\n    var href = _this.getHrefAttribute().getString();\n    if (!href) {\n      return _possibleConstructorReturn(_this);\n    }\n    var isSvg = /\\.svg$/.test(href);\n    document.images.push(_assertThisInitialized(_this));\n    if (!isSvg) {\n      _this.loadImage(href);\n    } else {\n      _this.loadSvg(href);\n    }\n    _this.isSvg = isSvg;\n    return _this;\n  }\n  _createClass(ImageElement, [{\n    key: \"loadImage\",\n    value: function () {\n      var _loadImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(href) {\n        var image;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.document.createImage(href);\n              case 3:\n                image = _context.sent;\n                this.image = image;\n                _context.next = 10;\n                break;\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                // tslint:disable-next-line: no-console\n                console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), _context.t0);\n              case 10:\n                this.loaded = true;\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 7]]);\n      }));\n      function loadImage(_x) {\n        return _loadImage.apply(this, arguments);\n      }\n      return loadImage;\n    }()\n  }, {\n    key: \"loadSvg\",\n    value: function () {\n      var _loadSvg = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(href) {\n        var response, svg;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.document.fetch(href);\n              case 3:\n                response = _context2.sent;\n                _context2.next = 6;\n                return response.text();\n              case 6:\n                svg = _context2.sent;\n                this.image = svg;\n                _context2.next = 13;\n                break;\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](0);\n                // tslint:disable-next-line: no-console\n                console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), _context2.t0);\n              case 13:\n                this.loaded = true;\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 10]]);\n      }));\n      function loadSvg(_x2) {\n        return _loadSvg.apply(this, arguments);\n      }\n      return loadSvg;\n    }()\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      var document = this.document,\n        image = this.image,\n        loaded = this.loaded;\n      var x = this.getAttribute('x').getPixels('x');\n      var y = this.getAttribute('y').getPixels('y');\n      var width = this.getStyle('width').getPixels('x');\n      var height = this.getStyle('height').getPixels('y');\n      if (!loaded || !image || !width || !height) {\n        return;\n      }\n      ctx.save();\n      if (this.isSvg) {\n        document.canvg.forkString(ctx, this.image, {\n          ignoreMouse: true,\n          ignoreAnimation: true,\n          ignoreDimensions: true,\n          ignoreClear: true,\n          offsetX: x,\n          offsetY: y,\n          scaleWidth: width,\n          scaleHeight: height\n        }).render();\n      } else {\n        var _image = this.image;\n        ctx.translate(x, y);\n        document.setViewBox({\n          ctx: ctx,\n          aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n          width: width,\n          desiredWidth: _image.width,\n          height: height,\n          desiredHeight: _image.height\n        });\n        if (this.loaded) {\n          if (typeof _image.complete === 'undefined' || _image.complete) {\n            ctx.drawImage(_image, 0, 0);\n          }\n        }\n      }\n      ctx.restore();\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox() {\n      var x = this.getAttribute('x').getPixels('x');\n      var y = this.getAttribute('y').getPixels('y');\n      var width = this.getStyle('width').getPixels('x');\n      var height = this.getStyle('height').getPixels('y');\n      return new BoundingBox(x, y, x + width, y + height);\n    }\n  }]);\n  return ImageElement;\n}(RenderedElement);\nfunction _createSuper$z(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$z()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$z() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar SymbolElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(SymbolElement, _RenderedElement);\n  var _super = _createSuper$z(SymbolElement);\n  function SymbolElement() {\n    var _this;\n    _classCallCheck(this, SymbolElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'symbol';\n    return _this;\n  }\n  _createClass(SymbolElement, [{\n    key: \"render\",\n    value: function render(_) {// NO RENDER\n    }\n  }]);\n  return SymbolElement;\n}(RenderedElement);\nvar SVGFontLoader = /*#__PURE__*/function () {\n  function SVGFontLoader(document) {\n    _classCallCheck(this, SVGFontLoader);\n    this.document = document;\n    this.loaded = false;\n    document.fonts.push(this);\n  }\n  _createClass(SVGFontLoader, [{\n    key: \"load\",\n    value: function () {\n      var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fontFamily, url) {\n        var document, svgDocument, fonts;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                document = this.document;\n                _context.next = 4;\n                return document.canvg.parser.load(url);\n              case 4:\n                svgDocument = _context.sent;\n                fonts = svgDocument.getElementsByTagName('font');\n                Array.from(fonts).forEach(function (fontNode) {\n                  var font = document.createElement(fontNode);\n                  document.definitions[fontFamily] = font;\n                });\n                _context.next = 12;\n                break;\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n                // tslint:disable-next-line: no-console\n                console.error(\"Error while loading font \\\"\".concat(url, \"\\\":\"), _context.t0);\n              case 12:\n                this.loaded = true;\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 9]]);\n      }));\n      function load(_x, _x2) {\n        return _load.apply(this, arguments);\n      }\n      return load;\n    }()\n  }]);\n  return SVGFontLoader;\n}();\nfunction _createSuper$A(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$A()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$A() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar StyleElement = /*#__PURE__*/function (_Element) {\n  _inherits(StyleElement, _Element);\n  var _super = _createSuper$A(StyleElement);\n  function StyleElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, StyleElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'style';\n    var css = compressSpaces(Array.from(node.childNodes).map(function (_) {\n      return _.data;\n    }).join('').replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*\\/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, '') // remove comments\n    .replace(/@import.*;/g, '') // remove imports\n    );\n\n    var cssDefs = css.split('}');\n    cssDefs.forEach(function (_) {\n      var def = _.trim();\n      if (!def) {\n        return;\n      }\n      var cssParts = def.split('{');\n      var cssClasses = cssParts[0].split(',');\n      var cssProps = cssParts[1].split(';');\n      cssClasses.forEach(function (_) {\n        var cssClass = _.trim();\n        if (!cssClass) {\n          return;\n        }\n        var props = document.styles[cssClass] || {};\n        cssProps.forEach(function (cssProp) {\n          var prop = cssProp.indexOf(':');\n          var name = cssProp.substr(0, prop).trim();\n          var value = cssProp.substr(prop + 1, cssProp.length - prop).trim();\n          if (name && value) {\n            props[name] = new Property(document, name, value);\n          }\n        });\n        document.styles[cssClass] = props;\n        document.stylesSpecificity[cssClass] = getSelectorSpecificity(cssClass);\n        if (cssClass === '@font-face') {\n          //  && !nodeEnv\n          var fontFamily = props['font-family'].getString().replace(/\"|'/g, '');\n          var srcs = props.src.getString().split(',');\n          srcs.forEach(function (src) {\n            if (src.indexOf('format(\"svg\")') > 0) {\n              var url = parseExternalUrl(src);\n              if (url) {\n                new SVGFontLoader(document).load(fontFamily, url);\n              }\n            }\n          });\n        }\n      });\n    });\n    return _this;\n  }\n  return StyleElement;\n}(Element);\nStyleElement.parseExternalUrl = parseExternalUrl;\nfunction _createSuper$B(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$B()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$B() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar UseElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(UseElement, _RenderedElement);\n  var _super = _createSuper$B(UseElement);\n  function UseElement() {\n    var _this;\n    _classCallCheck(this, UseElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'use';\n    return _this;\n  }\n  _createClass(UseElement, [{\n    key: \"setContext\",\n    value: function setContext(ctx) {\n      _get(_getPrototypeOf(UseElement.prototype), \"setContext\", this).call(this, ctx);\n      var xAttr = this.getAttribute('x');\n      var yAttr = this.getAttribute('y');\n      if (xAttr.hasValue()) {\n        ctx.translate(xAttr.getPixels('x'), 0);\n      }\n      if (yAttr.hasValue()) {\n        ctx.translate(0, yAttr.getPixels('y'));\n      }\n    }\n  }, {\n    key: \"path\",\n    value: function path(ctx) {\n      var element = this.element;\n      if (element) {\n        element.path(ctx);\n      }\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      var document = this.document,\n        element = this.element;\n      if (element) {\n        var tempSvg = element;\n        if (element.type === 'symbol') {\n          // render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)\n          tempSvg = new SVGElement(document, null);\n          tempSvg.attributes.viewBox = new Property(document, 'viewBox', element.getAttribute('viewBox').getString());\n          tempSvg.attributes.preserveAspectRatio = new Property(document, 'preserveAspectRatio', element.getAttribute('preserveAspectRatio').getString());\n          tempSvg.attributes.overflow = new Property(document, 'overflow', element.getAttribute('overflow').getString());\n          tempSvg.children = element.children;\n        }\n        if (tempSvg.type === 'svg') {\n          var widthStyle = this.getStyle('width', false, true);\n          var heightStyle = this.getStyle('height', false, true); // if symbol or svg, inherit width/height from me\n\n          if (widthStyle.hasValue()) {\n            tempSvg.attributes.width = new Property(document, 'width', widthStyle.getString());\n          }\n          if (heightStyle.hasValue()) {\n            tempSvg.attributes.height = new Property(document, 'height', heightStyle.getString());\n          }\n        }\n        var oldParent = tempSvg.parent;\n        tempSvg.parent = this;\n        tempSvg.render(ctx);\n        tempSvg.parent = oldParent;\n      }\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(ctx) {\n      var element = this.element;\n      if (element) {\n        return element.getBoundingBox(ctx);\n      }\n      return null;\n    }\n  }, {\n    key: \"elementTransform\",\n    value: function elementTransform() {\n      var document = this.document,\n        element = this.element;\n      return Transform.fromElement(document, element);\n    }\n  }, {\n    key: \"element\",\n    get: function get() {\n      if (!this._element) {\n        this._element = this.getHrefAttribute().getDefinition();\n      }\n      return this._element;\n    }\n  }]);\n  return UseElement;\n}(RenderedElement);\nfunction _createSuper$C(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$C()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$C() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction imGet(img, x, y, width, _, rgba) {\n  return img[y * width * 4 + x * 4 + rgba];\n}\nfunction imSet(img, x, y, width, _, rgba, val) {\n  img[y * width * 4 + x * 4 + rgba] = val;\n}\nfunction m(matrix, i, v) {\n  var mi = matrix[i];\n  return mi * (mi < 0 ? v - 255 : v);\n}\nfunction c(a, m1, m2, m3) {\n  return m1 + Math.cos(a) * m2 + Math.sin(a) * m3;\n}\nvar FeColorMatrixElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeColorMatrixElement, _Element);\n  var _super = _createSuper$C(FeColorMatrixElement);\n  function FeColorMatrixElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, FeColorMatrixElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'feColorMatrix';\n    var matrix = toNumbers(_this.getAttribute('values').getString());\n    switch (_this.getAttribute('type').getString('matrix')) {\n      // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement\n      case 'saturate':\n        {\n          var s = matrix[0];\n          matrix = [0.213 + 0.787 * s, 0.715 - 0.715 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 + 0.285 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 - 0.715 * s, 0.072 + 0.928 * s, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          break;\n        }\n      case 'hueRotate':\n        {\n          var a = matrix[0] * Math.PI / 180.0;\n          matrix = [c(a, 0.213, 0.787, -0.213), c(a, 0.715, -0.715, -0.715), c(a, 0.072, -0.072, 0.928), 0, 0, c(a, 0.213, -0.213, 0.143), c(a, 0.715, 0.285, 0.140), c(a, 0.072, -0.072, -0.283), 0, 0, c(a, 0.213, -0.213, -0.787), c(a, 0.715, -0.715, 0.715), c(a, 0.072, 0.928, 0.072), 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          break;\n        }\n      case 'luminanceToAlpha':\n        matrix = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2125, 0.7154, 0.0721, 0, 0, 0, 0, 0, 0, 1];\n        break;\n    }\n    _this.matrix = matrix;\n    _this.includeOpacity = _this.getAttribute('includeOpacity').hasValue();\n    return _this;\n  }\n  _createClass(FeColorMatrixElement, [{\n    key: \"apply\",\n    value: function apply(ctx, _, __, width, height) {\n      // assuming x==0 && y==0 for now\n      var includeOpacity = this.includeOpacity,\n        matrix = this.matrix;\n      var srcData = ctx.getImageData(0, 0, width, height);\n      for (var y = 0; y < height; y++) {\n        for (var x = 0; x < width; x++) {\n          var r = imGet(srcData.data, x, y, width, height, 0);\n          var g = imGet(srcData.data, x, y, width, height, 1);\n          var b = imGet(srcData.data, x, y, width, height, 2);\n          var a = imGet(srcData.data, x, y, width, height, 3);\n          var nr = m(matrix, 0, r) + m(matrix, 1, g) + m(matrix, 2, b) + m(matrix, 3, a) + m(matrix, 4, 1);\n          var ng = m(matrix, 5, r) + m(matrix, 6, g) + m(matrix, 7, b) + m(matrix, 8, a) + m(matrix, 9, 1);\n          var nb = m(matrix, 10, r) + m(matrix, 11, g) + m(matrix, 12, b) + m(matrix, 13, a) + m(matrix, 14, 1);\n          var na = m(matrix, 15, r) + m(matrix, 16, g) + m(matrix, 17, b) + m(matrix, 18, a) + m(matrix, 19, 1);\n          if (includeOpacity) {\n            nr = ng = nb = 0;\n            na *= a / 255;\n          }\n          imSet(srcData.data, x, y, width, height, 0, nr);\n          imSet(srcData.data, x, y, width, height, 1, ng);\n          imSet(srcData.data, x, y, width, height, 2, nb);\n          imSet(srcData.data, x, y, width, height, 3, na);\n        }\n      }\n      ctx.clearRect(0, 0, width, height);\n      ctx.putImageData(srcData, 0, 0);\n    }\n  }]);\n  return FeColorMatrixElement;\n}(Element);\nfunction _createSuper$D(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$D()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$D() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar MaskElement = /*#__PURE__*/function (_Element) {\n  _inherits(MaskElement, _Element);\n  var _super = _createSuper$D(MaskElement);\n  function MaskElement() {\n    var _this;\n    _classCallCheck(this, MaskElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'mask';\n    return _this;\n  }\n  _createClass(MaskElement, [{\n    key: \"apply\",\n    value: function apply(ctx, element) {\n      var document = this.document; // render as temp svg\n\n      var x = this.getAttribute('x').getPixels('x');\n      var y = this.getAttribute('y').getPixels('y');\n      var width = this.getStyle('width').getPixels('x');\n      var height = this.getStyle('height').getPixels('y');\n      if (!width && !height) {\n        var boundingBox = new BoundingBox();\n        this.children.forEach(function (child) {\n          boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n        });\n        x = Math.floor(boundingBox.x1);\n        y = Math.floor(boundingBox.y1);\n        width = Math.floor(boundingBox.width);\n        height = Math.floor(boundingBox.height);\n      }\n      var ignoredStyles = this.removeStyles(element, MaskElement.ignoreStyles);\n      var maskCanvas = document.createCanvas(x + width, y + height);\n      var maskCtx = maskCanvas.getContext('2d');\n      document.screen.setDefaults(maskCtx);\n      this.renderChildren(maskCtx); // convert mask to alpha with a fake node\n      // TODO: refactor out apply from feColorMatrix\n\n      new FeColorMatrixElement(document, {\n        nodeType: 1,\n        childNodes: [],\n        attributes: [{\n          nodeName: 'type',\n          value: 'luminanceToAlpha'\n        }, {\n          nodeName: 'includeOpacity',\n          value: 'true'\n        }]\n      }).apply(maskCtx, 0, 0, x + width, y + height);\n      var tmpCanvas = document.createCanvas(x + width, y + height);\n      var tmpCtx = tmpCanvas.getContext('2d');\n      document.screen.setDefaults(tmpCtx);\n      element.render(tmpCtx);\n      tmpCtx.globalCompositeOperation = 'destination-in';\n      tmpCtx.fillStyle = maskCtx.createPattern(maskCanvas, 'no-repeat');\n      tmpCtx.fillRect(0, 0, x + width, y + height);\n      ctx.fillStyle = tmpCtx.createPattern(tmpCanvas, 'no-repeat');\n      ctx.fillRect(0, 0, x + width, y + height); // reassign mask\n\n      this.restoreStyles(element, ignoredStyles);\n    }\n  }, {\n    key: \"render\",\n    value: function render(_) {// NO RENDER\n    }\n  }]);\n  return MaskElement;\n}(Element);\nMaskElement.ignoreStyles = ['mask', 'transform', 'clip-path'];\nfunction _createSuper$E(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$E()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$E() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar noop = function noop() {};\nvar ClipPathElement = /*#__PURE__*/function (_Element) {\n  _inherits(ClipPathElement, _Element);\n  var _super = _createSuper$E(ClipPathElement);\n  function ClipPathElement() {\n    var _this;\n    _classCallCheck(this, ClipPathElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'clipPath';\n    return _this;\n  }\n  _createClass(ClipPathElement, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var document = this.document;\n      var contextProto = Reflect.getPrototypeOf(ctx);\n      var beginPath = ctx.beginPath,\n        closePath = ctx.closePath;\n      if (contextProto) {\n        contextProto.beginPath = noop;\n        contextProto.closePath = noop;\n      }\n      Reflect.apply(beginPath, ctx, []);\n      this.children.forEach(function (child) {\n        if (typeof child.path === 'undefined') {\n          return;\n        }\n        var transform = typeof child.elementTransform !== 'undefined' ? child.elementTransform() : null; // handle <use />\n\n        if (!transform) {\n          transform = Transform.fromElement(document, child);\n        }\n        if (transform) {\n          transform.apply(ctx);\n        }\n        child.path(ctx);\n        if (contextProto) {\n          contextProto.closePath = closePath;\n        }\n        if (transform) {\n          transform.unapply(ctx);\n        }\n      });\n      Reflect.apply(closePath, ctx, []);\n      ctx.clip();\n      if (contextProto) {\n        contextProto.beginPath = beginPath;\n        contextProto.closePath = closePath;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render(_) {// NO RENDER\n    }\n  }]);\n  return ClipPathElement;\n}(Element);\nfunction _createSuper$F(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$F()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$F() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar FilterElement = /*#__PURE__*/function (_Element) {\n  _inherits(FilterElement, _Element);\n  var _super = _createSuper$F(FilterElement);\n  function FilterElement() {\n    var _this;\n    _classCallCheck(this, FilterElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'filter';\n    return _this;\n  }\n  _createClass(FilterElement, [{\n    key: \"apply\",\n    value: function apply(ctx, element) {\n      // render as temp svg\n      var document = this.document,\n        children = this.children;\n      var boundingBox = element.getBoundingBox(ctx);\n      if (!boundingBox) {\n        return;\n      }\n      var px = 0;\n      var py = 0;\n      children.forEach(function (child) {\n        var efd = child.extraFilterDistance || 0;\n        px = Math.max(px, efd);\n        py = Math.max(py, efd);\n      });\n      var width = Math.floor(boundingBox.width);\n      var height = Math.floor(boundingBox.height);\n      var tmpCanvasWidth = width + 2 * px;\n      var tmpCanvasHeight = height + 2 * py;\n      if (tmpCanvasWidth < 1 || tmpCanvasHeight < 1) {\n        return;\n      }\n      var x = Math.floor(boundingBox.x);\n      var y = Math.floor(boundingBox.y);\n      var ignoredStyles = this.removeStyles(element, FilterElement.ignoreStyles);\n      var tmpCanvas = document.createCanvas(tmpCanvasWidth, tmpCanvasHeight);\n      var tmpCtx = tmpCanvas.getContext('2d');\n      document.screen.setDefaults(tmpCtx);\n      tmpCtx.translate(-x + px, -y + py);\n      element.render(tmpCtx); // apply filters\n\n      children.forEach(function (child) {\n        if (typeof child.apply === 'function') {\n          child.apply(tmpCtx, 0, 0, tmpCanvasWidth, tmpCanvasHeight);\n        }\n      }); // render on me\n\n      ctx.drawImage(tmpCanvas, 0, 0, tmpCanvasWidth, tmpCanvasHeight, x - px, y - py, tmpCanvasWidth, tmpCanvasHeight);\n      this.restoreStyles(element, ignoredStyles);\n    }\n  }, {\n    key: \"render\",\n    value: function render(_) {// NO RENDER\n    }\n  }]);\n  return FilterElement;\n}(Element);\nFilterElement.ignoreStyles = ['filter', 'transform', 'clip-path'];\nfunction _createSuper$G(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$G()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$G() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar FeDropShadowElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeDropShadowElement, _Element);\n  var _super = _createSuper$G(FeDropShadowElement);\n  function FeDropShadowElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, FeDropShadowElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'feDropShadow';\n    _this.addStylesFromStyleDefinition();\n    return _this;\n  }\n  _createClass(FeDropShadowElement, [{\n    key: \"apply\",\n    value: function apply(_, __, ___, ____, _____) {// TODO: implement\n    }\n  }]);\n  return FeDropShadowElement;\n}(Element);\nfunction _createSuper$H(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$H()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$H() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar FeMorphologyElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeMorphologyElement, _Element);\n  var _super = _createSuper$H(FeMorphologyElement);\n  function FeMorphologyElement() {\n    var _this;\n    _classCallCheck(this, FeMorphologyElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'feMorphology';\n    return _this;\n  }\n  _createClass(FeMorphologyElement, [{\n    key: \"apply\",\n    value: function apply(_, __, ___, ____, _____) {// TODO: implement\n    }\n  }]);\n  return FeMorphologyElement;\n}(Element);\nfunction _createSuper$I(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$I()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$I() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar FeCompositeElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeCompositeElement, _Element);\n  var _super = _createSuper$I(FeCompositeElement);\n  function FeCompositeElement() {\n    var _this;\n    _classCallCheck(this, FeCompositeElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'feComposite';\n    return _this;\n  }\n  _createClass(FeCompositeElement, [{\n    key: \"apply\",\n    value: function apply(_, __, ___, ____, _____) {// TODO: implement\n    }\n  }]);\n  return FeCompositeElement;\n}(Element);\nfunction _createSuper$J(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$J()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$J() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar FeGaussianBlurElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeGaussianBlurElement, _Element);\n  var _super = _createSuper$J(FeGaussianBlurElement);\n  function FeGaussianBlurElement(document, node, captureTextNodes) {\n    var _this;\n    _classCallCheck(this, FeGaussianBlurElement);\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'feGaussianBlur';\n    _this.blurRadius = Math.floor(_this.getAttribute('stdDeviation').getNumber());\n    _this.extraFilterDistance = _this.blurRadius;\n    return _this;\n  }\n  _createClass(FeGaussianBlurElement, [{\n    key: \"apply\",\n    value: function apply(ctx, x, y, width, height) {\n      var document = this.document,\n        blurRadius = this.blurRadius;\n      var body = document.window ? document.window.document.body : null;\n      var canvas = ctx.canvas; // StackBlur requires canvas be on document\n\n      canvas.id = document.getUniqueId();\n      if (body) {\n        canvas.style.display = 'none';\n        body.appendChild(canvas);\n      }\n      canvasRGBA(canvas, x, y, width, height, blurRadius);\n      if (body) {\n        body.removeChild(canvas);\n      }\n    }\n  }]);\n  return FeGaussianBlurElement;\n}(Element);\nfunction _createSuper$K(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$K()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$K() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar TitleElement = /*#__PURE__*/function (_Element) {\n  _inherits(TitleElement, _Element);\n  var _super = _createSuper$K(TitleElement);\n  function TitleElement() {\n    var _this;\n    _classCallCheck(this, TitleElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'title';\n    return _this;\n  }\n  return TitleElement;\n}(Element);\nfunction _createSuper$L(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (_isNativeReflectConstruct$L()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$L() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar DescElement = /*#__PURE__*/function (_Element) {\n  _inherits(DescElement, _Element);\n  var _super = _createSuper$L(DescElement);\n  function DescElement() {\n    var _this;\n    _classCallCheck(this, DescElement);\n    _this = _super.apply(this, arguments);\n    _this.type = 'desc';\n    return _this;\n  }\n  return DescElement;\n}(Element);\nvar elementTypes = {\n  'svg': SVGElement,\n  'rect': RectElement,\n  'circle': CircleElement,\n  'ellipse': EllipseElement,\n  'line': LineElement,\n  'polyline': PolylineElement,\n  'polygon': PolygonElement,\n  'path': PathElement,\n  'pattern': PatternElement,\n  'marker': MarkerElement,\n  'defs': DefsElement,\n  'linearGradient': LinearGradientElement,\n  'radialGradient': RadialGradientElement,\n  'stop': StopElement,\n  'animate': AnimateElement,\n  'animateColor': AnimateColorElement,\n  'animateTransform': AnimateTransformElement,\n  'font': FontElement,\n  'font-face': FontFaceElement,\n  'missing-glyph': MissingGlyphElement,\n  'glyph': GlyphElement,\n  'text': TextElement,\n  'tspan': TSpanElement,\n  'tref': TRefElement,\n  'a': AElement,\n  'textPath': TextPathElement,\n  'image': ImageElement,\n  'g': GElement,\n  'symbol': SymbolElement,\n  'style': StyleElement,\n  'use': UseElement,\n  'mask': MaskElement,\n  'clipPath': ClipPathElement,\n  'filter': FilterElement,\n  'feDropShadow': FeDropShadowElement,\n  'feMorphology': FeMorphologyElement,\n  'feComposite': FeCompositeElement,\n  'feColorMatrix': FeColorMatrixElement,\n  'feGaussianBlur': FeGaussianBlurElement,\n  'title': TitleElement,\n  'desc': DescElement\n};\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction createCanvas(width, height) {\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\nfunction createImage(_x) {\n  return _createImage.apply(this, arguments);\n}\nfunction _createImage() {\n  _createImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(src) {\n    var anonymousCrossOrigin,\n      image,\n      _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            anonymousCrossOrigin = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;\n            image = document.createElement('img');\n            if (anonymousCrossOrigin) {\n              image.crossOrigin = 'Anonymous';\n            }\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              image.onload = function () {\n                resolve(image);\n              };\n              image.onerror = function () {\n                reject();\n              };\n              image.src = src;\n            }));\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _createImage.apply(this, arguments);\n}\nvar Document = /*#__PURE__*/function () {\n  function Document(canvg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$rootEmSize = _ref.rootEmSize,\n      rootEmSize = _ref$rootEmSize === void 0 ? 12 : _ref$rootEmSize,\n      _ref$emSize = _ref.emSize,\n      emSize = _ref$emSize === void 0 ? 12 : _ref$emSize,\n      _ref$createCanvas = _ref.createCanvas,\n      createCanvas = _ref$createCanvas === void 0 ? Document.createCanvas : _ref$createCanvas,\n      _ref$createImage = _ref.createImage,\n      createImage = _ref$createImage === void 0 ? Document.createImage : _ref$createImage,\n      anonymousCrossOrigin = _ref.anonymousCrossOrigin;\n    _classCallCheck(this, Document);\n    this.canvg = canvg;\n    this.definitions = {};\n    this.styles = {};\n    this.stylesSpecificity = {};\n    this.images = [];\n    this.fonts = [];\n    this.emSizeStack = [];\n    this.uniqueId = 0;\n    this.screen = canvg.screen;\n    this.rootEmSize = rootEmSize;\n    this.emSize = emSize;\n    this.createCanvas = createCanvas;\n    this.createImage = this.bindCreateImage(createImage, anonymousCrossOrigin);\n    this.screen.wait(this.isImagesLoaded.bind(this));\n    this.screen.wait(this.isFontsLoaded.bind(this));\n  }\n  _createClass(Document, [{\n    key: \"bindCreateImage\",\n    value: function bindCreateImage(createImage, anonymousCrossOrigin) {\n      if (typeof anonymousCrossOrigin === 'boolean') {\n        return function (source, forceAnonymousCrossOrigin) {\n          return createImage(source, typeof forceAnonymousCrossOrigin === 'boolean' ? forceAnonymousCrossOrigin : anonymousCrossOrigin);\n        };\n      }\n      return createImage;\n    }\n  }, {\n    key: \"popEmSize\",\n    value: function popEmSize() {\n      var emSizeStack = this.emSizeStack;\n      emSizeStack.pop();\n    }\n  }, {\n    key: \"getUniqueId\",\n    value: function getUniqueId() {\n      return \"canvg\".concat(++this.uniqueId);\n    }\n  }, {\n    key: \"isImagesLoaded\",\n    value: function isImagesLoaded() {\n      return this.images.every(function (_) {\n        return _.loaded;\n      });\n    }\n  }, {\n    key: \"isFontsLoaded\",\n    value: function isFontsLoaded() {\n      return this.fonts.every(function (_) {\n        return _.loaded;\n      });\n    }\n  }, {\n    key: \"createDocumentElement\",\n    value: function createDocumentElement(document) {\n      var documentElement = this.createElement(document.documentElement);\n      documentElement.root = true;\n      documentElement.addStylesFromStyleDefinition();\n      this.documentElement = documentElement;\n      return documentElement;\n    }\n  }, {\n    key: \"createElement\",\n    value: function createElement(node) {\n      var elementType = node.nodeName.replace(/^[^:]+:/, '');\n      var ElementType = Document.elementTypes[elementType];\n      if (typeof ElementType !== 'undefined') {\n        return new ElementType(this, node);\n      }\n      return new UnknownElement(this, node);\n    }\n  }, {\n    key: \"createTextNode\",\n    value: function createTextNode(node) {\n      return new TextNode(this, node);\n    }\n  }, {\n    key: \"setViewBox\",\n    value: function setViewBox(config) {\n      this.screen.setViewBox(_objectSpread({\n        document: this\n      }, config));\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.screen.window;\n    }\n  }, {\n    key: \"fetch\",\n    get: function get() {\n      return this.screen.fetch;\n    }\n  }, {\n    key: \"ctx\",\n    get: function get() {\n      return this.screen.ctx;\n    }\n  }, {\n    key: \"emSize\",\n    get: function get() {\n      var emSizeStack = this.emSizeStack;\n      return emSizeStack[emSizeStack.length - 1];\n    },\n    set: function set(value) {\n      var emSizeStack = this.emSizeStack;\n      emSizeStack.push(value);\n    }\n  }]);\n  return Document;\n}();\nDocument.createCanvas = createCanvas;\nDocument.createImage = createImage;\nDocument.elementTypes = elementTypes;\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\n/**\n * SVG renderer on canvas.\n */\n\nvar Canvg = /*#__PURE__*/function () {\n  /**\n   * Main constructor.\n   * @param ctx - Rendering context.\n   * @param svg - SVG Document.\n   * @param options - Rendering options.\n   */\n  function Canvg(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, Canvg);\n    this.parser = new Parser(options);\n    this.screen = new Screen(ctx, options);\n    this.options = options;\n    var document = new Document(this, options);\n    var documentElement = document.createDocumentElement(svg);\n    this.document = document;\n    this.documentElement = documentElement;\n  }\n  /**\n   * Create Canvg isntance from SVG source string or URL.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string or URL.\n   * @param options - Rendering options.\n   */\n\n  _createClass(Canvg, [{\n    key: \"fork\",\n    /**\n     * Create new Canvg instance with inherited options.\n     * @param ctx - Rendering context.\n     * @param svg - SVG source string or URL.\n     * @param options - Rendering options.\n     */\n    value: function fork(ctx, svg) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return Canvg.from(ctx, svg, _objectSpread$1({}, this.options, {}, options));\n    }\n    /**\n     * Create new Canvg instance with inherited options.\n     * @param ctx - Rendering context.\n     * @param svg - SVG source string.\n     * @param options - Rendering options.\n     */\n  }, {\n    key: \"forkString\",\n    value: function forkString(ctx, svg) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return Canvg.fromString(ctx, svg, _objectSpread$1({}, this.options, {}, options));\n    }\n    /**\n     * Document is ready promise.\n     */\n  }, {\n    key: \"ready\",\n    value: function ready() {\n      return this.screen.ready();\n    }\n    /**\n     * Document is ready value.\n     */\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      return this.screen.isReady();\n    }\n    /**\n     * Render only first frame, ignoring animations and mouse.\n     * @param options - Rendering options.\n     */\n  }, {\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var options,\n          _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                this.start(_objectSpread$1({\n                  enableRedraw: true,\n                  ignoreAnimation: true,\n                  ignoreMouse: true\n                }, options));\n                _context.next = 4;\n                return this.ready();\n              case 4:\n                this.stop();\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function render() {\n        return _render.apply(this, arguments);\n      }\n      return render;\n    }()\n    /**\n     * Start rendering.\n     * @param options - Render options.\n     */\n  }, {\n    key: \"start\",\n    value: function start() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var documentElement = this.documentElement,\n        screen = this.screen,\n        baseOptions = this.options;\n      screen.start(documentElement, _objectSpread$1({\n        enableRedraw: true\n      }, baseOptions, {}, options));\n    }\n    /**\n     * Stop rendering.\n     */\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.screen.stop();\n    }\n    /**\n     * Resize SVG to fit in given size.\n     * @param width\n     * @param height\n     * @param preserveAspectRatio\n     */\n  }, {\n    key: \"resize\",\n    value: function resize(width) {\n      var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n      var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this.documentElement.resize(width, height, preserveAspectRatio);\n    }\n  }], [{\n    key: \"from\",\n    value: function () {\n      var _from = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ctx, svg) {\n        var options,\n          parser,\n          svgDocument,\n          _args2 = arguments;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n                parser = new Parser(options);\n                _context2.next = 4;\n                return parser.parse(svg);\n              case 4:\n                svgDocument = _context2.sent;\n                return _context2.abrupt(\"return\", new Canvg(ctx, svgDocument, options));\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      function from(_x, _x2) {\n        return _from.apply(this, arguments);\n      }\n      return from;\n    }()\n    /**\n     * Create Canvg isntance from SVG source string.\n     * @param ctx - Rendering context.\n     * @param svg - SVG source string.\n     * @param options - Rendering options.\n     */\n  }, {\n    key: \"fromString\",\n    value: function fromString(ctx, svg) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var parser = new Parser(options);\n      var svgDocument = parser.parseFromString(svg);\n      return new Canvg(ctx, svgDocument, options);\n    }\n  }]);\n  return Canvg;\n}();\n\n/**\n * Options preset for `OffscreenCanvas`.\n * @param config - Preset requirements.\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\n */\nfunction offscreen() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    DOMParserFallback = _ref.DOMParser;\n  var preset = {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser: DOMParserFallback,\n    createCanvas: function createCanvas(width, height) {\n      return new OffscreenCanvas(width, height);\n    },\n    createImage: function createImage(url) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response, blob, img;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(url);\n              case 2:\n                response = _context.sent;\n                _context.next = 5;\n                return response.blob();\n              case 5:\n                blob = _context.sent;\n                _context.next = 8;\n                return createImageBitmap(blob);\n              case 8:\n                img = _context.sent;\n                return _context.abrupt(\"return\", img);\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  };\n  if (typeof DOMParser !== 'undefined' || typeof DOMParserFallback === 'undefined') {\n    Reflect.deleteProperty(preset, 'DOMParser');\n  }\n  return preset;\n}\n\n/**\n * Options preset for `node-canvas`.\n * @param config - Preset requirements.\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\n * @param config.canvas - `node-canvas` exports.\n * @param config.fetch - WHATWG-compatible `fetch` function.\n */\nfunction node(_ref) {\n  var DOMParser = _ref.DOMParser,\n    canvas = _ref.canvas,\n    fetch = _ref.fetch;\n  return {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser: DOMParser,\n    fetch: fetch,\n    createCanvas: canvas.createCanvas,\n    createImage: canvas.loadImage\n  };\n}\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  offscreen: offscreen,\n  node: node\n});\nexport default Canvg;\nexport { AElement, AnimateColorElement, AnimateElement, AnimateTransformElement, BoundingBox, CB1, CB2, CB3, CB4, Canvg, CircleElement, ClipPathElement, DefsElement, DescElement, Document, Element, EllipseElement, FeColorMatrixElement, FeCompositeElement, FeDropShadowElement, FeGaussianBlurElement, FeMorphologyElement, FilterElement, Font, FontElement, FontFaceElement, GElement, GlyphElement, GradientElement, ImageElement, LineElement, LinearGradientElement, MarkerElement, MaskElement, Matrix, MissingGlyphElement, Mouse, PSEUDO_ZERO, Parser, PathElement, PathParser, PatternElement, Point, PolygonElement, PolylineElement, Property, QB1, QB2, QB3, RadialGradientElement, RectElement, RenderedElement, Rotate, SVGElement, SVGFontLoader, Scale, Screen, Skew, SkewX, SkewY, StopElement, StyleElement, SymbolElement, TRefElement, TSpanElement, TextElement, TextPathElement, TitleElement, Transform, Translate, UnknownElement, UseElement, ViewPort, compressSpaces, getSelectorSpecificity, normalizeAttributeName, normalizeColor, parseExternalUrl, index as presets, toNumbers, trimLeft, trimRight, vectorMagnitude, vectorsAngle, vectorsRatio };","map":{"version":3,"names":["_slicedToArray","_regeneratorRuntime","_asyncToGenerator","_defineProperty","_classCallCheck","_createClass","requestAnimationFrame","RGBColor","_possibleConstructorReturn","_getPrototypeOf","_inherits","_toConsumableArray","_get","_assertThisInitialized","canvasRGBA","compressSpaces","str","replace","trimLeft","trimRight","toNumbers","matches","match","map","parseFloat","allUppercase","normalizeAttributeName","name","test","toLowerCase","parseExternalUrl","url","urlMatch","normalizeColor","color","startsWith","rgbParts","normalizedColor","num","isFloat","String","Math","round","attributeRegex","idRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","findSelectorMatch","selector","regex","length","getSelectorSpecificity","specificity","currentSelector","delta","_findSelectorMatch","_findSelectorMatch2","_findSelectorMatch3","_findSelectorMatch4","_findSelectorMatch5","_findSelectorMatch6","_findSelectorMatch7","_findSelectorMatch8","_findSelectorMatch9","_findSelectorMatch10","_findSelectorMatch11","_findSelectorMatch12","_findSelectorMatch13","_findSelectorMatch14","join","PSEUDO_ZERO","vectorMagnitude","v","sqrt","pow","vectorsRatio","u","vectorsAngle","acos","CB1","t","CB2","CB3","CB4","QB1","QB2","QB3","createCommonjsModule","fn","module","exports","runtime_1","runtime","Op","Object","prototype","hasOwn","hasOwnProperty","undefined$1","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","obj","arg","type","call","err","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","value","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","key","reverse","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","Property","document","isNormalizedColor","hasValue","isString","regexp","isUrlDefinition","isPixels","asString","getString","setValue","getValue","def","getNumber","n","getColor","getDpi","getRem","rootEmSize","getEm","emSize","getUnits","getPixels","axisOrIsFontSize","processPercent","arguments","undefined","_ref","_ref2","axis","isFontSize","viewPort","screen","min","computeSize","max","getMilliseconds","getRadians","PI","getDefinition","definitions","getFillStyleDefinition","element","opacity","createGradient","ctx","createPattern","getHrefAttribute","patternTransform","getAttribute","getTextBaseline","textBaselineMapping","addOpacity","len","commas","ok","alpha","toRGBA","empty","ViewPort","viewPorts","clear","setCurrent","width","height","removeCurrent","getCurrent","d","get","Point","x","y","angleTo","point","atan2","applyTransform","transform","xp","yp","parse","defaultValue","_toNumbers","_toNumbers2","_toNumbers2$","_toNumbers2$2","parseScale","scale","_toNumbers3","_toNumbers4","_toNumbers4$","_toNumbers4$2","parsePath","path","points","pathPoints","Mouse","working","events","eventElements","onClick","bind","onMouseMove","isWorking","start","canvas","onclick","onmousemove","hasEvents","runEvents","style","cursor","run","parent","checkPath","isPointInPath","checkBoundingBox","boundingBox","_ref3","isPointInBox","mapXY","_this$screen","window","offsetLeft","offsetTop","offsetParent","scrollX","scrollY","evt","_this$mapXY","event","clientX","clientY","_this$mapXY2","defaultWindow","defaultFetch","fetch","Screen","_ref$fetch","_ref$window","FRAMERATE","MAX_VIRTUAL_PIXELS","CLIENT_WIDTH","CLIENT_HEIGHT","mouse","animations","waits","frameDuration","isReadyLock","isFirstRender","intervalId","wait","checker","ready","readyPromise","isReady","every","_","resolveReady","setDefaults","strokeStyle","lineCap","lineJoin","miterLimit","setViewBox","aspectRatio","desiredWidth","desiredHeight","_ref2$minX","minX","_ref2$minY","minY","refX","refY","_ref2$clip","clip","_ref2$clipX","clipX","_ref2$clipY","clipY","cleanAspectRatio","_cleanAspectRatio$spl","split","_cleanAspectRatio$spl2","aspectRatioAlign","aspectRatioMeetOrSlice","align","meetOrSlice","scaleX","scaleY","scaleMin","scaleMax","finalDesiredWidth","finalDesiredHeight","refXProp","refYProp","hasRefs","translate","scaledClipX","scaledClipY","beginPath","moveTo","lineTo","closePath","isMeetMinY","isSliceMaxY","isMeetMinX","isSliceMaxX","_this","_ref3$enableRedraw","enableRedraw","_ref3$ignoreMouse","ignoreMouse","_ref3$ignoreAnimation","ignoreAnimation","_ref3$ignoreDimension","ignoreDimensions","_ref3$ignoreClear","ignoreClear","forceRedraw","scaleWidth","scaleHeight","offsetX","offsetY","render","now","Date","tick","shouldUpdate","cancel","reduce","animation","update","widthStyle","getStyle","heightStyle","concat","cWidth","clientWidth","cHeight","clientHeight","viewBox","xRatio","yRatio","_widthStyle","_heightStyle","transformStyle","clearRect","defaultFetch$1","DefaultDOMParser","DOMParser","Parser","_ref$DOMParser","_parse","_callee","resource","_callee$","_context","parseFromString","load","_x","apply","xml","parser","checkDocument","parserError","getElementsByTagName","textContent","_load","_callee2","response","_callee2$","_context2","text","_x2","Translate","_this$point","unapply","_this$point2","applyToPoint","_this$point3","Rotate","rotate","transformOrigin","angle","cx","cy","numbers","rad","cos","sin","Scale","scaleSize","_this$scale","_this$scale2","_this$scale3","Matrix","matrix","a","b","c","e","f","g","h","det","_createSuper","Derived","Super","_isNativeReflectConstruct","NewTarget","Reflect","construct","sham","Proxy","Skew","_Matrix","_super","skew","_createSuper$1","_isNativeReflectConstruct$1","SkewX","_Skew","tan","_createSuper$2","_isNativeReflectConstruct$2","SkewY","parseTransforms","trim","parseTransform","_transform$split","_transform$split2","Transform","transforms","data","originCoords","_parseTransform","_parseTransform2","TransformType","transformTypes","fromElement","transformOriginStyle","skewX","skewY","Element","node","captureTextNodes","attributes","styles","stylesSpecificity","animationFrozen","animationFrozenValue","children","nodeType","Array","from","attribute","nodeName","addStylesFromStyleDefinition","_style$split$map","_style$split$map2","id","childNodes","childNode","addChild","textNode","createTextNode","getText","createIfNotExists","attr","_attr","skipAncestors","parentStyle","_style","save","mask","applyEffects","filter","setContext","renderChildren","clearContext","restore","clipPathStyleProp","child","createElement","ignoreChildTypes","includes","matchesSelector","styleClasses","some","styleClass","_this$document","existingSpecificity","removeStyles","ignoreStyles","toRestore","styleProp","restoreStyles","_createSuper$3","_isNativeReflectConstruct$3","UnknownElement","_Element","wrapFontFamily","fontFamily","trimmed","prepareFontFamily","process","prepareFontStyle","fontStyle","targetFontStyle","prepareFontWeight","fontWeight","targetFontWeight","Font","fontVariant","fontSize","inherit","inheritFont","font","parts","set","part","variants","weights","_part$split","_part$split2","BoundingBox","x1","Number","NaN","y1","x2","y2","addPoint","addX","addY","addBoundingBox","sumCubic","p0","p1","p2","p3","bezierCurveAdd","forX","b2ac","t1","t2","addBezierCurve","p0x","p0y","p1x","p1y","p2x","p2y","p3x","p3y","addQuadraticCurve","cp1x","cp1y","cp2x","cp2y","_createSuper$4","_isNativeReflectConstruct$4","RenderedElement","modifiedEmSizeStack","calculateOpacity","opacityStyle","fromMeasure","fillStyleProp","fillOpacityStyleProp","strokeStyleProp","strokeOpacityProp","fillStyle","_fillStyle","_fillStyle2","_strokeStyle","_strokeStyle2","strokeWidthStyleProp","newLineWidth","lineWidth","strokeLinecapStyleProp","strokeLinejoinStyleProp","strokeMiterlimitProp","pointOrderStyleProp","strokeDasharrayStyleProp","strokeDashoffsetProp","paintOrder","gaps","setLineDash","webkitLineDash","mozDash","offset","lineDashOffset","webkitLineDashOffset","mozDashOffset","fontStyleProp","fontStyleStyleProp","fontVariantStyleProp","fontWeightStyleProp","fontSizeStyleProp","fontFamilyStyleProp","globalAlpha","popEmSize","_createSuper$5","_isNativeReflectConstruct$5","TextElement","_RenderedElement","measureCache","textBaseline","initializeCoordinates","dxAttr","dyAttr","getAnchorDelta","getBoundingBox","_this2","getTElementBoundingBox","childBoundingBox","getChildBoundingBox","getFontSize","inheritFontSize","measureText","getGlyph","char","glyph","isArabic","prevChar","nextChar","arabicForm","glyphs","missingGlyph","getTextFromNode","parentNode","index","indexOf","lastIndex","_this3","renderTElementChildren","renderChild","renderText","customFont","unitsPerEm","fontFace","ctxFont","isRTL","dx","lw","horizAdvX","strokeText","fillText","startI","textAnchor","measureTextRecursive","adjustChildCoordinates","textParent","xAttr","yAttr","_width","measure","measureTargetText","targetText","_measure","_ctx$measureText","_createSuper$6","_isNativeReflectConstruct$6","TSpanElement","_TextElement","_createSuper$7","_isNativeReflectConstruct$7","TextNode","_TSpanElement","preparePath","PathParser","control","current","command","tokens","previousCommand","angles","isEnd","isCommandOrEnd","isRelativeCommand","getToken","getScalar","nextCommand","getPoint","makeAbsolute","getAsControlPoint","getAsCurrentPoint","getReflectedControlPoint","_this$current","_this$control","ox","oy","_this$current2","addMarker","priorTo","addMarkerAngle","getMarkerPoints","getMarkerAngles","j","_createSuper$8","_isNativeReflectConstruct$8","PathElement","pathParser","pathM","pathL","pathH","pathV","pathC","pathS","pathQ","pathT","pathA","pathZ","getMarkers","markers","fillRuleStyleProp","fill","stroke","markersLastIndex","markerStartStyleProp","markerMidStyleProp","markerEndStyleProp","marker","_markers$","_marker","_markers$i","_point","_angle","_marker2","_markers$markersLastI","_point2","_angle2","_point3","_y","controlPoint","currentPoint","bezierCurveTo","quadraticCurveTo","rx","ry","xAxisRotation","largeArcFlag","sweepFlag","currp","l","s","cpp","centp","a1","ad","dir","ah","halfWay","r","sx","sy","arc","Boolean","_createSuper$9","_isNativeReflectConstruct$9","SVGElement","root","getComputedStyle","getPropertyValue","fontSizeProp","_screen$viewPort","refXAttr","refYAttr","viewBoxAttr","resize","preserveAspectRatio","widthAttr","heightAttr","styleAttr","originWidth","originHeight","preserveAspectRatioAttr","_createSuper$a","_isNativeReflectConstruct$a","RectElement","_PathElement","rxAttr","ryAttr","KAPPA","_createSuper$b","_isNativeReflectConstruct$b","CircleElement","_createSuper$c","_isNativeReflectConstruct$c","EllipseElement","_createSuper$d","_isNativeReflectConstruct$d","LineElement","getPoints","_this$getPoints","_this$getPoints2","_this$getPoints2$","x0","y0","_this$getPoints2$2","_this$getPoints3","_this$getPoints4","_createSuper$e","_isNativeReflectConstruct$e","PolylineElement","_points","_points$","_createSuper$f","_isNativeReflectConstruct$f","PolygonElement","_PolylineElement","_this$points","_this$points$","_createSuper$g","_isNativeReflectConstruct$g","PatternElement","parentOpacityProp","patternSvg","patternCanvas","createCanvas","patternCtx","getContext","deleteProperty","pattern","_createSuper$h","_isNativeReflectConstruct$h","MarkerElement","orient","markerUnits","markerSvg","overflow","_createSuper$i","_isNativeReflectConstruct$i","DefsElement","_createSuper$j","_isNativeReflectConstruct$j","GElement","_createSuper$k","_isNativeReflectConstruct$k","GradientElement","attributesToInherit","stops","_assertThisInitialize","getGradientUnits","stopsContainer","inheritStopContainer","_stopsContainer","gradient","getGradient","addParentOpacity","addColorStop","_document$screen","_viewPort$viewPorts","rootView","rect","group","attributeToInherit","colorProp","_createSuper$l","_isNativeReflectConstruct$l","LinearGradientElement","_GradientElement","isBoundingBoxUnits","createLinearGradient","_createSuper$m","_isNativeReflectConstruct$m","RadialGradientElement","fx","fy","fr","createRadialGradient","_createSuper$n","_isNativeReflectConstruct$n","StopElement","stopOpacity","stopColor","_createSuper$o","_isNativeReflectConstruct$o","AnimateElement","duration","initialValue","initialUnits","removed","frozen","begin","maxDuration","to","getProperty","attributeType","attributeName","calcValue","_this$getProgress","getProgress","progress","newValue","prop","updated","typeAttr","p","lb","floor","ub","ceil","_createSuper$p","_isNativeReflectConstruct$p","AnimateColorElement","_AnimateElement","colorFrom","colorTo","parseInt","_createSuper$q","_isNativeReflectConstruct$q","AnimateTransformElement","transformFrom","transformTo","_createForOfIteratorHelper","o","isArray","_unsupportedIterableToArray","F","_e","it","normalCompletion","didErr","step","_e2","return","minLen","_arrayLikeToArray","arr","arr2","_createSuper$r","_isNativeReflectConstruct$r","FontElement","_iterator","_step","fontFamilyStyle","unicode","_createSuper$s","_isNativeReflectConstruct$s","FontFaceElement","ascent","descent","_createSuper$t","_isNativeReflectConstruct$t","MissingGlyphElement","_createSuper$u","_isNativeReflectConstruct$u","GlyphElement","_createSuper$v","_isNativeReflectConstruct$v","TRefElement","firstChild","_createSuper$w","_isNativeReflectConstruct$w","AElement","hasText","open","_createForOfIteratorHelper$1","_unsupportedIterableToArray$1","_arrayLikeToArray$1","_createSuper$x","_isNativeReflectConstruct$x","TextPathElement","textWidth","textHeight","pathLength","glyphInfo","letterSpacingCache","measuresCache","Map","pathElement","dataArray","parsePathData","theta","dTheta","psi","fs","setTextData","textDecoration","partialText","rotation","getLetterSpacingAt","idx","findSegmentToFitChar","anchor","textFullWidth","fullPathWidth","spacesNumber","inputOffset","charI","glyphWidth","splineStep","segment","getEquidistantPointOnPath","has","chars","thisSpacing","parentSpacing","letterSpacing","textLen","dxSum","acc","cur","getPathLength","startOffset","_this2$findSegmentToF","nextOffset","getLineLength","kern","midpoint","getPointOnLine","transposeX","transposeY","pathCommands","startX","startY","cmd","upperCommand","toUpperCase","calcLength","_p","getPointOnCubicBezier","getPointOnQuadraticBezier","end","inc","abs","getPointOnEllipticalArc","dist","P1x","P1y","P2x","P2y","fromX","fromY","m","rise","pt","ix","iy","pRise","pRun","getPointOnPath","distance","fullLen","cumulativePathLength","pathCmd","currentT","pct","P3x","P3y","P4x","P4y","cosPsi","sinPsi","buildEquidistantCache","inputStep","inputPrecision","precision","equidistantCache","targetDistance","_createSuper$y","_isNativeReflectConstruct$y","ImageElement","loaded","href","isSvg","images","loadImage","loadSvg","_loadImage","image","createImage","t0","console","_loadSvg","svg","canvg","forkString","_image","drawImage","_createSuper$z","_isNativeReflectConstruct$z","SymbolElement","SVGFontLoader","fonts","svgDocument","fontNode","_createSuper$A","_isNativeReflectConstruct$A","StyleElement","css","cssDefs","cssParts","cssClasses","cssProps","cssClass","props","cssProp","substr","srcs","src","_createSuper$B","_isNativeReflectConstruct$B","UseElement","tempSvg","oldParent","elementTransform","_element","_createSuper$C","_isNativeReflectConstruct$C","imGet","img","rgba","imSet","val","mi","m1","m2","m3","FeColorMatrixElement","includeOpacity","__","srcData","getImageData","nr","ng","nb","na","putImageData","_createSuper$D","_isNativeReflectConstruct$D","MaskElement","ignoredStyles","maskCanvas","maskCtx","tmpCanvas","tmpCtx","globalCompositeOperation","fillRect","_createSuper$E","_isNativeReflectConstruct$E","noop","ClipPathElement","contextProto","_createSuper$F","_isNativeReflectConstruct$F","FilterElement","px","py","efd","extraFilterDistance","tmpCanvasWidth","tmpCanvasHeight","_createSuper$G","_isNativeReflectConstruct$G","FeDropShadowElement","___","____","_____","_createSuper$H","_isNativeReflectConstruct$H","FeMorphologyElement","_createSuper$I","_isNativeReflectConstruct$I","FeCompositeElement","_createSuper$J","_isNativeReflectConstruct$J","FeGaussianBlurElement","blurRadius","body","getUniqueId","display","appendChild","removeChild","_createSuper$K","_isNativeReflectConstruct$K","TitleElement","_createSuper$L","_isNativeReflectConstruct$L","DescElement","elementTypes","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","source","getOwnPropertyDescriptors","defineProperties","defineProperty","_createImage","anonymousCrossOrigin","_args","crossOrigin","onload","onerror","Document","_ref$rootEmSize","_ref$emSize","_ref$createCanvas","_ref$createImage","emSizeStack","uniqueId","bindCreateImage","isImagesLoaded","isFontsLoaded","forceAnonymousCrossOrigin","createDocumentElement","documentElement","elementType","ElementType","config","ownKeys$1","_objectSpread$1","Canvg","options","fork","fromString","_render","baseOptions","_from","_args2","offscreen","DOMParserFallback","preset","OffscreenCanvas","blob","createImageBitmap","freeze","presets"],"sources":["/home/unutu/go/src/github.com/thteam47/admin-portal/node_modules/@amcharts/amcharts4/.internal/canvg/index.js"],"sourcesContent":["import 'core-js/modules/es.array.map';\nimport 'core-js/modules/es.regexp.exec';\nimport 'core-js/modules/es.string.match';\nimport 'core-js/modules/es.string.replace';\nimport 'core-js/modules/es.string.starts-with';\nimport 'core-js/modules/es.array.join';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport 'core-js/modules/es.symbol';\nimport 'core-js/modules/es.array.filter';\nimport 'core-js/modules/es.array.for-each';\nimport 'core-js/modules/es.object.get-own-property-descriptor';\nimport 'core-js/modules/es.object.get-own-property-descriptors';\nimport 'core-js/modules/es.object.keys';\nimport 'core-js/modules/web.dom-collections.for-each';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport 'core-js/modules/es.array.concat';\nimport 'core-js/modules/es.array.every';\nimport 'core-js/modules/es.array.reduce';\nimport 'core-js/modules/es.object.to-string';\nimport 'core-js/modules/es.promise';\nimport 'core-js/modules/es.string.split';\nimport requestAnimationFrame from 'raf';\nimport 'core-js/modules/es.function.name';\nimport RGBColor from 'rgbcolor';\nimport 'core-js/modules/es.reflect.construct';\nimport 'core-js/modules/es.regexp.to-string';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport 'core-js/modules/es.array.from';\nimport 'core-js/modules/es.array.includes';\nimport 'core-js/modules/es.array.some';\nimport 'core-js/modules/es.string.includes';\nimport 'core-js/modules/es.string.iterator';\nimport 'core-js/modules/es.string.trim';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport 'core-js/modules/es.array.index-of';\nimport 'core-js/modules/es.array.reverse';\nimport _get from '@babel/runtime/helpers/get';\nimport 'core-js/modules/es.number.constructor';\nimport 'core-js/modules/es.array.fill';\nimport 'core-js/modules/es.reflect.delete-property';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport 'core-js/modules/es.array.iterator';\nimport 'core-js/modules/web.dom-collections.iterator';\nimport 'core-js/modules/es.symbol.description';\nimport 'core-js/modules/es.symbol.iterator';\nimport 'core-js/modules/es.array.slice';\nimport 'core-js/modules/es.map';\nimport 'core-js/modules/es.reflect.apply';\nimport 'core-js/modules/es.reflect.get-prototype-of';\nimport { canvasRGBA } from 'stackblur-canvas';\n\n/**\n * HTML-safe compress white-spaces.\n * @param str - String to compress.\n */\nfunction compressSpaces(str) {\n  return str.replace(/(?!\\u3000)\\s+/gm, ' ');\n}\n/**\n * HTML-safe left trim.\n * @param str - String to trim.\n */\n\nfunction trimLeft(str) {\n  return str.replace(/^[\\n \\t]+/, '');\n}\n/**\n * HTML-safe right trim.\n * @param str - String to trim.\n */\n\nfunction trimRight(str) {\n  return str.replace(/[\\n \\t]+$/, '');\n}\n/**\n * String to numbers array.\n * @param str - Numbers string.\n */\n\nfunction toNumbers(str) {\n  var matches = (str || '').match(/-?(\\d+(?:\\.\\d*(?:[eE][+-]?\\d+)?)?|\\.\\d+)(?=\\D|$)/gm) || [];\n  return matches.map(parseFloat);\n} // Microsoft Edge fix\n\nvar allUppercase = /^[A-Z-]+$/;\n/**\n * Normalize attribute name.\n * @param name - Attribute name.\n */\n\nfunction normalizeAttributeName(name) {\n  if (allUppercase.test(name)) {\n    return name.toLowerCase();\n  }\n\n  return name;\n}\n/**\n * Parse external URL.\n * @param url - CSS url string.\n */\n\nfunction parseExternalUrl(url) {\n  //                                   single quotes [2]\n  //                                   v           double quotes [3]\n  //                                   v           v        no quotes [4]\n  //                                   v           v        v\n  var urlMatch = url.match(/url\\(('([^']+)'|\"([^\"]+)\"|([^'\"\\)]+))\\)/) || [];\n  return urlMatch[2] || urlMatch[3] || urlMatch[4];\n}\n/**\n * Transform floats to integers in rgb colors.\n * @param color - Color to normalize.\n */\n\nfunction normalizeColor(color) {\n  if (!color.startsWith('rgb')) {\n    return color;\n  }\n\n  var rgbParts = 3;\n  var normalizedColor = color.replace(/\\d+(\\.\\d+)?/g, function (num, isFloat) {\n    return rgbParts-- && isFloat ? String(Math.round(parseFloat(num))) : num;\n  });\n  return normalizedColor;\n}\n\n// slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js\nvar attributeRegex = /(\\[[^\\]]+\\])/g;\nvar idRegex = /(#[^\\s\\+>~\\.\\[:]+)/g;\nvar classRegex = /(\\.[^\\s\\+>~\\.\\[:]+)/g;\nvar pseudoElementRegex = /(::[^\\s\\+>~\\.\\[:]+|:first-line|:first-letter|:before|:after)/gi;\nvar pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^\\)]*\\))/gi;\nvar pseudoClassRegex = /(:[^\\s\\+>~\\.\\[:]+)/g;\nvar elementRegex = /([^\\s\\+>~\\.\\[:]+)/g;\n\nfunction findSelectorMatch(selector, regex) {\n  var matches = selector.match(regex);\n\n  if (!matches) {\n    return [selector, 0];\n  }\n\n  return [selector.replace(regex, ' '), matches.length];\n}\n/**\n * Measure selector specificity.\n * @param selector - Selector to measure.\n */\n\n\nfunction getSelectorSpecificity(selector) {\n  var specificity = [0, 0, 0];\n  var currentSelector = selector.replace(/:not\\(([^\\)]*)\\)/g, '     $1 ').replace(/{[\\s\\S]*/gm, ' ');\n  var delta = 0;\n\n  var _findSelectorMatch = findSelectorMatch(currentSelector, attributeRegex);\n\n  var _findSelectorMatch2 = _slicedToArray(_findSelectorMatch, 2);\n\n  currentSelector = _findSelectorMatch2[0];\n  delta = _findSelectorMatch2[1];\n  specificity[1] += delta;\n\n  var _findSelectorMatch3 = findSelectorMatch(currentSelector, idRegex);\n\n  var _findSelectorMatch4 = _slicedToArray(_findSelectorMatch3, 2);\n\n  currentSelector = _findSelectorMatch4[0];\n  delta = _findSelectorMatch4[1];\n  specificity[0] += delta;\n\n  var _findSelectorMatch5 = findSelectorMatch(currentSelector, classRegex);\n\n  var _findSelectorMatch6 = _slicedToArray(_findSelectorMatch5, 2);\n\n  currentSelector = _findSelectorMatch6[0];\n  delta = _findSelectorMatch6[1];\n  specificity[1] += delta;\n\n  var _findSelectorMatch7 = findSelectorMatch(currentSelector, pseudoElementRegex);\n\n  var _findSelectorMatch8 = _slicedToArray(_findSelectorMatch7, 2);\n\n  currentSelector = _findSelectorMatch8[0];\n  delta = _findSelectorMatch8[1];\n  specificity[2] += delta;\n\n  var _findSelectorMatch9 = findSelectorMatch(currentSelector, pseudoClassWithBracketsRegex);\n\n  var _findSelectorMatch10 = _slicedToArray(_findSelectorMatch9, 2);\n\n  currentSelector = _findSelectorMatch10[0];\n  delta = _findSelectorMatch10[1];\n  specificity[1] += delta;\n\n  var _findSelectorMatch11 = findSelectorMatch(currentSelector, pseudoClassRegex);\n\n  var _findSelectorMatch12 = _slicedToArray(_findSelectorMatch11, 2);\n\n  currentSelector = _findSelectorMatch12[0];\n  delta = _findSelectorMatch12[1];\n  specificity[1] += delta;\n  currentSelector = currentSelector.replace(/[\\*\\s\\+>~]/g, ' ').replace(/[#\\.]/g, ' ');\n\n  var _findSelectorMatch13 = findSelectorMatch(currentSelector, elementRegex);\n\n  var _findSelectorMatch14 = _slicedToArray(_findSelectorMatch13, 2);\n\n  currentSelector = _findSelectorMatch14[0];\n  delta = _findSelectorMatch14[1];\n  // lgtm [js/useless-assignment-to-local]\n  specificity[2] += delta;\n  return specificity.join('');\n}\n\nvar PSEUDO_ZERO = .00000001;\n/**\n * Vector magnitude.\n */\n\nfunction vectorMagnitude(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n/**\n * Ratio between two vectors.\n */\n\nfunction vectorsRatio(u, v) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vectorMagnitude(u) * vectorMagnitude(v));\n}\n/**\n * Angle between two vectors.\n */\n\nfunction vectorsAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vectorsRatio(u, v));\n}\nfunction CB1(t) {\n  return t * t * t;\n}\nfunction CB2(t) {\n  return 3 * t * t * (1 - t);\n}\nfunction CB3(t) {\n  return 3 * t * (1 - t) * (1 - t);\n}\nfunction CB4(t) {\n  return (1 - t) * (1 - t) * (1 - t);\n}\nfunction QB1(t) {\n  return t * t;\n}\nfunction QB2(t) {\n  return 2 * t * (1 - t);\n}\nfunction QB3(t) {\n  return (1 - t) * (1 - t);\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar runtime_1 = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2014-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n  var runtime = function (exports) {\n\n    var Op = Object.prototype;\n    var hasOwn = Op.hasOwnProperty;\n    var undefined$1; // More compressible than void 0.\n\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n    function wrap(innerFn, outerFn, self, tryLocsList) {\n      // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n      var generator = Object.create(protoGenerator.prototype);\n      var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n      // .throw, and .return methods.\n\n      generator._invoke = makeInvokeMethod(innerFn, self, context);\n      return generator;\n    }\n\n    exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n    // record like context.tryEntries[i].completion. This interface could\n    // have been (and was previously) designed to take a closure to be\n    // invoked without arguments, but in all the cases we care about we\n    // already have an existing method we want to call, so there's no need\n    // to create a new function object. We can even get away with assuming\n    // the method takes exactly one argument, since that happens to be true\n    // in every case, so we don't have to touch the arguments object. The\n    // only additional allocation required is the completion record, which\n    // has a stable shape and so hopefully should be cheap to allocate.\n\n    function tryCatch(fn, obj, arg) {\n      try {\n        return {\n          type: \"normal\",\n          arg: fn.call(obj, arg)\n        };\n      } catch (err) {\n        return {\n          type: \"throw\",\n          arg: err\n        };\n      }\n    }\n\n    var GenStateSuspendedStart = \"suspendedStart\";\n    var GenStateSuspendedYield = \"suspendedYield\";\n    var GenStateExecuting = \"executing\";\n    var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n    // breaking out of the dispatch switch statement.\n\n    var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n    // .constructor.prototype properties for functions that return Generator\n    // objects. For full spec compliance, you may wish to configure your\n    // minifier not to mangle the names of these two functions.\n\n    function Generator() {}\n\n    function GeneratorFunction() {}\n\n    function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n    // don't natively support it.\n\n\n    var IteratorPrototype = {};\n\n    IteratorPrototype[iteratorSymbol] = function () {\n      return this;\n    };\n\n    var getProto = Object.getPrototypeOf;\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n    if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n      // This environment has a native %IteratorPrototype%; use it instead\n      // of the polyfill.\n      IteratorPrototype = NativeIteratorPrototype;\n    }\n\n    var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n    GeneratorFunctionPrototype.constructor = GeneratorFunction;\n    GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n    // Iterator interface in terms of a single ._invoke method.\n\n    function defineIteratorMethods(prototype) {\n      [\"next\", \"throw\", \"return\"].forEach(function (method) {\n        prototype[method] = function (arg) {\n          return this._invoke(method, arg);\n        };\n      });\n    }\n\n    exports.isGeneratorFunction = function (genFun) {\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\n      return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n      // do is to check its .name property.\n      (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n    };\n\n    exports.mark = function (genFun) {\n      if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n      } else {\n        genFun.__proto__ = GeneratorFunctionPrototype;\n\n        if (!(toStringTagSymbol in genFun)) {\n          genFun[toStringTagSymbol] = \"GeneratorFunction\";\n        }\n      }\n\n      genFun.prototype = Object.create(Gp);\n      return genFun;\n    }; // Within the body of any async function, `await x` is transformed to\n    // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n    // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n    // meant to be awaited.\n\n\n    exports.awrap = function (arg) {\n      return {\n        __await: arg\n      };\n    };\n\n    function AsyncIterator(generator, PromiseImpl) {\n      function invoke(method, arg, resolve, reject) {\n        var record = tryCatch(generator[method], generator, arg);\n\n        if (record.type === \"throw\") {\n          reject(record.arg);\n        } else {\n          var result = record.arg;\n          var value = result.value;\n\n          if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n            return PromiseImpl.resolve(value.__await).then(function (value) {\n              invoke(\"next\", value, resolve, reject);\n            }, function (err) {\n              invoke(\"throw\", err, resolve, reject);\n            });\n          }\n\n          return PromiseImpl.resolve(value).then(function (unwrapped) {\n            // When a yielded Promise is resolved, its final value becomes\n            // the .value of the Promise<{value,done}> result for the\n            // current iteration.\n            result.value = unwrapped;\n            resolve(result);\n          }, function (error) {\n            // If a rejected Promise was yielded, throw the rejection back\n            // into the async generator function so it can be handled there.\n            return invoke(\"throw\", error, resolve, reject);\n          });\n        }\n      }\n\n      var previousPromise;\n\n      function enqueue(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n\n        return previousPromise = // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n        // invocations of the iterator.\n        callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      } // Define the unified helper method that is used to implement .next,\n      // .throw, and .return (see defineIteratorMethods).\n\n\n      this._invoke = enqueue;\n    }\n\n    defineIteratorMethods(AsyncIterator.prototype);\n\n    AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n      return this;\n    };\n\n    exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n    // AsyncIterator objects; they just return a Promise for the value of\n    // the final result produced by the iterator.\n\n    exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n      if (PromiseImpl === void 0) PromiseImpl = Promise;\n      var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n      return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function (result) {\n        return result.done ? result.value : iter.next();\n      });\n    };\n\n    function makeInvokeMethod(innerFn, self, context) {\n      var state = GenStateSuspendedStart;\n      return function invoke(method, arg) {\n        if (state === GenStateExecuting) {\n          throw new Error(\"Generator is already running\");\n        }\n\n        if (state === GenStateCompleted) {\n          if (method === \"throw\") {\n            throw arg;\n          } // Be forgiving, per 25.3.3.3.3 of the spec:\n          // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n          return doneResult();\n        }\n\n        context.method = method;\n        context.arg = arg;\n\n        while (true) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (context.method === \"next\") {\n            // Setting context._sent for legacy support of Babel's\n            // function.sent implementation.\n            context.sent = context._sent = context.arg;\n          } else if (context.method === \"throw\") {\n            if (state === GenStateSuspendedStart) {\n              state = GenStateCompleted;\n              throw context.arg;\n            }\n\n            context.dispatchException(context.arg);\n          } else if (context.method === \"return\") {\n            context.abrupt(\"return\", context.arg);\n          }\n\n          state = GenStateExecuting;\n          var record = tryCatch(innerFn, self, context);\n\n          if (record.type === \"normal\") {\n            // If an exception is thrown from innerFn, we leave state ===\n            // GenStateExecuting and loop back for another invocation.\n            state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n            if (record.arg === ContinueSentinel) {\n              continue;\n            }\n\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          } else if (record.type === \"throw\") {\n            state = GenStateCompleted; // Dispatch the exception by looping back around to the\n            // context.dispatchException(context.arg) call above.\n\n            context.method = \"throw\";\n            context.arg = record.arg;\n          }\n        }\n      };\n    } // Call delegate.iterator[context.method](context.arg) and handle the\n    // result, either by returning a { value, done } result from the\n    // delegate iterator, or by modifying context.method and context.arg,\n    // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n    function maybeInvokeDelegate(delegate, context) {\n      var method = delegate.iterator[context.method];\n\n      if (method === undefined$1) {\n        // A .throw or .return when the delegate iterator has no .throw\n        // method always terminates the yield* loop.\n        context.delegate = null;\n\n        if (context.method === \"throw\") {\n          // Note: [\"return\"] must be used for ES3 parsing compatibility.\n          if (delegate.iterator[\"return\"]) {\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            context.method = \"return\";\n            context.arg = undefined$1;\n            maybeInvokeDelegate(delegate, context);\n\n            if (context.method === \"throw\") {\n              // If maybeInvokeDelegate(context) changed context.method from\n              // \"return\" to \"throw\", let that override the TypeError below.\n              return ContinueSentinel;\n            }\n          }\n\n          context.method = \"throw\";\n          context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n        }\n\n        return ContinueSentinel;\n      }\n\n      var record = tryCatch(method, delegate.iterator, context.arg);\n\n      if (record.type === \"throw\") {\n        context.method = \"throw\";\n        context.arg = record.arg;\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n\n      var info = record.arg;\n\n      if (!info) {\n        context.method = \"throw\";\n        context.arg = new TypeError(\"iterator result is not an object\");\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n\n      if (info.done) {\n        // Assign the result of the finished delegate to the temporary\n        // variable specified by delegate.resultName (see delegateYield).\n        context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n        context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n        // exception, let the outer generator proceed normally. If\n        // context.method was \"next\", forget context.arg since it has been\n        // \"consumed\" by the delegate iterator. If context.method was\n        // \"return\", allow the original .return call to continue in the\n        // outer generator.\n\n        if (context.method !== \"return\") {\n          context.method = \"next\";\n          context.arg = undefined$1;\n        }\n      } else {\n        // Re-yield the result returned by the delegate method.\n        return info;\n      } // The delegate iterator is finished, so forget it and continue with\n      // the outer generator.\n\n\n      context.delegate = null;\n      return ContinueSentinel;\n    } // Define Generator.prototype.{next,throw,return} in terms of the\n    // unified ._invoke helper method.\n\n\n    defineIteratorMethods(Gp);\n    Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n    // @@iterator function is called on it. Some browsers' implementations of the\n    // iterator prototype chain incorrectly implement this, causing the Generator\n    // object to not be returned from this call. This ensures that doesn't happen.\n    // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n    Gp[iteratorSymbol] = function () {\n      return this;\n    };\n\n    Gp.toString = function () {\n      return \"[object Generator]\";\n    };\n\n    function pushTryEntry(locs) {\n      var entry = {\n        tryLoc: locs[0]\n      };\n\n      if (1 in locs) {\n        entry.catchLoc = locs[1];\n      }\n\n      if (2 in locs) {\n        entry.finallyLoc = locs[2];\n        entry.afterLoc = locs[3];\n      }\n\n      this.tryEntries.push(entry);\n    }\n\n    function resetTryEntry(entry) {\n      var record = entry.completion || {};\n      record.type = \"normal\";\n      delete record.arg;\n      entry.completion = record;\n    }\n\n    function Context(tryLocsList) {\n      // The root entry object (effectively a try statement without a catch\n      // or a finally block) gives us a place to store values thrown from\n      // locations where there is no enclosing try statement.\n      this.tryEntries = [{\n        tryLoc: \"root\"\n      }];\n      tryLocsList.forEach(pushTryEntry, this);\n      this.reset(true);\n    }\n\n    exports.keys = function (object) {\n      var keys = [];\n\n      for (var key in object) {\n        keys.push(key);\n      }\n\n      keys.reverse(); // Rather than returning an object with a next method, we keep\n      // things simple and return the next function itself.\n\n      return function next() {\n        while (keys.length) {\n          var key = keys.pop();\n\n          if (key in object) {\n            next.value = key;\n            next.done = false;\n            return next;\n          }\n        } // To avoid creating an additional object, we just hang the .value\n        // and .done properties off the next function object itself. This\n        // also ensures that the minifier will not anonymize the function.\n\n\n        next.done = true;\n        return next;\n      };\n    };\n\n    function values(iterable) {\n      if (iterable) {\n        var iteratorMethod = iterable[iteratorSymbol];\n\n        if (iteratorMethod) {\n          return iteratorMethod.call(iterable);\n        }\n\n        if (typeof iterable.next === \"function\") {\n          return iterable;\n        }\n\n        if (!isNaN(iterable.length)) {\n          var i = -1,\n              next = function next() {\n            while (++i < iterable.length) {\n              if (hasOwn.call(iterable, i)) {\n                next.value = iterable[i];\n                next.done = false;\n                return next;\n              }\n            }\n\n            next.value = undefined$1;\n            next.done = true;\n            return next;\n          };\n\n          return next.next = next;\n        }\n      } // Return an iterator with no values.\n\n\n      return {\n        next: doneResult\n      };\n    }\n\n    exports.values = values;\n\n    function doneResult() {\n      return {\n        value: undefined$1,\n        done: true\n      };\n    }\n\n    Context.prototype = {\n      constructor: Context,\n      reset: function (skipTempReset) {\n        this.prev = 0;\n        this.next = 0; // Resetting context._sent for legacy support of Babel's\n        // function.sent implementation.\n\n        this.sent = this._sent = undefined$1;\n        this.done = false;\n        this.delegate = null;\n        this.method = \"next\";\n        this.arg = undefined$1;\n        this.tryEntries.forEach(resetTryEntry);\n\n        if (!skipTempReset) {\n          for (var name in this) {\n            // Not sure about the optimal order of these conditions:\n            if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n              this[name] = undefined$1;\n            }\n          }\n        }\n      },\n      stop: function () {\n        this.done = true;\n        var rootEntry = this.tryEntries[0];\n        var rootRecord = rootEntry.completion;\n\n        if (rootRecord.type === \"throw\") {\n          throw rootRecord.arg;\n        }\n\n        return this.rval;\n      },\n      dispatchException: function (exception) {\n        if (this.done) {\n          throw exception;\n        }\n\n        var context = this;\n\n        function handle(loc, caught) {\n          record.type = \"throw\";\n          record.arg = exception;\n          context.next = loc;\n\n          if (caught) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            context.method = \"next\";\n            context.arg = undefined$1;\n          }\n\n          return !!caught;\n        }\n\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          var record = entry.completion;\n\n          if (entry.tryLoc === \"root\") {\n            // Exception thrown outside of any try block that could handle\n            // it, so set the completion value of the entire function to\n            // throw the exception.\n            return handle(\"end\");\n          }\n\n          if (entry.tryLoc <= this.prev) {\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n            if (hasCatch && hasFinally) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              } else if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else if (hasCatch) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              }\n            } else if (hasFinally) {\n              if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else {\n              throw new Error(\"try statement without catch or finally\");\n            }\n          }\n        }\n      },\n      abrupt: function (type, arg) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n\n          if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n            var finallyEntry = entry;\n            break;\n          }\n        }\n\n        if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n          // Ignore the finally entry if control is not jumping to a\n          // location outside the try/catch block.\n          finallyEntry = null;\n        }\n\n        var record = finallyEntry ? finallyEntry.completion : {};\n        record.type = type;\n        record.arg = arg;\n\n        if (finallyEntry) {\n          this.method = \"next\";\n          this.next = finallyEntry.finallyLoc;\n          return ContinueSentinel;\n        }\n\n        return this.complete(record);\n      },\n      complete: function (record, afterLoc) {\n        if (record.type === \"throw\") {\n          throw record.arg;\n        }\n\n        if (record.type === \"break\" || record.type === \"continue\") {\n          this.next = record.arg;\n        } else if (record.type === \"return\") {\n          this.rval = this.arg = record.arg;\n          this.method = \"return\";\n          this.next = \"end\";\n        } else if (record.type === \"normal\" && afterLoc) {\n          this.next = afterLoc;\n        }\n\n        return ContinueSentinel;\n      },\n      finish: function (finallyLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n\n          if (entry.finallyLoc === finallyLoc) {\n            this.complete(entry.completion, entry.afterLoc);\n            resetTryEntry(entry);\n            return ContinueSentinel;\n          }\n        }\n      },\n      \"catch\": function (tryLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n\n          if (entry.tryLoc === tryLoc) {\n            var record = entry.completion;\n\n            if (record.type === \"throw\") {\n              var thrown = record.arg;\n              resetTryEntry(entry);\n            }\n\n            return thrown;\n          }\n        } // The context.catch method must only be called with a location\n        // argument that corresponds to a known catch block.\n\n\n        throw new Error(\"illegal catch attempt\");\n      },\n      delegateYield: function (iterable, resultName, nextLoc) {\n        this.delegate = {\n          iterator: values(iterable),\n          resultName: resultName,\n          nextLoc: nextLoc\n        };\n\n        if (this.method === \"next\") {\n          // Deliberately forget the last sent value so that we don't\n          // accidentally pass it on to the delegate.\n          this.arg = undefined$1;\n        }\n\n        return ContinueSentinel;\n      }\n    }; // Regardless of whether this script is executing as a CommonJS module\n    // or not, return the runtime object so that we can declare the variable\n    // regeneratorRuntime in the outer scope, which allows this module to be\n    // injected easily by `bin/regenerator --include-runtime script.js`.\n\n    return exports;\n  }( // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n   module.exports );\n\n  try {\n    regeneratorRuntime = runtime;\n  } catch (accidentalStrictMode) {\n    // This module should not be running in strict mode, so the above\n    // assignment should always work unless something is misconfigured. Just\n    // in case runtime.js accidentally runs in strict mode, we can escape\n    // strict mode using a global Function call. This could conceivably fail\n    // if a Content Security Policy forbids using Function, but in that case\n    // the proper solution is to fix the accidental strict mode problem. If\n    // you've misconfigured your bundler to force strict mode and applied a\n    // CSP to forbid Function, and you're not willing to fix either of those\n    // problems, please detail your unique predicament in a GitHub issue.\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n});\n\nvar Property = /*#__PURE__*/function () {\n  function Property(document, name, value) {\n    _classCallCheck(this, Property);\n\n    this.document = document;\n    this.name = name;\n    this.value = value;\n    this.isNormalizedColor = false;\n  }\n\n  _createClass(Property, [{\n    key: \"hasValue\",\n    value: function hasValue() {\n      var value = this.value;\n      return value !== null && value !== '' && value !== 0 && typeof value !== 'undefined';\n    }\n  }, {\n    key: \"isString\",\n    value: function isString(regexp) {\n      var value = this.value;\n      var result = typeof value === 'string';\n\n      if (!result || !regexp) {\n        return result;\n      }\n\n      return regexp.test(value);\n    }\n  }, {\n    key: \"isUrlDefinition\",\n    value: function isUrlDefinition() {\n      return this.isString(/^url\\(/);\n    }\n  }, {\n    key: \"isPixels\",\n    value: function isPixels() {\n      if (!this.hasValue()) {\n        return false;\n      }\n\n      var asString = this.getString();\n\n      switch (true) {\n        case /px$/.test(asString):\n        case /^[0-9]+$/.test(asString):\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      this.value = value;\n      return this;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue(def) {\n      if (typeof def === 'undefined' || this.hasValue()) {\n        return this.value;\n      }\n\n      return def;\n    }\n  }, {\n    key: \"getNumber\",\n    value: function getNumber(def) {\n      if (!this.hasValue()) {\n        if (typeof def === 'undefined') {\n          return 0;\n        }\n\n        return parseFloat(def);\n      }\n\n      var value = this.value;\n      var n = parseFloat(value);\n\n      if (this.isString(/%$/)) {\n        n = n / 100.0;\n      }\n\n      return n;\n    }\n  }, {\n    key: \"getString\",\n    value: function getString(def) {\n      if (typeof def === 'undefined' || this.hasValue()) {\n        return typeof this.value === 'undefined' ? '' : String(this.value);\n      }\n\n      return String(def);\n    }\n  }, {\n    key: \"getColor\",\n    value: function getColor(def) {\n      var color = this.getString(def);\n\n      if (this.isNormalizedColor) {\n        return color;\n      }\n\n      this.isNormalizedColor = true;\n      color = normalizeColor(color);\n      this.value = color;\n      return color;\n    }\n  }, {\n    key: \"getDpi\",\n    value: function getDpi() {\n      return 96.0; // TODO: compute?\n    }\n  }, {\n    key: \"getRem\",\n    value: function getRem() {\n      return this.document.rootEmSize;\n    }\n  }, {\n    key: \"getEm\",\n    value: function getEm() {\n      return this.document.emSize;\n    }\n  }, {\n    key: \"getUnits\",\n    value: function getUnits() {\n      return this.getString().replace(/[0-9\\.\\-]/g, '');\n    }\n  }, {\n    key: \"getPixels\",\n    value: function getPixels(axisOrIsFontSize) {\n      var processPercent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.hasValue()) {\n        return 0;\n      }\n\n      var _ref = typeof axisOrIsFontSize === 'boolean' ? [undefined, axisOrIsFontSize] : [axisOrIsFontSize],\n          _ref2 = _slicedToArray(_ref, 2),\n          axis = _ref2[0],\n          isFontSize = _ref2[1];\n\n      var viewPort = this.document.screen.viewPort;\n\n      switch (true) {\n        case this.isString(/vmin$/):\n          return this.getNumber() / 100.0 * Math.min(viewPort.computeSize('x'), viewPort.computeSize('y'));\n\n        case this.isString(/vmax$/):\n          return this.getNumber() / 100.0 * Math.max(viewPort.computeSize('x'), viewPort.computeSize('y'));\n\n        case this.isString(/vw$/):\n          return this.getNumber() / 100.0 * viewPort.computeSize('x');\n\n        case this.isString(/vh$/):\n          return this.getNumber() / 100.0 * viewPort.computeSize('y');\n\n        case this.isString(/rem$/):\n          return this.getNumber() * this.getRem();\n\n        case this.isString(/em$/):\n          return this.getNumber() * this.getEm();\n\n        case this.isString(/ex$/):\n          return this.getNumber() * this.getEm() / 2.0;\n\n        case this.isString(/px$/):\n          return this.getNumber();\n\n        case this.isString(/pt$/):\n          return this.getNumber() * this.getDpi() * (1.0 / 72.0);\n\n        case this.isString(/pc$/):\n          return this.getNumber() * 15;\n\n        case this.isString(/cm$/):\n          return this.getNumber() * this.getDpi() / 2.54;\n\n        case this.isString(/mm$/):\n          return this.getNumber() * this.getDpi() / 25.4;\n\n        case this.isString(/in$/):\n          return this.getNumber() * this.getDpi();\n\n        case this.isString(/%$/) && isFontSize:\n          return this.getNumber() * this.getEm();\n\n        case this.isString(/%$/):\n          return this.getNumber() * viewPort.computeSize(axis);\n\n        default:\n          {\n            var n = this.getNumber();\n\n            if (processPercent && n < 1.0) {\n              return n * viewPort.computeSize(axis);\n            }\n\n            return n;\n          }\n      }\n    }\n  }, {\n    key: \"getMilliseconds\",\n    value: function getMilliseconds() {\n      if (!this.hasValue()) {\n        return 0;\n      }\n\n      if (this.isString(/ms$/)) {\n        return this.getNumber();\n      }\n\n      return this.getNumber() * 1000;\n    }\n  }, {\n    key: \"getRadians\",\n    value: function getRadians() {\n      if (!this.hasValue()) {\n        return 0;\n      }\n\n      switch (true) {\n        case this.isString(/deg$/):\n          return this.getNumber() * (Math.PI / 180.0);\n\n        case this.isString(/grad$/):\n          return this.getNumber() * (Math.PI / 200.0);\n\n        case this.isString(/rad$/):\n          return this.getNumber();\n\n        default:\n          return this.getNumber() * (Math.PI / 180.0);\n      }\n    }\n  }, {\n    key: \"getDefinition\",\n    value: function getDefinition() {\n      var asString = this.getString();\n      var name = asString.match(/#([^\\)'\"]+)/);\n\n      if (name) {\n        name = name[1];\n      }\n\n      if (!name) {\n        name = asString;\n      }\n\n      return this.document.definitions[name];\n    }\n  }, {\n    key: \"getFillStyleDefinition\",\n    value: function getFillStyleDefinition(element, opacity) {\n      var def = this.getDefinition();\n\n      if (!def) {\n        return null;\n      } // gradient\n\n\n      if (typeof def.createGradient === 'function') {\n        return def.createGradient(this.document.ctx, element, opacity);\n      } // pattern\n\n\n      if (typeof def.createPattern === 'function') {\n        if (def.getHrefAttribute().hasValue()) {\n          var patternTransform = def.getAttribute('patternTransform');\n          def = def.getHrefAttribute().getDefinition();\n\n          if (patternTransform.hasValue()) {\n            def.getAttribute('patternTransform', true).setValue(patternTransform.value);\n          }\n        }\n\n        return def.createPattern(this.document.ctx, element, opacity);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getTextBaseline\",\n    value: function getTextBaseline() {\n      if (!this.hasValue()) {\n        return null;\n      }\n\n      return Property.textBaselineMapping[this.getString()];\n    }\n  }, {\n    key: \"addOpacity\",\n    value: function addOpacity(opacity) {\n      var value = this.getColor();\n      var len = value.length;\n      var commas = 0; // Simulate old RGBColor version, which can't parse rgba.\n\n      for (var i = 0; i < len; i++) {\n        if (value[i] === ',') {\n          commas++;\n        }\n\n        if (commas === 3) {\n          break;\n        }\n      }\n\n      if (opacity.hasValue() && this.isString() && commas !== 3) {\n        var color = new RGBColor(value);\n\n        if (color.ok) {\n          color.alpha = opacity.getNumber();\n          value = color.toRGBA();\n        }\n      }\n\n      return new Property(this.document, this.name, value);\n    }\n  }], [{\n    key: \"empty\",\n    value: function empty(document) {\n      return new Property(document, 'EMPTY', '');\n    }\n  }]);\n\n  return Property;\n}();\nProperty.textBaselineMapping = {\n  'baseline': 'alphabetic',\n  'before-edge': 'top',\n  'text-before-edge': 'top',\n  'middle': 'middle',\n  'central': 'middle',\n  'after-edge': 'bottom',\n  'text-after-edge': 'bottom',\n  'ideographic': 'ideographic',\n  'alphabetic': 'alphabetic',\n  'hanging': 'hanging',\n  'mathematical': 'alphabetic'\n};\n\nvar ViewPort = /*#__PURE__*/function () {\n  function ViewPort() {\n    _classCallCheck(this, ViewPort);\n\n    this.viewPorts = [];\n  }\n\n  _createClass(ViewPort, [{\n    key: \"clear\",\n    value: function clear() {\n      this.viewPorts = [];\n    }\n  }, {\n    key: \"setCurrent\",\n    value: function setCurrent(width, height) {\n      this.viewPorts.push({\n        width: width,\n        height: height\n      });\n    }\n  }, {\n    key: \"removeCurrent\",\n    value: function removeCurrent() {\n      this.viewPorts.pop();\n    }\n  }, {\n    key: \"getCurrent\",\n    value: function getCurrent() {\n      var viewPorts = this.viewPorts;\n      return viewPorts[viewPorts.length - 1];\n    }\n  }, {\n    key: \"computeSize\",\n    value: function computeSize(d) {\n      if (typeof d === 'number') {\n        return d;\n      }\n\n      if (d === 'x') {\n        return this.width;\n      }\n\n      if (d === 'y') {\n        return this.height;\n      }\n\n      return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2)) / Math.sqrt(2);\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.getCurrent().width;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.getCurrent().height;\n    }\n  }]);\n\n  return ViewPort;\n}();\n\nvar Point = /*#__PURE__*/function () {\n  function Point(x, y) {\n    _classCallCheck(this, Point);\n\n    this.x = x;\n    this.y = y;\n  }\n\n  _createClass(Point, [{\n    key: \"angleTo\",\n    value: function angleTo(point) {\n      return Math.atan2(point.y - this.y, point.x - this.x);\n    }\n  }, {\n    key: \"applyTransform\",\n    value: function applyTransform(transform) {\n      var x = this.x,\n          y = this.y;\n      var xp = x * transform[0] + y * transform[2] + transform[4];\n      var yp = x * transform[1] + y * transform[3] + transform[5];\n      this.x = xp;\n      this.y = yp;\n    }\n  }], [{\n    key: \"parse\",\n    value: function parse(point) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var _toNumbers = toNumbers(point),\n          _toNumbers2 = _slicedToArray(_toNumbers, 2),\n          _toNumbers2$ = _toNumbers2[0],\n          x = _toNumbers2$ === void 0 ? defaultValue : _toNumbers2$,\n          _toNumbers2$2 = _toNumbers2[1],\n          y = _toNumbers2$2 === void 0 ? defaultValue : _toNumbers2$2;\n\n      return new Point(x, y);\n    }\n  }, {\n    key: \"parseScale\",\n    value: function parseScale(scale) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      var _toNumbers3 = toNumbers(scale),\n          _toNumbers4 = _slicedToArray(_toNumbers3, 2),\n          _toNumbers4$ = _toNumbers4[0],\n          x = _toNumbers4$ === void 0 ? defaultValue : _toNumbers4$,\n          _toNumbers4$2 = _toNumbers4[1],\n          y = _toNumbers4$2 === void 0 ? x : _toNumbers4$2;\n\n      return new Point(x, y);\n    }\n  }, {\n    key: \"parsePath\",\n    value: function parsePath(path) {\n      var points = toNumbers(path);\n      var len = points.length;\n      var pathPoints = [];\n\n      for (var i = 0; i < len; i += 2) {\n        pathPoints.push(new Point(points[i], points[i + 1]));\n      }\n\n      return pathPoints;\n    }\n  }]);\n\n  return Point;\n}();\n\nvar Mouse = /*#__PURE__*/function () {\n  function Mouse(screen) {\n    _classCallCheck(this, Mouse);\n\n    this.screen = screen;\n    this.working = false;\n    this.events = [];\n    this.eventElements = [];\n    this.onClick = this.onClick.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n  }\n\n  _createClass(Mouse, [{\n    key: \"isWorking\",\n    value: function isWorking() {\n      return this.working;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.working) {\n        return;\n      }\n\n      var screen = this.screen,\n          onClick = this.onClick,\n          onMouseMove = this.onMouseMove;\n      var canvas = screen.ctx.canvas;\n      canvas.onclick = onClick;\n      canvas.onmousemove = onMouseMove;\n      this.working = true;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (!this.working) {\n        return;\n      }\n\n      var canvas = this.screen.ctx.canvas;\n      this.working = false;\n      canvas.onclick = null;\n      canvas.onmousemove = null;\n    }\n  }, {\n    key: \"hasEvents\",\n    value: function hasEvents() {\n      return this.working && this.events.length > 0;\n    }\n  }, {\n    key: \"runEvents\",\n    value: function runEvents() {\n      if (!this.working) {\n        return;\n      }\n\n      var document = this.screen,\n          events = this.events,\n          eventElements = this.eventElements;\n      var style = document.ctx.canvas.style;\n\n      if (style) {\n        style.cursor = '';\n      }\n\n      events.forEach(function (_ref, i) {\n        var run = _ref.run;\n        var element = eventElements[i];\n\n        while (element) {\n          run(element);\n          element = element.parent;\n        }\n      }); // done running, clear\n\n      this.events = [];\n      this.eventElements = [];\n    }\n  }, {\n    key: \"checkPath\",\n    value: function checkPath(element, ctx) {\n      if (!this.working || !ctx) {\n        return;\n      }\n\n      var events = this.events,\n          eventElements = this.eventElements;\n      events.forEach(function (_ref2, i) {\n        var x = _ref2.x,\n            y = _ref2.y;\n\n        if (!eventElements[i] && ctx.isPointInPath && ctx.isPointInPath(x, y)) {\n          eventElements[i] = element;\n        }\n      });\n    }\n  }, {\n    key: \"checkBoundingBox\",\n    value: function checkBoundingBox(element, boundingBox) {\n      if (!this.working || !boundingBox) {\n        return;\n      }\n\n      var events = this.events,\n          eventElements = this.eventElements;\n      events.forEach(function (_ref3, i) {\n        var x = _ref3.x,\n            y = _ref3.y;\n\n        if (!eventElements[i] && boundingBox.isPointInBox(x, y)) {\n          eventElements[i] = element;\n        }\n      });\n    }\n  }, {\n    key: \"mapXY\",\n    value: function mapXY(x, y) {\n      var _this$screen = this.screen,\n          window = _this$screen.window,\n          ctx = _this$screen.ctx;\n      var point = new Point(x, y);\n      var element = ctx.canvas;\n\n      while (element) {\n        point.x -= element.offsetLeft;\n        point.y -= element.offsetTop;\n        element = element.offsetParent;\n      }\n\n      if (window.scrollX) {\n        point.x += window.scrollX;\n      }\n\n      if (window.scrollY) {\n        point.y += window.scrollY;\n      }\n\n      return point;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(evt) {\n      var _this$mapXY = this.mapXY((evt || event).clientX, (evt || event).clientY),\n          x = _this$mapXY.x,\n          y = _this$mapXY.y;\n\n      this.events.push({\n        type: 'onclick',\n        x: x,\n        y: y,\n        run: function run(event) {\n          if (event.onClick) {\n            event.onClick();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove(evt) {\n      var _this$mapXY2 = this.mapXY((evt || event).clientX, (evt || event).clientY),\n          x = _this$mapXY2.x,\n          y = _this$mapXY2.y;\n\n      this.events.push({\n        type: 'onmousemove',\n        x: x,\n        y: y,\n        run: function run(event) {\n          if (event.onMouseMove) {\n            event.onMouseMove();\n          }\n        }\n      });\n    }\n  }]);\n\n  return Mouse;\n}();\n\nvar defaultWindow = typeof window !== 'undefined' ? window : null;\nvar defaultFetch = typeof fetch !== 'undefined' ? fetch.bind(void 0) // `fetch` depends on context: `someObject.fetch(...)` will throw error.\n: null;\n\nvar Screen = /*#__PURE__*/function () {\n  function Screen(ctx) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$fetch = _ref.fetch,\n        fetch = _ref$fetch === void 0 ? defaultFetch : _ref$fetch,\n        _ref$window = _ref.window,\n        window = _ref$window === void 0 ? defaultWindow : _ref$window;\n\n    _classCallCheck(this, Screen);\n\n    this.ctx = ctx;\n    this.FRAMERATE = 30;\n    this.MAX_VIRTUAL_PIXELS = 30000;\n    this.CLIENT_WIDTH = 800;\n    this.CLIENT_HEIGHT = 600;\n    this.viewPort = new ViewPort();\n    this.mouse = new Mouse(this);\n    this.animations = [];\n    this.waits = [];\n    this.frameDuration = 0;\n    this.isReadyLock = false;\n    this.isFirstRender = true;\n    this.intervalId = null;\n    this.window = window;\n    this.fetch = fetch;\n  }\n\n  _createClass(Screen, [{\n    key: \"wait\",\n    value: function wait(checker) {\n      this.waits.push(checker);\n    }\n  }, {\n    key: \"ready\",\n    value: function ready() {\n      if (!this.readyPromise) {\n        return Promise.resolve();\n      }\n\n      return this.readyPromise;\n    }\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      if (this.isReadyLock) {\n        return true;\n      }\n\n      var isReadyLock = this.waits.every(function (_) {\n        return _();\n      });\n\n      if (isReadyLock) {\n        this.waits = [];\n\n        if (this.resolveReady) {\n          this.resolveReady();\n        }\n      }\n\n      this.isReadyLock = isReadyLock;\n      return isReadyLock;\n    }\n  }, {\n    key: \"setDefaults\",\n    value: function setDefaults(ctx) {\n      // initial values and defaults\n      ctx.strokeStyle = 'rgba(0,0,0,0)';\n      ctx.lineCap = 'butt';\n      ctx.lineJoin = 'miter';\n      ctx.miterLimit = 4;\n    }\n  }, {\n    key: \"setViewBox\",\n    value: function setViewBox(_ref2) {\n      var document = _ref2.document,\n          ctx = _ref2.ctx,\n          aspectRatio = _ref2.aspectRatio,\n          width = _ref2.width,\n          desiredWidth = _ref2.desiredWidth,\n          height = _ref2.height,\n          desiredHeight = _ref2.desiredHeight,\n          _ref2$minX = _ref2.minX,\n          minX = _ref2$minX === void 0 ? 0 : _ref2$minX,\n          _ref2$minY = _ref2.minY,\n          minY = _ref2$minY === void 0 ? 0 : _ref2$minY,\n          refX = _ref2.refX,\n          refY = _ref2.refY,\n          _ref2$clip = _ref2.clip,\n          clip = _ref2$clip === void 0 ? false : _ref2$clip,\n          _ref2$clipX = _ref2.clipX,\n          clipX = _ref2$clipX === void 0 ? 0 : _ref2$clipX,\n          _ref2$clipY = _ref2.clipY,\n          clipY = _ref2$clipY === void 0 ? 0 : _ref2$clipY;\n      // aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n      var cleanAspectRatio = compressSpaces(aspectRatio).replace(/^defer\\s/, ''); // ignore defer\n\n      var _cleanAspectRatio$spl = cleanAspectRatio.split(' '),\n          _cleanAspectRatio$spl2 = _slicedToArray(_cleanAspectRatio$spl, 2),\n          aspectRatioAlign = _cleanAspectRatio$spl2[0],\n          aspectRatioMeetOrSlice = _cleanAspectRatio$spl2[1];\n\n      var align = aspectRatioAlign || 'xMidYMid';\n      var meetOrSlice = aspectRatioMeetOrSlice || 'meet'; // calculate scale\n\n      var scaleX = width / desiredWidth;\n      var scaleY = height / desiredHeight;\n      var scaleMin = Math.min(scaleX, scaleY);\n      var scaleMax = Math.max(scaleX, scaleY);\n      var finalDesiredWidth = desiredWidth;\n      var finalDesiredHeight = desiredHeight;\n\n      if (meetOrSlice === 'meet') {\n        finalDesiredWidth *= scaleMin;\n        finalDesiredHeight *= scaleMin;\n      }\n\n      if (meetOrSlice === 'slice') {\n        finalDesiredWidth *= scaleMax;\n        finalDesiredHeight *= scaleMax;\n      }\n\n      var refXProp = new Property(document, 'refX', refX);\n      var refYProp = new Property(document, 'refY', refY);\n      var hasRefs = refXProp.hasValue() && refYProp.hasValue();\n\n      if (hasRefs) {\n        ctx.translate(-scaleMin * refXProp.getPixels('x'), -scaleMin * refYProp.getPixels('y'));\n      }\n\n      if (clip) {\n        var scaledClipX = scaleMin * clipX;\n        var scaledClipY = scaleMin * clipY;\n        ctx.beginPath();\n        ctx.moveTo(scaledClipX, scaledClipY);\n        ctx.lineTo(width, scaledClipY);\n        ctx.lineTo(width, height);\n        ctx.lineTo(scaledClipX, height);\n        ctx.closePath();\n        ctx.clip();\n      }\n\n      if (!hasRefs) {\n        var isMeetMinY = meetOrSlice === 'meet' && scaleMin === scaleY;\n        var isSliceMaxY = meetOrSlice === 'slice' && scaleMax === scaleY;\n        var isMeetMinX = meetOrSlice === 'meet' && scaleMin === scaleX;\n        var isSliceMaxX = meetOrSlice === 'slice' && scaleMax === scaleX;\n\n        if (/^xMid/.test(align) && (isMeetMinY || isSliceMaxY)) {\n          ctx.translate(width / 2.0 - finalDesiredWidth / 2.0, 0);\n        }\n\n        if (/YMid$/.test(align) && (isMeetMinX || isSliceMaxX)) {\n          ctx.translate(0, height / 2.0 - finalDesiredHeight / 2.0);\n        }\n\n        if (/^xMax/.test(align) && (isMeetMinY || isSliceMaxY)) {\n          ctx.translate(width - finalDesiredWidth, 0);\n        }\n\n        if (/YMax$/.test(align) && (isMeetMinX || isSliceMaxX)) {\n          ctx.translate(0, height - finalDesiredHeight);\n        }\n      } // scale\n\n\n      switch (true) {\n        case align === 'none':\n          ctx.scale(scaleX, scaleY);\n          break;\n\n        case meetOrSlice === 'meet':\n          ctx.scale(scaleMin, scaleMin);\n          break;\n\n        case meetOrSlice === 'slice':\n          ctx.scale(scaleMax, scaleMax);\n          break;\n      } // translate\n\n\n      ctx.translate(-minX, -minY);\n    }\n  }, {\n    key: \"start\",\n    value: function start(element) {\n      var _this = this;\n\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$enableRedraw = _ref3.enableRedraw,\n          enableRedraw = _ref3$enableRedraw === void 0 ? false : _ref3$enableRedraw,\n          _ref3$ignoreMouse = _ref3.ignoreMouse,\n          ignoreMouse = _ref3$ignoreMouse === void 0 ? false : _ref3$ignoreMouse,\n          _ref3$ignoreAnimation = _ref3.ignoreAnimation,\n          ignoreAnimation = _ref3$ignoreAnimation === void 0 ? false : _ref3$ignoreAnimation,\n          _ref3$ignoreDimension = _ref3.ignoreDimensions,\n          ignoreDimensions = _ref3$ignoreDimension === void 0 ? false : _ref3$ignoreDimension,\n          _ref3$ignoreClear = _ref3.ignoreClear,\n          ignoreClear = _ref3$ignoreClear === void 0 ? false : _ref3$ignoreClear,\n          forceRedraw = _ref3.forceRedraw,\n          scaleWidth = _ref3.scaleWidth,\n          scaleHeight = _ref3.scaleHeight,\n          offsetX = _ref3.offsetX,\n          offsetY = _ref3.offsetY;\n\n      var FRAMERATE = this.FRAMERATE,\n          mouse = this.mouse;\n      var frameDuration = 1000 / FRAMERATE;\n      this.frameDuration = frameDuration;\n      this.readyPromise = new Promise(function (resolve) {\n        _this.resolveReady = resolve;\n      });\n\n      if (this.isReady()) {\n        this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n      }\n\n      if (!enableRedraw) {\n        return;\n      }\n\n      var now = Date.now();\n      var then = now;\n      var delta = 0;\n\n      var tick = function tick() {\n        now = Date.now();\n        delta = now - then;\n\n        if (delta >= frameDuration) {\n          then = now - delta % frameDuration;\n\n          if (_this.shouldUpdate(ignoreAnimation, forceRedraw)) {\n            _this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n\n            mouse.runEvents();\n          }\n        }\n\n        _this.intervalId = requestAnimationFrame(tick);\n      };\n\n      if (!ignoreMouse) {\n        mouse.start();\n      }\n\n      this.intervalId = requestAnimationFrame(tick);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.intervalId) {\n        requestAnimationFrame.cancel(this.intervalId);\n        this.intervalId = null;\n      }\n\n      this.mouse.stop();\n    }\n  }, {\n    key: \"shouldUpdate\",\n    value: function shouldUpdate(ignoreAnimation, forceRedraw) {\n      // need update from animations?\n      if (!ignoreAnimation) {\n        var frameDuration = this.frameDuration;\n        var shouldUpdate = this.animations.reduce(function (shouldUpdate, animation) {\n          return animation.update(frameDuration) || shouldUpdate;\n        }, false);\n\n        if (shouldUpdate) {\n          return true;\n        }\n      } // need update from redraw?\n\n\n      if (typeof forceRedraw === 'function' && forceRedraw()) {\n        return true;\n      }\n\n      if (!this.isReadyLock && this.isReady()) {\n        return true;\n      } // need update from mouse events?\n\n\n      if (this.mouse.hasEvents()) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY) {\n      var CLIENT_WIDTH = this.CLIENT_WIDTH,\n          CLIENT_HEIGHT = this.CLIENT_HEIGHT,\n          viewPort = this.viewPort,\n          ctx = this.ctx,\n          isFirstRender = this.isFirstRender;\n      var canvas = ctx.canvas;\n      viewPort.clear();\n\n      if (canvas.width && canvas.height) {\n        viewPort.setCurrent(canvas.width, canvas.height);\n      } else {\n        viewPort.setCurrent(CLIENT_WIDTH, CLIENT_HEIGHT);\n      }\n\n      var widthStyle = element.getStyle('width');\n      var heightStyle = element.getStyle('height');\n\n      if (!ignoreDimensions && (isFirstRender || typeof scaleWidth !== 'number' && typeof scaleHeight !== 'number')) {\n        // set canvas size\n        if (widthStyle.hasValue()) {\n          canvas.width = widthStyle.getPixels('x');\n\n          if (canvas.style) {\n            canvas.style.width = \"\".concat(canvas.width, \"px\");\n          }\n        }\n\n        if (heightStyle.hasValue()) {\n          canvas.height = heightStyle.getPixels('y');\n\n          if (canvas.style) {\n            canvas.style.height = \"\".concat(canvas.height, \"px\");\n          }\n        }\n      }\n\n      var cWidth = canvas.clientWidth || canvas.width;\n      var cHeight = canvas.clientHeight || canvas.height;\n\n      if (ignoreDimensions && widthStyle.hasValue() && heightStyle.hasValue()) {\n        cWidth = widthStyle.getPixels('x');\n        cHeight = heightStyle.getPixels('y');\n      }\n\n      viewPort.setCurrent(cWidth, cHeight);\n\n      if (typeof offsetX === 'number') {\n        element.getAttribute('x', true).setValue(offsetX);\n      }\n\n      if (typeof offsetY === 'number') {\n        element.getAttribute('y', true).setValue(offsetY);\n      }\n\n      if (typeof scaleWidth === 'number' || typeof scaleHeight === 'number') {\n        var viewBox = toNumbers(element.getAttribute('viewBox').getString());\n        var xRatio = 0;\n        var yRatio = 0;\n\n        if (typeof scaleWidth === 'number') {\n          var _widthStyle = element.getStyle('width');\n\n          if (_widthStyle.hasValue()) {\n            xRatio = _widthStyle.getPixels('x') / scaleWidth;\n          } else if (!isNaN(viewBox[2])) {\n            xRatio = viewBox[2] / scaleWidth;\n          }\n        }\n\n        if (typeof scaleHeight === 'number') {\n          var _heightStyle = element.getStyle('height');\n\n          if (_heightStyle.hasValue()) {\n            yRatio = _heightStyle.getPixels('y') / scaleHeight;\n          } else if (!isNaN(viewBox[3])) {\n            yRatio = viewBox[3] / scaleHeight;\n          }\n        }\n\n        if (!xRatio) {\n          xRatio = yRatio;\n        }\n\n        if (!yRatio) {\n          yRatio = xRatio;\n        }\n\n        element.getAttribute('width', true).setValue(scaleWidth);\n        element.getAttribute('height', true).setValue(scaleHeight);\n        var transformStyle = element.getStyle('transform', true, true);\n        transformStyle.setValue(\"\".concat(transformStyle.getString(), \" scale(\").concat(1.0 / xRatio, \", \").concat(1.0 / yRatio, \")\"));\n      } // clear and render\n\n\n      if (!ignoreClear) {\n        ctx.clearRect(0, 0, cWidth, cHeight);\n      }\n\n      element.render(ctx);\n\n      if (isFirstRender) {\n        this.isFirstRender = false;\n      }\n    }\n  }]);\n\n  return Screen;\n}();\nScreen.defaultWindow = defaultWindow;\nScreen.defaultFetch = defaultFetch;\n\nvar defaultFetch$1 = Screen.defaultFetch;\nvar DefaultDOMParser = typeof DOMParser !== 'undefined' ? DOMParser : null;\n\nvar Parser = /*#__PURE__*/function () {\n  function Parser() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$fetch = _ref.fetch,\n        fetch = _ref$fetch === void 0 ? defaultFetch$1 : _ref$fetch,\n        _ref$DOMParser = _ref.DOMParser,\n        DOMParser = _ref$DOMParser === void 0 ? DefaultDOMParser : _ref$DOMParser;\n\n    _classCallCheck(this, Parser);\n\n    this.fetch = fetch;\n    this.DOMParser = DOMParser;\n  }\n\n  _createClass(Parser, [{\n    key: \"parse\",\n    value: function () {\n      var _parse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resource) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!/^</.test(resource)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.parseFromString(resource));\n\n              case 2:\n                return _context.abrupt(\"return\", this.load(resource));\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function parse(_x) {\n        return _parse.apply(this, arguments);\n      }\n\n      return parse;\n    }()\n  }, {\n    key: \"parseFromString\",\n    value: function parseFromString(xml) {\n      var parser = new this.DOMParser();\n\n      try {\n        return this.checkDocument(parser.parseFromString(xml, 'image/svg+xml'));\n      } catch (err) {\n        return this.checkDocument(parser.parseFromString(xml, 'text/xml'));\n      }\n    }\n  }, {\n    key: \"checkDocument\",\n    value: function checkDocument(document) {\n      var parserError = document.getElementsByTagName('parsererror')[0];\n\n      if (parserError) {\n        throw new Error(parserError.textContent);\n      }\n\n      return document;\n    }\n  }, {\n    key: \"load\",\n    value: function () {\n      var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url) {\n        var response, xml;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.fetch(url);\n\n              case 2:\n                response = _context2.sent;\n                _context2.next = 5;\n                return response.text();\n\n              case 5:\n                xml = _context2.sent;\n                return _context2.abrupt(\"return\", this.parseFromString(xml));\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function load(_x2) {\n        return _load.apply(this, arguments);\n      }\n\n      return load;\n    }()\n  }]);\n\n  return Parser;\n}();\n\nvar Translate = /*#__PURE__*/function () {\n  function Translate(_, point) {\n    _classCallCheck(this, Translate);\n\n    this.type = 'translate';\n    this.point = null;\n    this.point = Point.parse(point);\n  }\n\n  _createClass(Translate, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var _this$point = this.point,\n          x = _this$point.x,\n          y = _this$point.y;\n      ctx.translate(x || 0.0, y || 0.0);\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var _this$point2 = this.point,\n          x = _this$point2.x,\n          y = _this$point2.y;\n      ctx.translate(-1.0 * x || 0.0, -1.0 * y || 0.0);\n    }\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      var _this$point3 = this.point,\n          x = _this$point3.x,\n          y = _this$point3.y;\n      point.applyTransform([1, 0, 0, 1, x || 0.0, y || 0.0]);\n    }\n  }]);\n\n  return Translate;\n}();\n\nvar Rotate = /*#__PURE__*/function () {\n  function Rotate(document, rotate) {\n    var transformOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n    _classCallCheck(this, Rotate);\n\n    this.type = 'rotate';\n    this.angle = null;\n    this.cx = 0;\n    this.cy = 0;\n    var numbers = toNumbers(rotate);\n    this.angle = new Property(document, 'angle', numbers[0]);\n    this.cx = (numbers[1] || 0) + (transformOrigin[0] || 0);\n    this.cy = (numbers[2] || 0) + (transformOrigin[1] || 0);\n  }\n\n  _createClass(Rotate, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var cx = this.cx,\n          cy = this.cy,\n          angle = this.angle;\n      ctx.translate(cx, cy);\n      ctx.rotate(angle.getRadians());\n      ctx.translate(-cx, -cy);\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var cx = this.cx,\n          cy = this.cy,\n          angle = this.angle;\n      ctx.translate(cx, cy);\n      ctx.rotate(-1.0 * angle.getRadians());\n      ctx.translate(-cx, -cy);\n    }\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      var cx = this.cx,\n          cy = this.cy,\n          angle = this.angle;\n      var rad = angle.getRadians();\n      point.applyTransform([1, 0, 0, 1, cx || 0.0, cy || 0.0 // this.p.y\n      ]);\n      point.applyTransform([Math.cos(rad), Math.sin(rad), -Math.sin(rad), Math.cos(rad), 0, 0]);\n      point.applyTransform([1, 0, 0, 1, -cx || 0.0, -cy || 0.0 // -this.p.y\n      ]);\n    }\n  }]);\n\n  return Rotate;\n}();\n\nvar Scale = /*#__PURE__*/function () {\n  function Scale(_, scale) {\n    _classCallCheck(this, Scale);\n\n    this.type = 'scale';\n    this.scale = null;\n    var scaleSize = Point.parseScale(scale); // Workaround for node-canvas\n\n    if (scaleSize.x === 0 || scaleSize.y === 0) {\n      scaleSize.x = PSEUDO_ZERO;\n      scaleSize.y = PSEUDO_ZERO;\n    }\n\n    this.scale = scaleSize;\n  }\n\n  _createClass(Scale, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var _this$scale = this.scale,\n          x = _this$scale.x,\n          y = _this$scale.y;\n      ctx.scale(x, y || x);\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var _this$scale2 = this.scale,\n          x = _this$scale2.x,\n          y = _this$scale2.y;\n      ctx.scale(1.0 / x, 1.0 / y || x);\n    }\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      var _this$scale3 = this.scale,\n          x = _this$scale3.x,\n          y = _this$scale3.y;\n      point.applyTransform([x || 0.0, 0, 0, y || 0.0, 0, 0]);\n    }\n  }]);\n\n  return Scale;\n}();\n\nvar Matrix = /*#__PURE__*/function () {\n  function Matrix(_, matrix) {\n    _classCallCheck(this, Matrix);\n\n    this.type = 'matrix';\n    this.matrix = [];\n    this.matrix = toNumbers(matrix);\n  }\n\n  _createClass(Matrix, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var matrix = this.matrix;\n      ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var matrix = this.matrix;\n      var a = matrix[0];\n      var b = matrix[2];\n      var c = matrix[4];\n      var d = matrix[1];\n      var e = matrix[3];\n      var f = matrix[5];\n      var g = 0.0;\n      var h = 0.0;\n      var i = 1.0;\n      var det = 1 / (a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g));\n      ctx.transform(det * (e * i - f * h), det * (f * g - d * i), det * (c * h - b * i), det * (a * i - c * g), det * (b * f - c * e), det * (c * d - a * f));\n    }\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      point.applyTransform(this.matrix);\n    }\n  }]);\n\n  return Matrix;\n}();\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Skew = /*#__PURE__*/function (_Matrix) {\n  _inherits(Skew, _Matrix);\n\n  var _super = _createSuper(Skew);\n\n  function Skew(document, skew) {\n    var _this;\n\n    _classCallCheck(this, Skew);\n\n    _this = _super.call(this, document, skew);\n    _this.type = 'skew';\n    _this.angle = null;\n    _this.angle = new Property(document, 'angle', skew);\n    return _this;\n  }\n\n  return Skew;\n}(Matrix);\n\nfunction _createSuper$1(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$1()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar SkewX = /*#__PURE__*/function (_Skew) {\n  _inherits(SkewX, _Skew);\n\n  var _super = _createSuper$1(SkewX);\n\n  function SkewX(document, skew) {\n    var _this;\n\n    _classCallCheck(this, SkewX);\n\n    _this = _super.call(this, document, skew);\n    _this.type = 'skewX';\n    _this.matrix = [1, 0, Math.tan(_this.angle.getRadians()), 1, 0, 0];\n    return _this;\n  }\n\n  return SkewX;\n}(Skew);\n\nfunction _createSuper$2(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$2()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar SkewY = /*#__PURE__*/function (_Skew) {\n  _inherits(SkewY, _Skew);\n\n  var _super = _createSuper$2(SkewY);\n\n  function SkewY(document, skew) {\n    var _this;\n\n    _classCallCheck(this, SkewY);\n\n    _this = _super.call(this, document, skew);\n    _this.type = 'skewY';\n    _this.matrix = [1, Math.tan(_this.angle.getRadians()), 0, 1, 0, 0];\n    return _this;\n  }\n\n  return SkewY;\n}(Skew);\n\nfunction parseTransforms(transform) {\n  return compressSpaces(transform).trim().replace(/\\)([a-zA-Z])/g, ') $1').replace(/\\)(\\s?,\\s?)/g, ') ').split(/\\s(?=[a-z])/);\n}\n\nfunction parseTransform(transform) {\n  var _transform$split = transform.split('('),\n      _transform$split2 = _slicedToArray(_transform$split, 2),\n      type = _transform$split2[0],\n      value = _transform$split2[1];\n\n  return [type.trim(), value.trim().replace(')', '')];\n}\n\nvar Transform = /*#__PURE__*/function () {\n  function Transform(document, transform, transformOrigin) {\n    var _this = this;\n\n    _classCallCheck(this, Transform);\n\n    this.document = document;\n    this.transforms = [];\n    var data = parseTransforms(transform);\n    var originCoords = transformOrigin ? toNumbers(transformOrigin) : [];\n    data.forEach(function (transform) {\n      if (transform === 'none') {\n        return;\n      }\n\n      var _parseTransform = parseTransform(transform),\n          _parseTransform2 = _slicedToArray(_parseTransform, 2),\n          type = _parseTransform2[0],\n          value = _parseTransform2[1];\n\n      var TransformType = Transform.transformTypes[type];\n\n      if (typeof TransformType !== 'undefined') {\n        _this.transforms.push(new TransformType(_this.document, value, originCoords));\n      }\n    });\n  }\n\n  _createClass(Transform, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var transforms = this.transforms;\n      var len = transforms.length;\n\n      for (var i = 0; i < len; i++) {\n        transforms[i].apply(ctx);\n      }\n    }\n  }, {\n    key: \"unapply\",\n    value: function unapply(ctx) {\n      var transforms = this.transforms;\n      var len = transforms.length;\n\n      for (var i = len - 1; i >= 0; i--) {\n        transforms[i].unapply(ctx);\n      }\n    } // TODO: applyToPoint unused ... remove?\n\n  }, {\n    key: \"applyToPoint\",\n    value: function applyToPoint(point) {\n      var transforms = this.transforms;\n      var len = transforms.length;\n\n      for (var i = 0; i < len; i++) {\n        transforms[i].applyToPoint(point);\n      }\n    }\n  }], [{\n    key: \"fromElement\",\n    value: function fromElement(document, element) {\n      var transformStyle = element.getStyle('transform', false, true);\n      var transformOriginStyle = element.getStyle('transform-origin', false, true);\n\n      if (transformStyle.hasValue()) {\n        return new Transform(document, transformStyle.getString(), transformOriginStyle.getString());\n      }\n\n      return null;\n    }\n  }]);\n\n  return Transform;\n}();\nTransform.transformTypes = {\n  translate: Translate,\n  rotate: Rotate,\n  scale: Scale,\n  matrix: Matrix,\n  skewX: SkewX,\n  skewY: SkewY\n};\n\nvar Element = /*#__PURE__*/function () {\n  function Element(document, node) {\n    var _this = this;\n\n    var captureTextNodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    _classCallCheck(this, Element);\n\n    this.document = document;\n    this.node = node;\n    this.captureTextNodes = captureTextNodes;\n    this.attributes = {};\n    this.styles = {};\n    this.stylesSpecificity = {};\n    this.animationFrozen = false;\n    this.animationFrozenValue = '';\n    this.parent = null;\n    this.children = [];\n\n    if (!node || node.nodeType !== 1) {\n      // ELEMENT_NODE\n      return;\n    } // add attributes\n\n\n    Array.from(node.attributes).forEach(function (attribute) {\n      var nodeName = normalizeAttributeName(attribute.nodeName);\n      _this.attributes[nodeName] = new Property(document, nodeName, attribute.value);\n    });\n    this.addStylesFromStyleDefinition(); // add inline styles\n\n    if (this.getAttribute('style').hasValue()) {\n      var styles = this.getAttribute('style').getString().split(';').map(function (_) {\n        return _.trim();\n      });\n      styles.forEach(function (style) {\n        if (!style) {\n          return;\n        }\n\n        var _style$split$map = style.split(':').map(function (_) {\n          return _.trim();\n        }),\n            _style$split$map2 = _slicedToArray(_style$split$map, 2),\n            name = _style$split$map2[0],\n            value = _style$split$map2[1];\n\n        _this.styles[name] = new Property(document, name, value);\n      });\n    }\n\n    var definitions = document.definitions;\n    var id = this.getAttribute('id'); // add id\n\n    if (id.hasValue()) {\n      if (!definitions[id.getValue()]) {\n        definitions[id.getValue()] = this;\n      }\n    }\n\n    Array.from(node.childNodes).forEach(function (childNode) {\n      if (childNode.nodeType === 1) {\n        _this.addChild(childNode); // ELEMENT_NODE\n\n      } else if (captureTextNodes && (childNode.nodeType === 3 || childNode.nodeType === 4)) {\n        var textNode = document.createTextNode(childNode);\n\n        if (textNode.getText().length > 0) {\n          _this.addChild(textNode); // TEXT_NODE\n\n        }\n      }\n    });\n  }\n\n  _createClass(Element, [{\n    key: \"getAttribute\",\n    value: function getAttribute(name) {\n      var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var attr = this.attributes[name];\n\n      if (!attr && createIfNotExists) {\n        var _attr = new Property(this.document, name, '');\n\n        this.attributes[name] = _attr;\n        return _attr;\n      }\n\n      return attr || Property.empty(this.document);\n    }\n  }, {\n    key: \"getHrefAttribute\",\n    value: function getHrefAttribute() {\n      for (var key in this.attributes) {\n        if (key === 'href' || /:href$/.test(key)) {\n          return this.attributes[key];\n        }\n      }\n\n      return Property.empty(this.document);\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle(name) {\n      var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var skipAncestors = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var style = this.styles[name];\n\n      if (style) {\n        return style;\n      }\n\n      var attr = this.getAttribute(name);\n\n      if (attr && attr.hasValue()) {\n        this.styles[name] = attr; // move up to me to cache\n\n        return attr;\n      }\n\n      if (!skipAncestors) {\n        var parent = this.parent;\n\n        if (parent) {\n          var parentStyle = parent.getStyle(name);\n\n          if (parentStyle && parentStyle.hasValue()) {\n            return parentStyle;\n          }\n        }\n      }\n\n      if (createIfNotExists) {\n        var _style = new Property(this.document, name, '');\n\n        this.styles[name] = _style;\n        return _style;\n      }\n\n      return style || Property.empty(this.document);\n    }\n  }, {\n    key: \"render\",\n    value: function render(ctx) {\n      // don't render display=none\n      // don't render visibility=hidden\n      if (this.getStyle('display').getString() === 'none' || this.getStyle('visibility').getString() === 'hidden') {\n        return;\n      }\n\n      ctx.save();\n\n      if (this.getStyle('mask').hasValue()) {\n        // mask\n        var mask = this.getStyle('mask').getDefinition();\n\n        if (mask) {\n          this.applyEffects(ctx);\n          mask.apply(ctx, this);\n        }\n      } else if (this.getStyle('filter').getValue('none') !== 'none') {\n        // filter\n        var filter = this.getStyle('filter').getDefinition();\n\n        if (filter) {\n          this.applyEffects(ctx);\n          filter.apply(ctx, this);\n        }\n      } else {\n        this.setContext(ctx);\n        this.renderChildren(ctx);\n        this.clearContext(ctx);\n      }\n\n      ctx.restore();\n    }\n  }, {\n    key: \"setContext\",\n    value: function setContext(_) {}\n  }, {\n    key: \"applyEffects\",\n    value: function applyEffects(ctx) {\n      // transform\n      var transform = Transform.fromElement(this.document, this);\n\n      if (transform) {\n        transform.apply(ctx);\n      } // clip\n\n\n      var clipPathStyleProp = this.getStyle('clip-path', false, true);\n\n      if (clipPathStyleProp.hasValue()) {\n        var clip = clipPathStyleProp.getDefinition();\n\n        if (clip) {\n          clip.apply(ctx);\n        }\n      }\n    }\n  }, {\n    key: \"clearContext\",\n    value: function clearContext(_) {}\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      this.children.forEach(function (child) {\n        child.render(ctx);\n      });\n    }\n  }, {\n    key: \"addChild\",\n    value: function addChild(childNode) {\n      var child = childNode instanceof Element ? childNode : this.document.createElement(childNode);\n      child.parent = this;\n\n      if (!Element.ignoreChildTypes.includes(child.type)) {\n        this.children.push(child);\n      }\n    }\n  }, {\n    key: \"matchesSelector\",\n    value: function matchesSelector(selector) {\n      var node = this.node;\n\n      if (typeof node.matches === 'function') {\n        return node.matches(selector);\n      }\n\n      var styleClasses = node.getAttribute('class');\n\n      if (!styleClasses || styleClasses === '') {\n        return false;\n      }\n\n      return styleClasses.split(' ').some(function (styleClass) {\n        if (\".\".concat(styleClass) === selector) {\n          return true;\n        }\n      });\n    }\n  }, {\n    key: \"addStylesFromStyleDefinition\",\n    value: function addStylesFromStyleDefinition() {\n      var _this$document = this.document,\n          styles = _this$document.styles,\n          stylesSpecificity = _this$document.stylesSpecificity;\n\n      for (var selector in styles) {\n        if (selector[0] !== '@' && this.matchesSelector(selector)) {\n          var style = styles[selector];\n          var specificity = stylesSpecificity[selector];\n\n          if (style) {\n            for (var name in style) {\n              var existingSpecificity = this.stylesSpecificity[name];\n\n              if (typeof existingSpecificity === 'undefined') {\n                existingSpecificity = '000';\n              }\n\n              if (specificity >= existingSpecificity) {\n                this.styles[name] = style[name];\n                this.stylesSpecificity[name] = specificity;\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"removeStyles\",\n    value: function removeStyles(element, ignoreStyles) {\n      var toRestore = ignoreStyles.reduce(function (toRestore, name) {\n        var styleProp = element.getStyle(name);\n\n        if (!styleProp.hasValue()) {\n          return toRestore;\n        }\n\n        var value = styleProp.getString();\n        styleProp.setValue('');\n        return [].concat(_toConsumableArray(toRestore), [[name, value]]);\n      }, []);\n      return toRestore;\n    }\n  }, {\n    key: \"restoreStyles\",\n    value: function restoreStyles(element, styles) {\n      styles.forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            name = _ref2[0],\n            value = _ref2[1];\n\n        element.getStyle(name, true).setValue(value);\n      });\n    }\n  }]);\n\n  return Element;\n}();\nElement.ignoreChildTypes = ['title'];\n\nfunction _createSuper$3(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$3()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar UnknownElement = /*#__PURE__*/function (_Element) {\n  _inherits(UnknownElement, _Element);\n\n  var _super = _createSuper$3(UnknownElement);\n\n  function UnknownElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, UnknownElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n\n    return _this;\n  }\n\n  return UnknownElement;\n}(Element);\n\nfunction wrapFontFamily(fontFamily) {\n  var trimmed = fontFamily.trim();\n  return /^('|\")/.test(trimmed) ? trimmed : \"\\\"\".concat(trimmed, \"\\\"\");\n}\n\nfunction prepareFontFamily(fontFamily) {\n  return typeof process === 'undefined' ? fontFamily : fontFamily.trim().split(',').map(wrapFontFamily).join(',');\n}\n/**\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\n */\n\n\nfunction prepareFontStyle(fontStyle) {\n  if (!fontStyle) {\n    return '';\n  }\n\n  var targetFontStyle = fontStyle.trim().toLowerCase();\n\n  switch (targetFontStyle) {\n    case 'normal':\n    case 'italic':\n    case 'oblique':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontStyle;\n\n    default:\n      if (/^oblique\\s+(-|)\\d+deg$/.test(targetFontStyle)) {\n        return targetFontStyle;\n      }\n\n      return '';\n  }\n}\n/**\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\n */\n\n\nfunction prepareFontWeight(fontWeight) {\n  if (!fontWeight) {\n    return '';\n  }\n\n  var targetFontWeight = fontWeight.trim().toLowerCase();\n\n  switch (targetFontWeight) {\n    case 'normal':\n    case 'bold':\n    case 'lighter':\n    case 'bolder':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontWeight;\n\n    default:\n      if (/^[\\d.]+$/.test(targetFontWeight)) {\n        return targetFontWeight;\n      }\n\n      return '';\n  }\n}\n\nvar Font = /*#__PURE__*/function () {\n  function Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {\n    _classCallCheck(this, Font);\n\n    var inheritFont = inherit ? typeof inherit === 'string' ? Font.parse(inherit) : inherit : {};\n    this.fontFamily = fontFamily || inheritFont.fontFamily;\n    this.fontSize = fontSize || inheritFont.fontSize;\n    this.fontStyle = fontStyle || inheritFont.fontStyle;\n    this.fontWeight = fontWeight || inheritFont.fontWeight;\n    this.fontVariant = fontVariant || inheritFont.fontVariant;\n  }\n\n  _createClass(Font, [{\n    key: \"toString\",\n    value: function toString() {\n      return [prepareFontStyle(this.fontStyle), this.fontVariant, prepareFontWeight(this.fontWeight), this.fontSize, // Wrap fontFamily only on nodejs and only for canvas.ctx\n      prepareFontFamily(this.fontFamily)].join(' ').trim();\n    }\n  }], [{\n    key: \"parse\",\n    value: function parse() {\n      var font = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var inherit = arguments.length > 1 ? arguments[1] : undefined;\n      var fontStyle = '';\n      var fontVariant = '';\n      var fontWeight = '';\n      var fontSize = '';\n      var fontFamily = '';\n      var parts = compressSpaces(font).trim().split(' ');\n      var set = {\n        fontSize: false,\n        fontStyle: false,\n        fontWeight: false,\n        fontVariant: false\n      };\n      parts.forEach(function (part) {\n        switch (true) {\n          case !set.fontStyle && Font.styles.includes(part):\n            if (part !== 'inherit') {\n              fontStyle = part;\n            }\n\n            set.fontStyle = true;\n            break;\n\n          case !set.fontVariant && Font.variants.includes(part):\n            if (part !== 'inherit') {\n              fontVariant = part;\n            }\n\n            set.fontStyle = true;\n            set.fontVariant = true;\n            break;\n\n          case !set.fontWeight && Font.weights.includes(part):\n            if (part !== 'inherit') {\n              fontWeight = part;\n            }\n\n            set.fontStyle = true;\n            set.fontVariant = true;\n            set.fontWeight = true;\n            break;\n\n          case !set.fontSize:\n            if (part !== 'inherit') {\n              var _part$split = part.split('/');\n\n              var _part$split2 = _slicedToArray(_part$split, 1);\n\n              fontSize = _part$split2[0];\n            }\n\n            set.fontStyle = true;\n            set.fontVariant = true;\n            set.fontWeight = true;\n            set.fontSize = true;\n            break;\n\n          default:\n            if (part !== 'inherit') {\n              fontFamily += part;\n            }\n\n        }\n      });\n      return new Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit);\n    }\n  }]);\n\n  return Font;\n}();\nFont.styles = 'normal|italic|oblique|inherit';\nFont.variants = 'normal|small-caps|inherit';\nFont.weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';\n\nvar BoundingBox = /*#__PURE__*/function () {\n  function BoundingBox() {\n    var x1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.NaN;\n    var y1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.NaN;\n    var x2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Number.NaN;\n    var y2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Number.NaN;\n\n    _classCallCheck(this, BoundingBox);\n\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.addPoint(x1, y1);\n    this.addPoint(x2, y2);\n  }\n\n  _createClass(BoundingBox, [{\n    key: \"addPoint\",\n    value: function addPoint(x, y) {\n      if (typeof x !== 'undefined') {\n        if (isNaN(this.x1) || isNaN(this.x2)) {\n          this.x1 = x;\n          this.x2 = x;\n        }\n\n        if (x < this.x1) {\n          this.x1 = x;\n        }\n\n        if (x > this.x2) {\n          this.x2 = x;\n        }\n      }\n\n      if (typeof y !== 'undefined') {\n        if (isNaN(this.y1) || isNaN(this.y2)) {\n          this.y1 = y;\n          this.y2 = y;\n        }\n\n        if (y < this.y1) {\n          this.y1 = y;\n        }\n\n        if (y > this.y2) {\n          this.y2 = y;\n        }\n      }\n    }\n  }, {\n    key: \"addX\",\n    value: function addX(x) {\n      this.addPoint(x, null);\n    }\n  }, {\n    key: \"addY\",\n    value: function addY(y) {\n      this.addPoint(null, y);\n    }\n  }, {\n    key: \"addBoundingBox\",\n    value: function addBoundingBox(boundingBox) {\n      if (!boundingBox) {\n        return;\n      }\n\n      var x1 = boundingBox.x1,\n          y1 = boundingBox.y1,\n          x2 = boundingBox.x2,\n          y2 = boundingBox.y2;\n      this.addPoint(x1, y1);\n      this.addPoint(x2, y2);\n    }\n  }, {\n    key: \"sumCubic\",\n    value: function sumCubic(t, p0, p1, p2, p3) {\n      return Math.pow(1 - t, 3) * p0 + 3 * Math.pow(1 - t, 2) * t * p1 + 3 * (1 - t) * Math.pow(t, 2) * p2 + Math.pow(t, 3) * p3;\n    }\n  }, {\n    key: \"bezierCurveAdd\",\n    value: function bezierCurveAdd(forX, p0, p1, p2, p3) {\n      var b = 6 * p0 - 12 * p1 + 6 * p2;\n      var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n      var c = 3 * p1 - 3 * p0;\n\n      if (a === 0) {\n        if (b === 0) {\n          return;\n        }\n\n        var t = -c / b;\n\n        if (0 < t && t < 1) {\n          if (forX) {\n            this.addX(this.sumCubic(t, p0, p1, p2, p3));\n          } else {\n            this.addY(this.sumCubic(t, p0, p1, p2, p3));\n          }\n        }\n\n        return;\n      }\n\n      var b2ac = Math.pow(b, 2) - 4 * c * a;\n\n      if (b2ac < 0) {\n        return;\n      }\n\n      var t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n\n      if (0 < t1 && t1 < 1) {\n        if (forX) {\n          this.addX(this.sumCubic(t1, p0, p1, p2, p3));\n        } else {\n          this.addY(this.sumCubic(t1, p0, p1, p2, p3));\n        }\n      }\n\n      var t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n\n      if (0 < t2 && t2 < 1) {\n        if (forX) {\n          this.addX(this.sumCubic(t2, p0, p1, p2, p3));\n        } else {\n          this.addY(this.sumCubic(t2, p0, p1, p2, p3));\n        }\n      }\n    } // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n\n  }, {\n    key: \"addBezierCurve\",\n    value: function addBezierCurve(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {\n      this.addPoint(p0x, p0y);\n      this.addPoint(p3x, p3y);\n      this.bezierCurveAdd(true, p0x, p1x, p2x, p3x);\n      this.bezierCurveAdd(false, p0y, p1y, p2y, p3y);\n    }\n  }, {\n    key: \"addQuadraticCurve\",\n    value: function addQuadraticCurve(p0x, p0y, p1x, p1y, p2x, p2y) {\n      var cp1x = p0x + 2 / 3 * (p1x - p0x); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n      var cp1y = p0y + 2 / 3 * (p1y - p0y); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n      var cp2x = cp1x + 1 / 3 * (p2x - p0x); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n      var cp2y = cp1y + 1 / 3 * (p2y - p0y); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n      this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y);\n    }\n  }, {\n    key: \"isPointInBox\",\n    value: function isPointInBox(x, y) {\n      var x1 = this.x1,\n          y1 = this.y1,\n          x2 = this.x2,\n          y2 = this.y2;\n      return x1 <= x && x <= x2 && y1 <= y && y <= y2;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.x1;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.y1;\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.x2 - this.x1;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.y2 - this.y1;\n    }\n  }]);\n\n  return BoundingBox;\n}();\n\nfunction _createSuper$4(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$4()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$4() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar RenderedElement = /*#__PURE__*/function (_Element) {\n  _inherits(RenderedElement, _Element);\n\n  var _super = _createSuper$4(RenderedElement);\n\n  function RenderedElement() {\n    var _this;\n\n    _classCallCheck(this, RenderedElement);\n\n    _this = _super.apply(this, arguments);\n    _this.modifiedEmSizeStack = false;\n    return _this;\n  }\n\n  _createClass(RenderedElement, [{\n    key: \"calculateOpacity\",\n    value: function calculateOpacity() {\n      var opacity = 1.0; // tslint:disable-next-line: no-this-assignment\n\n      var element = this;\n\n      while (element) {\n        var opacityStyle = element.getStyle('opacity', false, true); // no ancestors on style call\n\n        if (opacityStyle.hasValue()) {\n          opacity *= opacityStyle.getNumber();\n        }\n\n        element = element.parent;\n      }\n\n      return opacity;\n    }\n  }, {\n    key: \"setContext\",\n    value: function setContext(ctx) {\n      var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!fromMeasure) {\n        // causes stack overflow when measuring text with gradients\n        // fill\n        var fillStyleProp = this.getStyle('fill');\n        var fillOpacityStyleProp = this.getStyle('fill-opacity');\n        var strokeStyleProp = this.getStyle('stroke');\n        var strokeOpacityProp = this.getStyle('stroke-opacity');\n\n        if (fillStyleProp.isUrlDefinition()) {\n          var fillStyle = fillStyleProp.getFillStyleDefinition(this, fillOpacityStyleProp);\n\n          if (fillStyle) {\n            ctx.fillStyle = fillStyle;\n          }\n        } else if (fillStyleProp.hasValue()) {\n          if (fillStyleProp.getString() === 'currentColor') {\n            fillStyleProp.setValue(this.getStyle('color').getColor());\n          }\n\n          var _fillStyle = fillStyleProp.getColor();\n\n          if (_fillStyle !== 'inherit') {\n            ctx.fillStyle = _fillStyle === 'none' ? 'rgba(0,0,0,0)' : _fillStyle;\n          }\n        }\n\n        if (fillOpacityStyleProp.hasValue()) {\n          var _fillStyle2 = new Property(this.document, 'fill', ctx.fillStyle).addOpacity(fillOpacityStyleProp).getColor();\n\n          ctx.fillStyle = _fillStyle2;\n        } // stroke\n\n\n        if (strokeStyleProp.isUrlDefinition()) {\n          var strokeStyle = strokeStyleProp.getFillStyleDefinition(this, strokeOpacityProp);\n\n          if (strokeStyle) {\n            ctx.strokeStyle = strokeStyle;\n          }\n        } else if (strokeStyleProp.hasValue()) {\n          if (strokeStyleProp.getString() === 'currentColor') {\n            strokeStyleProp.setValue(this.getStyle('color').getColor());\n          }\n\n          var _strokeStyle = strokeStyleProp.getString();\n\n          if (_strokeStyle !== 'inherit') {\n            ctx.strokeStyle = _strokeStyle === 'none' ? 'rgba(0,0,0,0)' : _strokeStyle;\n          }\n        }\n\n        if (strokeOpacityProp.hasValue()) {\n          var _strokeStyle2 = new Property(this.document, 'stroke', ctx.strokeStyle).addOpacity(strokeOpacityProp).getString();\n\n          ctx.strokeStyle = _strokeStyle2;\n        }\n\n        var strokeWidthStyleProp = this.getStyle('stroke-width');\n\n        if (strokeWidthStyleProp.hasValue()) {\n          var newLineWidth = strokeWidthStyleProp.getPixels();\n          ctx.lineWidth = !newLineWidth ? PSEUDO_ZERO // browsers don't respect 0 (or node-canvas? :-)\n          : newLineWidth;\n        }\n\n        var strokeLinecapStyleProp = this.getStyle('stroke-linecap');\n        var strokeLinejoinStyleProp = this.getStyle('stroke-linejoin');\n        var strokeMiterlimitProp = this.getStyle('stroke-miterlimit');\n        var pointOrderStyleProp = this.getStyle('paint-order');\n        var strokeDasharrayStyleProp = this.getStyle('stroke-dasharray');\n        var strokeDashoffsetProp = this.getStyle('stroke-dashoffset');\n\n        if (strokeLinecapStyleProp.hasValue()) {\n          ctx.lineCap = strokeLinecapStyleProp.getString();\n        }\n\n        if (strokeLinejoinStyleProp.hasValue()) {\n          ctx.lineJoin = strokeLinejoinStyleProp.getString();\n        }\n\n        if (strokeMiterlimitProp.hasValue()) {\n          ctx.miterLimit = strokeMiterlimitProp.getNumber();\n        }\n\n        if (pointOrderStyleProp.hasValue()) {\n          // ?\n          ctx.paintOrder = pointOrderStyleProp.getValue();\n        }\n\n        if (strokeDasharrayStyleProp.hasValue() && strokeDasharrayStyleProp.getString() !== 'none') {\n          var gaps = toNumbers(strokeDasharrayStyleProp.getString());\n\n          if (typeof ctx.setLineDash !== 'undefined') {\n            ctx.setLineDash(gaps);\n          } else if (typeof ctx.webkitLineDash !== 'undefined') {\n            ctx.webkitLineDash = gaps;\n          } else if (typeof ctx.mozDash !== 'undefined' && !(gaps.length === 1 && gaps[0] === 0)) {\n            ctx.mozDash = gaps;\n          }\n\n          var offset = strokeDashoffsetProp.getPixels();\n\n          if (typeof ctx.lineDashOffset !== 'undefined') {\n            ctx.lineDashOffset = offset;\n          } else if (typeof ctx.webkitLineDashOffset !== 'undefined') {\n            ctx.webkitLineDashOffset = offset;\n          } else if (typeof ctx.mozDashOffset !== 'undefined') {\n            ctx.mozDashOffset = offset;\n          }\n        }\n      } // font\n\n\n      this.modifiedEmSizeStack = false;\n\n      if (typeof ctx.font !== 'undefined') {\n        var fontStyleProp = this.getStyle('font');\n        var fontStyleStyleProp = this.getStyle('font-style');\n        var fontVariantStyleProp = this.getStyle('font-variant');\n        var fontWeightStyleProp = this.getStyle('font-weight');\n        var fontSizeStyleProp = this.getStyle('font-size');\n        var fontFamilyStyleProp = this.getStyle('font-family');\n        var font = new Font(fontStyleStyleProp.getString(), fontVariantStyleProp.getString(), fontWeightStyleProp.getString(), fontSizeStyleProp.hasValue() ? \"\".concat(fontSizeStyleProp.getPixels(true), \"px\") : '', fontFamilyStyleProp.getString(), Font.parse(fontStyleProp.getString(), ctx.font));\n        fontStyleStyleProp.setValue(font.fontStyle);\n        fontVariantStyleProp.setValue(font.fontVariant);\n        fontWeightStyleProp.setValue(font.fontWeight);\n        fontSizeStyleProp.setValue(font.fontSize);\n        fontFamilyStyleProp.setValue(font.fontFamily);\n        ctx.font = font.toString();\n\n        if (fontSizeStyleProp.isPixels()) {\n          this.document.emSize = fontSizeStyleProp.getPixels();\n          this.modifiedEmSizeStack = true;\n        }\n      }\n\n      if (!fromMeasure) {\n        // effects\n        this.applyEffects(ctx); // opacity\n\n        ctx.globalAlpha = this.calculateOpacity();\n      }\n    }\n  }, {\n    key: \"clearContext\",\n    value: function clearContext(ctx) {\n      _get(_getPrototypeOf(RenderedElement.prototype), \"clearContext\", this).call(this, ctx);\n\n      if (this.modifiedEmSizeStack) {\n        this.document.popEmSize();\n      }\n    }\n  }]);\n\n  return RenderedElement;\n}(Element);\n\nfunction _createSuper$5(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$5()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$5() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar TextElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(TextElement, _RenderedElement);\n\n  var _super = _createSuper$5(TextElement);\n\n  function TextElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, TextElement);\n\n    _this = _super.call(this, document, node, (this instanceof TextElement ? this.constructor : void 0) === TextElement ? true : captureTextNodes);\n    _this.type = 'text';\n    _this.x = 0;\n    _this.y = 0;\n    _this.measureCache = -1;\n    return _this;\n  }\n\n  _createClass(TextElement, [{\n    key: \"setContext\",\n    value: function setContext(ctx) {\n      var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      _get(_getPrototypeOf(TextElement.prototype), \"setContext\", this).call(this, ctx, fromMeasure);\n\n      var textBaseline = this.getStyle('dominant-baseline').getTextBaseline() || this.getStyle('alignment-baseline').getTextBaseline();\n\n      if (textBaseline) {\n        ctx.textBaseline = textBaseline;\n      }\n    }\n  }, {\n    key: \"initializeCoordinates\",\n    value: function initializeCoordinates(ctx) {\n      this.x = this.getAttribute('x').getPixels('x');\n      this.y = this.getAttribute('y').getPixels('y');\n      var dxAttr = this.getAttribute('dx');\n      var dyAttr = this.getAttribute('dy');\n\n      if (dxAttr.hasValue()) {\n        this.x += dxAttr.getPixels('x');\n      }\n\n      if (dyAttr.hasValue()) {\n        this.y += dyAttr.getPixels('y');\n      }\n\n      this.x += this.getAnchorDelta(ctx, this, 0);\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(ctx) {\n      var _this2 = this;\n\n      if (this.type !== 'text') {\n        return this.getTElementBoundingBox(ctx);\n      }\n\n      this.initializeCoordinates(ctx);\n      var boundingBox = null;\n      this.children.forEach(function (_, i) {\n        var childBoundingBox = _this2.getChildBoundingBox(ctx, _this2, _this2, i);\n\n        if (!boundingBox) {\n          boundingBox = childBoundingBox;\n        } else {\n          boundingBox.addBoundingBox(childBoundingBox);\n        }\n      });\n      return boundingBox;\n    }\n  }, {\n    key: \"getFontSize\",\n    value: function getFontSize() {\n      var document = this.document,\n          parent = this.parent;\n      var inheritFontSize = Font.parse(document.ctx.font).fontSize;\n      var fontSize = parent.getStyle('font-size').getNumber(inheritFontSize);\n      return fontSize;\n    }\n  }, {\n    key: \"getTElementBoundingBox\",\n    value: function getTElementBoundingBox(ctx) {\n      var fontSize = this.getFontSize();\n      return new BoundingBox(this.x, this.y - fontSize, this.x + this.measureText(ctx), this.y);\n    }\n  }, {\n    key: \"getGlyph\",\n    value: function getGlyph(font, text, i) {\n      var char = text[i];\n      var glyph = null;\n\n      if (font.isArabic) {\n        var len = text.length;\n        var prevChar = text[i - 1];\n        var nextChar = text[i + 1];\n        var arabicForm = 'isolated';\n\n        if ((i === 0 || prevChar === ' ') && i < len - 2 && nextChar !== ' ') {\n          arabicForm = 'terminal';\n        }\n\n        if (i > 0 && prevChar !== ' ' && i < len - 2 && nextChar !== ' ') {\n          arabicForm = 'medial';\n        }\n\n        if (i > 0 && prevChar !== ' ' && (i === len - 1 || nextChar === ' ')) {\n          arabicForm = 'initial';\n        }\n\n        if (typeof font.glyphs[char] !== 'undefined') {\n          glyph = font.glyphs[char][arabicForm];\n\n          if (!glyph && font.glyphs[char].type === 'glyph') {\n            glyph = font.glyphs[char];\n          }\n        }\n      } else {\n        glyph = font.glyphs[char];\n      }\n\n      if (!glyph) {\n        glyph = font.missingGlyph;\n      }\n\n      return glyph;\n    }\n  }, {\n    key: \"getText\",\n    value: function getText() {\n      return '';\n    }\n  }, {\n    key: \"getTextFromNode\",\n    value: function getTextFromNode(node) {\n      var textNode = node || this.node;\n      var childNodes = Array.from(textNode.parentNode.childNodes);\n      var index = childNodes.indexOf(textNode);\n      var lastIndex = childNodes.length - 1;\n      var text = compressSpaces(textNode.value || textNode.text || textNode.textContent || '');\n\n      if (index === 0) {\n        text = trimLeft(text);\n      }\n\n      if (index === lastIndex) {\n        text = trimRight(text);\n      }\n\n      return text;\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      var _this3 = this;\n\n      if (this.type !== 'text') {\n        this.renderTElementChildren(ctx);\n        return;\n      }\n\n      this.initializeCoordinates(ctx);\n      this.children.forEach(function (_, i) {\n        _this3.renderChild(ctx, _this3, _this3, i);\n      });\n      var mouse = this.document.screen.mouse; // Do not calc bounding box if mouse is not working.\n\n      if (mouse.isWorking()) {\n        mouse.checkBoundingBox(this, this.getBoundingBox(ctx));\n      }\n    }\n  }, {\n    key: \"renderTElementChildren\",\n    value: function renderTElementChildren(ctx) {\n      var document = this.document,\n          parent = this.parent;\n      var renderText = this.getText();\n      var customFont = parent.getStyle('font-family').getDefinition();\n\n      if (customFont) {\n        var unitsPerEm = customFont.fontFace.unitsPerEm;\n        var ctxFont = Font.parse(document.ctx.font);\n        var fontSize = parent.getStyle('font-size').getNumber(ctxFont.fontSize);\n        var fontStyle = parent.getStyle('font-style').getString(ctxFont.fontStyle);\n        var scale = fontSize / unitsPerEm;\n        var text = customFont.isRTL ? renderText.split('').reverse().join('') : renderText;\n        var dx = toNumbers(parent.getAttribute('dx').getString());\n        var len = text.length;\n\n        for (var i = 0; i < len; i++) {\n          var glyph = this.getGlyph(customFont, text, i);\n          ctx.translate(this.x, this.y);\n          ctx.scale(scale, -scale);\n          var lw = ctx.lineWidth;\n          ctx.lineWidth = ctx.lineWidth * unitsPerEm / fontSize;\n\n          if (fontStyle === 'italic') {\n            ctx.transform(1, 0, .4, 1, 0, 0);\n          }\n\n          glyph.render(ctx);\n\n          if (fontStyle === 'italic') {\n            ctx.transform(1, 0, -.4, 1, 0, 0);\n          }\n\n          ctx.lineWidth = lw;\n          ctx.scale(1 / scale, -1 / scale);\n          ctx.translate(-this.x, -this.y);\n          this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / unitsPerEm;\n\n          if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n            this.x += dx[i];\n          }\n        }\n\n        return;\n      }\n\n      var x = this.x,\n          y = this.y;\n\n      if (ctx.paintOrder === 'stroke') {\n        if (ctx.strokeStyle) {\n          ctx.strokeText(renderText, x, y);\n        }\n\n        if (ctx.fillStyle) {\n          ctx.fillText(renderText, x, y);\n        }\n      } else {\n        if (ctx.fillStyle) {\n          ctx.fillText(renderText, x, y);\n        }\n\n        if (ctx.strokeStyle) {\n          ctx.strokeText(renderText, x, y);\n        }\n      }\n    }\n  }, {\n    key: \"getAnchorDelta\",\n    value: function getAnchorDelta(ctx, parent, startI) {\n      var textAnchor = this.getStyle('text-anchor').getString('start');\n\n      if (textAnchor !== 'start') {\n        var children = parent.children;\n        var len = children.length;\n        var child = null;\n        var width = 0;\n\n        for (var i = startI; i < len; i++) {\n          child = children[i];\n\n          if (i > startI && child.getAttribute('x').hasValue() || child.getAttribute('text-anchor').hasValue()) {\n            break; // new group\n          }\n\n          width += child.measureTextRecursive(ctx);\n        }\n\n        return -1 * (textAnchor === 'end' ? width : width / 2.0);\n      }\n\n      return 0;\n    }\n  }, {\n    key: \"adjustChildCoordinates\",\n    value: function adjustChildCoordinates(ctx, textParent, parent, i) {\n      var child = parent.children[i];\n\n      if (typeof child.measureText !== 'function') {\n        return child;\n      }\n\n      ctx.save();\n      child.setContext(ctx, true);\n      var xAttr = child.getAttribute('x');\n      var yAttr = child.getAttribute('y');\n      var dxAttr = child.getAttribute('dx');\n      var dyAttr = child.getAttribute('dy');\n      var textAnchor = child.getAttribute('text-anchor').getString('start');\n\n      if (i === 0 && child.type !== 'textNode') {\n        if (!xAttr.hasValue()) {\n          xAttr.setValue(textParent.getAttribute('x').getValue('0'));\n        }\n\n        if (!yAttr.hasValue()) {\n          yAttr.setValue(textParent.getAttribute('y').getValue('0'));\n        }\n\n        if (!dxAttr.hasValue()) {\n          dxAttr.setValue(textParent.getAttribute('dx').getValue('0'));\n        }\n\n        if (!dyAttr.hasValue()) {\n          dyAttr.setValue(textParent.getAttribute('dy').getValue('0'));\n        }\n      }\n\n      if (xAttr.hasValue()) {\n        child.x = xAttr.getPixels('x') + textParent.getAnchorDelta(ctx, parent, i);\n\n        if (textAnchor !== 'start') {\n          var width = child.measureTextRecursive(ctx);\n          child.x += -1 * (textAnchor === 'end' ? width : width / 2.0);\n        }\n\n        if (dxAttr.hasValue()) {\n          child.x += dxAttr.getPixels('x');\n        }\n      } else {\n        if (textAnchor !== 'start') {\n          var _width = child.measureTextRecursive(ctx);\n\n          textParent.x += -1 * (textAnchor === 'end' ? _width : _width / 2.0);\n        }\n\n        if (dxAttr.hasValue()) {\n          textParent.x += dxAttr.getPixels('x');\n        }\n\n        child.x = textParent.x;\n      }\n\n      textParent.x = child.x + child.measureText(ctx);\n\n      if (yAttr.hasValue()) {\n        child.y = yAttr.getPixels('y');\n\n        if (dyAttr.hasValue()) {\n          child.y += dyAttr.getPixels('y');\n        }\n      } else {\n        if (dyAttr.hasValue()) {\n          textParent.y += dyAttr.getPixels('y');\n        }\n\n        child.y = textParent.y;\n      }\n\n      textParent.y = child.y;\n      child.clearContext(ctx);\n      ctx.restore();\n      return child;\n    }\n  }, {\n    key: \"getChildBoundingBox\",\n    value: function getChildBoundingBox(ctx, textParent, parent, i) {\n      var child = this.adjustChildCoordinates(ctx, textParent, parent, i);\n      var boundingBox = child.getBoundingBox(ctx);\n\n      if (!boundingBox) {\n        return null;\n      }\n\n      child.children.forEach(function (_, i) {\n        var childBoundingBox = textParent.getChildBoundingBox(ctx, textParent, child, i);\n        boundingBox.addBoundingBox(childBoundingBox);\n      });\n      return boundingBox;\n    }\n  }, {\n    key: \"renderChild\",\n    value: function renderChild(ctx, textParent, parent, i) {\n      var child = this.adjustChildCoordinates(ctx, textParent, parent, i);\n      child.render(ctx);\n      child.children.forEach(function (_, i) {\n        textParent.renderChild(ctx, textParent, child, i);\n      });\n    }\n  }, {\n    key: \"measureTextRecursive\",\n    value: function measureTextRecursive(ctx) {\n      var width = this.children.reduce(function (width, child) {\n        return width + child.measureTextRecursive(ctx);\n      }, this.measureText(ctx));\n      return width;\n    }\n  }, {\n    key: \"measureText\",\n    value: function measureText(ctx) {\n      var measureCache = this.measureCache;\n\n      if (~measureCache) {\n        return measureCache;\n      }\n\n      var renderText = this.getText();\n      var measure = this.measureTargetText(ctx, renderText);\n      this.measureCache = measure;\n      return measure;\n    }\n  }, {\n    key: \"measureTargetText\",\n    value: function measureTargetText(ctx, targetText) {\n      if (!targetText.length) {\n        return 0;\n      }\n\n      var parent = this.parent;\n      var customFont = parent.getStyle('font-family').getDefinition();\n\n      if (customFont) {\n        var fontSize = this.getFontSize();\n        var text = customFont.isRTL ? targetText.split('').reverse().join('') : targetText;\n        var dx = toNumbers(parent.getAttribute('dx').getString());\n        var len = text.length;\n        var _measure = 0;\n\n        for (var i = 0; i < len; i++) {\n          var glyph = this.getGlyph(customFont, text, i);\n          _measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;\n\n          if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n            _measure += dx[i];\n          }\n        }\n\n        return _measure;\n      }\n\n      if (!ctx.measureText) {\n        return targetText.length * 10;\n      }\n\n      ctx.save();\n      this.setContext(ctx, true);\n\n      var _ctx$measureText = ctx.measureText(targetText),\n          measure = _ctx$measureText.width;\n\n      this.clearContext(ctx);\n      ctx.restore();\n      return measure;\n    }\n  }]);\n\n  return TextElement;\n}(RenderedElement);\n\nfunction _createSuper$6(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$6()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$6() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar TSpanElement = /*#__PURE__*/function (_TextElement) {\n  _inherits(TSpanElement, _TextElement);\n\n  var _super = _createSuper$6(TSpanElement);\n\n  function TSpanElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, TSpanElement);\n\n    _this = _super.call(this, document, node, (this instanceof TSpanElement ? this.constructor : void 0) === TSpanElement ? true : captureTextNodes);\n    _this.type = 'tspan'; // if this node has children, then they own the text\n\n    _this.text = _this.children.length > 0 ? '' : _this.getTextFromNode();\n    return _this;\n  }\n\n  _createClass(TSpanElement, [{\n    key: \"getText\",\n    value: function getText() {\n      return this.text;\n    }\n  }]);\n\n  return TSpanElement;\n}(TextElement);\n\nfunction _createSuper$7(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$7()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$7() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar TextNode = /*#__PURE__*/function (_TSpanElement) {\n  _inherits(TextNode, _TSpanElement);\n\n  var _super = _createSuper$7(TextNode);\n\n  function TextNode() {\n    var _this;\n\n    _classCallCheck(this, TextNode);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'textNode';\n    return _this;\n  }\n\n  return TextNode;\n}(TSpanElement);\n\nfunction preparePath(path) {\n  var d = path.replace(/,/gm, ' ') // get rid of all commas\n  // As the end of a match can also be the start of the next match, we need to run this replace twice.\n  .replace(/([MmZzLlHhVvCcSsQqTtAa])([^\\s])/gm, '$1 $2') // suffix commands with spaces\n  .replace(/([MmZzLlHhVvCcSsQqTtAa])([^\\s])/gm, '$1 $2') // suffix commands with spaces\n  .replace(/([^\\s])([MmZzLlHhVvCcSsQqTtAa])/gm, '$1 $2') // prefix commands with spaces\n  .replace(/([0-9])([+\\-])/gm, '$1 $2') // separate digits on +- signs\n  // Again, we need to run this twice to find all occurances\n  .replace(/(\\.[0-9]*)(\\.)/gm, '$1 $2') // separate digits when they start with a comma\n  .replace(/(\\.[0-9]*)(\\.)/gm, '$1 $2') // separate digits when they start with a comma\n  .replace(/([Aa](?:\\s+(?:[0-9]*\\.)?[0-9]+){3})\\s+([01])\\s*([01])/gm, '$1 $2 $3 '); // shorthand elliptical arc path syntax\n\n  return compressSpaces(d).trim();\n}\n\nvar PathParser = /*#__PURE__*/function () {\n  function PathParser(path) {\n    _classCallCheck(this, PathParser);\n\n    this.control = null;\n    this.start = null;\n    this.current = null;\n    this.command = '';\n    this.tokens = [];\n    this.i = -1;\n    this.previousCommand = '';\n    this.points = [];\n    this.angles = [];\n    this.tokens = preparePath(path).split(' ');\n  }\n\n  _createClass(PathParser, [{\n    key: \"reset\",\n    value: function reset() {\n      this.i = -1;\n      this.command = '';\n      this.previousCommand = '';\n      this.start = new Point(0, 0);\n      this.control = new Point(0, 0);\n      this.current = new Point(0, 0);\n      this.points = [];\n      this.angles = [];\n    }\n  }, {\n    key: \"isEnd\",\n    value: function isEnd() {\n      var i = this.i,\n          tokens = this.tokens;\n      return i >= tokens.length - 1;\n    }\n  }, {\n    key: \"isCommandOrEnd\",\n    value: function isCommandOrEnd() {\n      if (this.isEnd()) {\n        return true;\n      }\n\n      var i = this.i,\n          tokens = this.tokens;\n      return /^[A-Za-z]$/.test(tokens[i + 1]);\n    }\n  }, {\n    key: \"isRelativeCommand\",\n    value: function isRelativeCommand() {\n      switch (this.command) {\n        case 'm':\n        case 'l':\n        case 'h':\n        case 'v':\n        case 'c':\n        case 's':\n        case 'q':\n        case 't':\n        case 'a':\n        case 'z':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getToken\",\n    value: function getToken() {\n      this.i++;\n      return this.tokens[this.i];\n    }\n  }, {\n    key: \"getScalar\",\n    value: function getScalar() {\n      return parseFloat(this.getToken());\n    }\n  }, {\n    key: \"nextCommand\",\n    value: function nextCommand() {\n      this.previousCommand = this.command;\n      this.command = this.getToken();\n    }\n  }, {\n    key: \"getPoint\",\n    value: function getPoint() {\n      var point = new Point(this.getScalar(), this.getScalar());\n      return this.makeAbsolute(point);\n    }\n  }, {\n    key: \"getAsControlPoint\",\n    value: function getAsControlPoint() {\n      var point = this.getPoint();\n      this.control = point;\n      return point;\n    }\n  }, {\n    key: \"getAsCurrentPoint\",\n    value: function getAsCurrentPoint() {\n      var point = this.getPoint();\n      this.current = point;\n      return point;\n    }\n  }, {\n    key: \"getReflectedControlPoint\",\n    value: function getReflectedControlPoint() {\n      var previousCommand = this.previousCommand.toLowerCase();\n\n      if (previousCommand !== 'c' && previousCommand !== 's' && previousCommand !== 'q' && previousCommand !== 't') {\n        return this.current;\n      } // reflect point\n\n\n      var _this$current = this.current,\n          cx = _this$current.x,\n          cy = _this$current.y,\n          _this$control = this.control,\n          ox = _this$control.x,\n          oy = _this$control.y;\n      var point = new Point(2 * cx - ox, 2 * cy - oy);\n      return point;\n    }\n  }, {\n    key: \"makeAbsolute\",\n    value: function makeAbsolute(point) {\n      if (this.isRelativeCommand()) {\n        var _this$current2 = this.current,\n            x = _this$current2.x,\n            y = _this$current2.y;\n        point.x += x;\n        point.y += y;\n      }\n\n      return point;\n    }\n  }, {\n    key: \"addMarker\",\n    value: function addMarker(point, from, priorTo) {\n      var points = this.points,\n          angles = this.angles; // if the last angle isn't filled in because we didn't have this point yet ...\n\n      if (priorTo && angles.length > 0 && !angles[angles.length - 1]) {\n        angles[angles.length - 1] = points[points.length - 1].angleTo(priorTo);\n      }\n\n      this.addMarkerAngle(point, from ? from.angleTo(point) : null);\n    }\n  }, {\n    key: \"addMarkerAngle\",\n    value: function addMarkerAngle(point, angle) {\n      this.points.push(point);\n      this.angles.push(angle);\n    }\n  }, {\n    key: \"getMarkerPoints\",\n    value: function getMarkerPoints() {\n      return this.points;\n    }\n  }, {\n    key: \"getMarkerAngles\",\n    value: function getMarkerAngles() {\n      var angles = this.angles;\n      var len = angles.length;\n\n      for (var i = 0; i < len; i++) {\n        if (!angles[i]) {\n          for (var j = i + 1; j < len; j++) {\n            if (angles[j]) {\n              angles[i] = angles[j];\n              break;\n            }\n          }\n        }\n      }\n\n      return angles;\n    }\n  }]);\n\n  return PathParser;\n}();\n\nfunction _createSuper$8(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$8()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$8() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar PathElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(PathElement, _RenderedElement);\n\n  var _super = _createSuper$8(PathElement);\n\n  function PathElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, PathElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'path';\n    _this.pathParser = null;\n    _this.pathParser = new PathParser(_this.getAttribute('d').getString());\n    return _this;\n  }\n\n  _createClass(PathElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var pathParser = this.pathParser;\n      var boundingBox = new BoundingBox();\n      pathParser.reset();\n\n      if (ctx) {\n        ctx.beginPath();\n      }\n\n      while (!pathParser.isEnd()) {\n        pathParser.nextCommand();\n\n        switch (pathParser.command) {\n          case 'M':\n          case 'm':\n            this.pathM(ctx, boundingBox);\n            break;\n\n          case 'L':\n          case 'l':\n            this.pathL(ctx, boundingBox);\n            break;\n\n          case 'H':\n          case 'h':\n            this.pathH(ctx, boundingBox);\n            break;\n\n          case 'V':\n          case 'v':\n            this.pathV(ctx, boundingBox);\n            break;\n\n          case 'C':\n          case 'c':\n            this.pathC(ctx, boundingBox);\n            break;\n\n          case 'S':\n          case 's':\n            this.pathS(ctx, boundingBox);\n            break;\n\n          case 'Q':\n          case 'q':\n            this.pathQ(ctx, boundingBox);\n            break;\n\n          case 'T':\n          case 't':\n            this.pathT(ctx, boundingBox);\n            break;\n\n          case 'A':\n          case 'a':\n            this.pathA(ctx, boundingBox);\n            break;\n\n          case 'Z':\n          case 'z':\n            this.pathZ(ctx, boundingBox);\n            break;\n        }\n      }\n\n      return boundingBox;\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(_) {\n      return this.path();\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      var pathParser = this.pathParser;\n      var points = pathParser.getMarkerPoints();\n      var angles = pathParser.getMarkerAngles();\n      var markers = points.map(function (point, i) {\n        return [point, angles[i]];\n      });\n      return markers;\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      this.path(ctx);\n      this.document.screen.mouse.checkPath(this, ctx);\n      var fillRuleStyleProp = this.getStyle('fill-rule');\n\n      if (ctx.fillStyle !== '') {\n        if (fillRuleStyleProp.getString('inherit') !== 'inherit') {\n          ctx.fill(fillRuleStyleProp.getString());\n        } else {\n          ctx.fill();\n        }\n      }\n\n      if (ctx.strokeStyle !== '') {\n        ctx.stroke();\n      }\n\n      var markers = this.getMarkers();\n\n      if (markers) {\n        var markersLastIndex = markers.length - 1;\n        var markerStartStyleProp = this.getStyle('marker-start');\n        var markerMidStyleProp = this.getStyle('marker-mid');\n        var markerEndStyleProp = this.getStyle('marker-end');\n\n        if (markerStartStyleProp.isUrlDefinition()) {\n          var marker = markerStartStyleProp.getDefinition();\n\n          var _markers$ = _slicedToArray(markers[0], 2),\n              point = _markers$[0],\n              angle = _markers$[1];\n\n          marker.render(ctx, point, angle);\n        }\n\n        if (markerMidStyleProp.isUrlDefinition()) {\n          var _marker = markerMidStyleProp.getDefinition();\n\n          for (var i = 1; i < markersLastIndex; i++) {\n            var _markers$i = _slicedToArray(markers[i], 2),\n                _point = _markers$i[0],\n                _angle = _markers$i[1];\n\n            _marker.render(ctx, _point, _angle);\n          }\n        }\n\n        if (markerEndStyleProp.isUrlDefinition()) {\n          var _marker2 = markerEndStyleProp.getDefinition();\n\n          var _markers$markersLastI = _slicedToArray(markers[markersLastIndex], 2),\n              _point2 = _markers$markersLastI[0],\n              _angle2 = _markers$markersLastI[1];\n\n          _marker2.render(ctx, _point2, _angle2);\n        }\n      }\n    }\n  }, {\n    key: \"pathM\",\n    value: function pathM(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n      var point = pathParser.getAsCurrentPoint();\n      var x = point.x,\n          y = point.y;\n      pathParser.addMarker(point);\n      boundingBox.addPoint(x, y);\n\n      if (ctx) {\n        ctx.moveTo(x, y);\n      }\n\n      pathParser.start = pathParser.current;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var _point3 = pathParser.getAsCurrentPoint();\n\n        var _x = _point3.x,\n            _y = _point3.y;\n        pathParser.addMarker(_point3, pathParser.start);\n        boundingBox.addPoint(_x, _y);\n\n        if (ctx) {\n          ctx.lineTo(_x, _y);\n        }\n      }\n    }\n  }, {\n    key: \"pathL\",\n    value: function pathL(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = pathParser.getAsCurrentPoint();\n        var x = point.x,\n            y = point.y;\n        pathParser.addMarker(point, current);\n        boundingBox.addPoint(x, y);\n\n        if (ctx) {\n          ctx.lineTo(x, y);\n        }\n      }\n    }\n  }, {\n    key: \"pathH\",\n    value: function pathH(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = new Point((pathParser.isRelativeCommand() ? current.x : 0) + pathParser.getScalar(), current.y);\n        pathParser.addMarker(point, current);\n        pathParser.current = point;\n        boundingBox.addPoint(point.x, point.y);\n\n        if (ctx) {\n          ctx.lineTo(point.x, point.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathV\",\n    value: function pathV(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = new Point(current.x, (pathParser.isRelativeCommand() ? current.y : 0) + pathParser.getScalar());\n        pathParser.addMarker(point, current);\n        pathParser.current = point;\n        boundingBox.addPoint(point.x, point.y);\n\n        if (ctx) {\n          ctx.lineTo(point.x, point.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathC\",\n    value: function pathC(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = pathParser.getPoint();\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        pathParser.addMarker(currentPoint, controlPoint, point);\n        boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n        if (ctx) {\n          ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathS\",\n    value: function pathS(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = pathParser.getReflectedControlPoint();\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        pathParser.addMarker(currentPoint, controlPoint, point);\n        boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n        if (ctx) {\n          ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathQ\",\n    value: function pathQ(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n        boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n        if (ctx) {\n          ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathT\",\n    value: function pathT(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var controlPoint = pathParser.getReflectedControlPoint();\n        pathParser.control = controlPoint;\n        var currentPoint = pathParser.getAsCurrentPoint();\n        pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n        boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n        if (ctx) {\n          ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathA\",\n    value: function pathA(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var rx = pathParser.getScalar();\n        var ry = pathParser.getScalar();\n        var xAxisRotation = pathParser.getScalar() * (Math.PI / 180.0);\n        var largeArcFlag = pathParser.getScalar();\n        var sweepFlag = pathParser.getScalar();\n        var currentPoint = pathParser.getAsCurrentPoint(); // Conversion from endpoint to center parameterization\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n        // x1', y1'\n\n        var currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2.0, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2.0); // adjust radii\n\n        var l = Math.pow(currp.x, 2) / Math.pow(rx, 2) + Math.pow(currp.y, 2) / Math.pow(ry, 2);\n\n        if (l > 1) {\n          rx *= Math.sqrt(l);\n          ry *= Math.sqrt(l);\n        } // cx', cy'\n\n\n        var s = (largeArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(currp.y, 2) - Math.pow(ry, 2) * Math.pow(currp.x, 2)) / (Math.pow(rx, 2) * Math.pow(currp.y, 2) + Math.pow(ry, 2) * Math.pow(currp.x, 2)));\n\n        if (isNaN(s)) {\n          s = 0;\n        }\n\n        var cpp = new Point(s * rx * currp.y / ry, s * -ry * currp.x / rx); // cx, cy\n\n        var centp = new Point((current.x + currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y); // initial angle\n\n        var a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry]); // angle delta\n\n        var u = [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry];\n        var v = [(-currp.x - cpp.x) / rx, (-currp.y - cpp.y) / ry];\n        var ad = vectorsAngle(u, v);\n\n        if (vectorsRatio(u, v) <= -1) {\n          ad = Math.PI;\n        }\n\n        if (vectorsRatio(u, v) >= 1) {\n          ad = 0;\n        } // for markers\n\n\n        var dir = 1 - sweepFlag ? 1.0 : -1.0;\n        var ah = a1 + dir * (ad / 2.0);\n        var halfWay = new Point(centp.x + rx * Math.cos(ah), centp.y + ry * Math.sin(ah));\n        pathParser.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n        pathParser.addMarkerAngle(currentPoint, ah - dir * Math.PI);\n        boundingBox.addPoint(currentPoint.x, currentPoint.y); // TODO: this is too naive, make it better\n\n        if (ctx && !isNaN(a1) && !isNaN(ad)) {\n          var r = rx > ry ? rx : ry;\n          var sx = rx > ry ? 1 : rx / ry;\n          var sy = rx > ry ? ry / rx : 1;\n          ctx.translate(centp.x, centp.y);\n          ctx.rotate(xAxisRotation);\n          ctx.scale(sx, sy);\n          ctx.arc(0, 0, r, a1, a1 + ad, Boolean(1 - sweepFlag));\n          ctx.scale(1 / sx, 1 / sy);\n          ctx.rotate(-xAxisRotation);\n          ctx.translate(-centp.x, -centp.y);\n        }\n      }\n    }\n  }, {\n    key: \"pathZ\",\n    value: function pathZ(ctx, boundingBox) {\n      var pathParser = this.pathParser;\n\n      if (ctx) {\n        // only close path if it is not a straight line\n        if (boundingBox.x1 !== boundingBox.x2 && boundingBox.y1 !== boundingBox.y2) {\n          ctx.closePath();\n        }\n      }\n\n      pathParser.current = pathParser.start;\n    }\n  }]);\n\n  return PathElement;\n}(RenderedElement);\n\nfunction _createSuper$9(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$9()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$9() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar SVGElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(SVGElement, _RenderedElement);\n\n  var _super = _createSuper$9(SVGElement);\n\n  function SVGElement() {\n    var _this;\n\n    _classCallCheck(this, SVGElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'svg';\n    _this.root = false;\n    return _this;\n  }\n\n  _createClass(SVGElement, [{\n    key: \"clearContext\",\n    value: function clearContext(ctx) {\n      _get(_getPrototypeOf(SVGElement.prototype), \"clearContext\", this).call(this, ctx);\n\n      this.document.screen.viewPort.removeCurrent();\n    }\n  }, {\n    key: \"setContext\",\n    value: function setContext(ctx) {\n      var document = this.document;\n      var screen = document.screen,\n          window = document.window;\n      var canvas = ctx.canvas;\n      screen.setDefaults(ctx);\n\n      if (canvas.style && typeof ctx.font !== 'undefined' && window && typeof window.getComputedStyle !== 'undefined') {\n        ctx.font = window.getComputedStyle(canvas).getPropertyValue('font');\n        var fontSizeProp = new Property(document, 'fontSize', Font.parse(ctx.font).fontSize);\n\n        if (fontSizeProp.hasValue()) {\n          document.rootEmSize = fontSizeProp.getPixels('y');\n          document.emSize = document.rootEmSize;\n        }\n      }\n\n      _get(_getPrototypeOf(SVGElement.prototype), \"setContext\", this).call(this, ctx); // create new view port\n\n\n      if (!this.getAttribute('x').hasValue()) {\n        this.getAttribute('x', true).setValue(0);\n      }\n\n      if (!this.getAttribute('y').hasValue()) {\n        this.getAttribute('y', true).setValue(0);\n      }\n\n      ctx.translate(this.getAttribute('x').getPixels('x'), this.getAttribute('y').getPixels('y'));\n      var _screen$viewPort = screen.viewPort,\n          width = _screen$viewPort.width,\n          height = _screen$viewPort.height;\n\n      if (!this.getStyle('width').hasValue()) {\n        this.getStyle('width', true).setValue('100%');\n      }\n\n      if (!this.getStyle('height').hasValue()) {\n        this.getStyle('height', true).setValue('100%');\n      }\n\n      if (!this.getStyle('color').hasValue()) {\n        this.getStyle('color', true).setValue('black');\n      }\n\n      var refXAttr = this.getAttribute('refX');\n      var refYAttr = this.getAttribute('refY');\n      var viewBoxAttr = this.getAttribute('viewBox');\n      var viewBox = viewBoxAttr.hasValue() ? toNumbers(viewBoxAttr.getString()) : null;\n      var clip = !this.root && this.getAttribute('overflow').getValue('hidden') !== 'visible';\n      var minX = 0;\n      var minY = 0;\n      var clipX = 0;\n      var clipY = 0;\n\n      if (viewBox) {\n        minX = viewBox[0];\n        minY = viewBox[1];\n      }\n\n      if (!this.root) {\n        width = this.getStyle('width').getPixels('x');\n        height = this.getStyle('height').getPixels('y');\n\n        if (this.type === 'marker') {\n          clipX = minX;\n          clipY = minY;\n          minX = 0;\n          minY = 0;\n        }\n      }\n\n      screen.viewPort.setCurrent(width, height);\n\n      if (viewBox) {\n        width = viewBox[2];\n        height = viewBox[3];\n      }\n\n      document.setViewBox({\n        ctx: ctx,\n        aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n        width: screen.viewPort.width,\n        desiredWidth: width,\n        height: screen.viewPort.height,\n        desiredHeight: height,\n        minX: minX,\n        minY: minY,\n        refX: refXAttr.getValue(),\n        refY: refYAttr.getValue(),\n        clip: clip,\n        clipX: clipX,\n        clipY: clipY\n      });\n\n      if (viewBox) {\n        screen.viewPort.removeCurrent();\n        screen.viewPort.setCurrent(width, height);\n      }\n    }\n    /**\n     * Resize SVG to fit in given size.\n     * @param width\n     * @param height\n     * @param preserveAspectRatio\n     */\n\n  }, {\n    key: \"resize\",\n    value: function resize(width) {\n      var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n      var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var widthAttr = this.getAttribute('width', true);\n      var heightAttr = this.getAttribute('height', true);\n      var viewBoxAttr = this.getAttribute('viewBox');\n      var styleAttr = this.getAttribute('style');\n      var originWidth = widthAttr.getNumber(0);\n      var originHeight = heightAttr.getNumber(0);\n\n      if (preserveAspectRatio) {\n        if (typeof preserveAspectRatio === 'string') {\n          this.getAttribute('preserveAspectRatio', true).setValue(preserveAspectRatio);\n        } else {\n          var preserveAspectRatioAttr = this.getAttribute('preserveAspectRatio');\n\n          if (preserveAspectRatioAttr.hasValue()) {\n            preserveAspectRatioAttr.setValue(preserveAspectRatioAttr.getString().replace(/^\\s*(\\S.*\\S)\\s*$/, '$1'));\n          }\n        }\n      }\n\n      widthAttr.setValue(width);\n      heightAttr.setValue(height);\n\n      if (!viewBoxAttr.hasValue()) {\n        viewBoxAttr.setValue(\"0 0 \".concat(originWidth || width, \" \").concat(originHeight || height));\n      }\n\n      if (styleAttr.hasValue()) {\n        var widthStyle = this.getStyle('width');\n        var heightStyle = this.getStyle('height');\n\n        if (widthStyle.hasValue()) {\n          widthStyle.setValue(\"\".concat(width, \"px\"));\n        }\n\n        if (heightStyle.hasValue()) {\n          heightStyle.setValue(\"\".concat(height, \"px\"));\n        }\n      }\n    }\n  }]);\n\n  return SVGElement;\n}(RenderedElement);\n\nfunction _createSuper$a(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$a()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$a() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar RectElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(RectElement, _PathElement);\n\n  var _super = _createSuper$a(RectElement);\n\n  function RectElement() {\n    var _this;\n\n    _classCallCheck(this, RectElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'rect';\n    return _this;\n  }\n\n  _createClass(RectElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var x = this.getAttribute('x').getPixels('x');\n      var y = this.getAttribute('y').getPixels('y');\n      var width = this.getStyle('width').getPixels('x');\n      var height = this.getStyle('height').getPixels('y');\n      var rxAttr = this.getAttribute('rx');\n      var ryAttr = this.getAttribute('ry');\n      var rx = rxAttr.getPixels('x');\n      var ry = ryAttr.getPixels('y');\n\n      if (rxAttr.hasValue() && !ryAttr.hasValue()) {\n        ry = rx;\n      }\n\n      if (ryAttr.hasValue() && !rxAttr.hasValue()) {\n        rx = ry;\n      }\n\n      rx = Math.min(rx, width / 2.0);\n      ry = Math.min(ry, height / 2.0);\n\n      if (ctx) {\n        var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n        ctx.beginPath(); // always start the path so we don't fill prior paths\n\n        if (height > 0 && width > 0) {\n          ctx.moveTo(x + rx, y);\n          ctx.lineTo(x + width - rx, y);\n          ctx.bezierCurveTo(x + width - rx + KAPPA * rx, y, x + width, y + ry - KAPPA * ry, x + width, y + ry);\n          ctx.lineTo(x + width, y + height - ry);\n          ctx.bezierCurveTo(x + width, y + height - ry + KAPPA * ry, x + width - rx + KAPPA * rx, y + height, x + width - rx, y + height);\n          ctx.lineTo(x + rx, y + height);\n          ctx.bezierCurveTo(x + rx - KAPPA * rx, y + height, x, y + height - ry + KAPPA * ry, x, y + height - ry);\n          ctx.lineTo(x, y + ry);\n          ctx.bezierCurveTo(x, y + ry - KAPPA * ry, x + rx - KAPPA * rx, y, x + rx, y);\n          ctx.closePath();\n        }\n      }\n\n      return new BoundingBox(x, y, x + width, y + height);\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      return null;\n    }\n  }]);\n\n  return RectElement;\n}(PathElement);\n\nfunction _createSuper$b(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$b()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$b() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar CircleElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(CircleElement, _PathElement);\n\n  var _super = _createSuper$b(CircleElement);\n\n  function CircleElement() {\n    var _this;\n\n    _classCallCheck(this, CircleElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'circle';\n    return _this;\n  }\n\n  _createClass(CircleElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var cx = this.getAttribute('cx').getPixels('x');\n      var cy = this.getAttribute('cy').getPixels('y');\n      var r = this.getAttribute('r').getPixels();\n\n      if (ctx && r > 0) {\n        ctx.beginPath();\n        ctx.arc(cx, cy, r, 0, Math.PI * 2, false);\n        ctx.closePath();\n      }\n\n      return new BoundingBox(cx - r, cy - r, cx + r, cy + r);\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      return null;\n    }\n  }]);\n\n  return CircleElement;\n}(PathElement);\n\nfunction _createSuper$c(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$c()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$c() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar EllipseElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(EllipseElement, _PathElement);\n\n  var _super = _createSuper$c(EllipseElement);\n\n  function EllipseElement() {\n    var _this;\n\n    _classCallCheck(this, EllipseElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'ellipse';\n    return _this;\n  }\n\n  _createClass(EllipseElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n      var rx = this.getAttribute('rx').getPixels('x');\n      var ry = this.getAttribute('ry').getPixels('y');\n      var cx = this.getAttribute('cx').getPixels('x');\n      var cy = this.getAttribute('cy').getPixels('y');\n\n      if (ctx && rx > 0 && ry > 0) {\n        ctx.beginPath();\n        ctx.moveTo(cx + rx, cy);\n        ctx.bezierCurveTo(cx + rx, cy + KAPPA * ry, cx + KAPPA * rx, cy + ry, cx, cy + ry);\n        ctx.bezierCurveTo(cx - KAPPA * rx, cy + ry, cx - rx, cy + KAPPA * ry, cx - rx, cy);\n        ctx.bezierCurveTo(cx - rx, cy - KAPPA * ry, cx - KAPPA * rx, cy - ry, cx, cy - ry);\n        ctx.bezierCurveTo(cx + KAPPA * rx, cy - ry, cx + rx, cy - KAPPA * ry, cx + rx, cy);\n        ctx.closePath();\n      }\n\n      return new BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      return null;\n    }\n  }]);\n\n  return EllipseElement;\n}(PathElement);\n\nfunction _createSuper$d(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$d()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$d() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar LineElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(LineElement, _PathElement);\n\n  var _super = _createSuper$d(LineElement);\n\n  function LineElement() {\n    var _this;\n\n    _classCallCheck(this, LineElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'line';\n    return _this;\n  }\n\n  _createClass(LineElement, [{\n    key: \"getPoints\",\n    value: function getPoints() {\n      return [new Point(this.getAttribute('x1').getPixels('x'), this.getAttribute('y1').getPixels('y')), new Point(this.getAttribute('x2').getPixels('x'), this.getAttribute('y2').getPixels('y'))];\n    }\n  }, {\n    key: \"path\",\n    value: function path(ctx) {\n      var _this$getPoints = this.getPoints(),\n          _this$getPoints2 = _slicedToArray(_this$getPoints, 2),\n          _this$getPoints2$ = _this$getPoints2[0],\n          x0 = _this$getPoints2$.x,\n          y0 = _this$getPoints2$.y,\n          _this$getPoints2$2 = _this$getPoints2[1],\n          x1 = _this$getPoints2$2.x,\n          y1 = _this$getPoints2$2.y;\n\n      if (ctx) {\n        ctx.beginPath();\n        ctx.moveTo(x0, y0);\n        ctx.lineTo(x1, y1);\n      }\n\n      return new BoundingBox(x0, y0, x1, y1);\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      var _this$getPoints3 = this.getPoints(),\n          _this$getPoints4 = _slicedToArray(_this$getPoints3, 2),\n          p0 = _this$getPoints4[0],\n          p1 = _this$getPoints4[1];\n\n      var a = p0.angleTo(p1);\n      return [[p0, a], [p1, a]];\n    }\n  }]);\n\n  return LineElement;\n}(PathElement);\n\nfunction _createSuper$e(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$e()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$e() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar PolylineElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(PolylineElement, _PathElement);\n\n  var _super = _createSuper$e(PolylineElement);\n\n  function PolylineElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, PolylineElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'polyline';\n    _this.points = [];\n    _this.points = Point.parsePath(_this.getAttribute('points').getString());\n    return _this;\n  }\n\n  _createClass(PolylineElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var points = this.points;\n\n      var _points = _slicedToArray(points, 1),\n          _points$ = _points[0],\n          x0 = _points$.x,\n          y0 = _points$.y;\n\n      var boundingBox = new BoundingBox(x0, y0);\n\n      if (ctx) {\n        ctx.beginPath();\n        ctx.moveTo(x0, y0);\n      }\n\n      points.forEach(function (_ref) {\n        var x = _ref.x,\n            y = _ref.y;\n        boundingBox.addPoint(x, y);\n\n        if (ctx) {\n          ctx.lineTo(x, y);\n        }\n      });\n      return boundingBox;\n    }\n  }, {\n    key: \"getMarkers\",\n    value: function getMarkers() {\n      var points = this.points;\n      var lastIndex = points.length - 1;\n      var markers = [];\n      points.forEach(function (point, i) {\n        if (i === lastIndex) {\n          return;\n        }\n\n        markers.push([point, point.angleTo(points[i + 1])]);\n      });\n\n      if (markers.length > 0) {\n        markers.push([points[points.length - 1], markers[markers.length - 1][1]]);\n      }\n\n      return markers;\n    }\n  }]);\n\n  return PolylineElement;\n}(PathElement);\n\nfunction _createSuper$f(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$f()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$f() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar PolygonElement = /*#__PURE__*/function (_PolylineElement) {\n  _inherits(PolygonElement, _PolylineElement);\n\n  var _super = _createSuper$f(PolygonElement);\n\n  function PolygonElement() {\n    var _this;\n\n    _classCallCheck(this, PolygonElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'polygon';\n    return _this;\n  }\n\n  _createClass(PolygonElement, [{\n    key: \"path\",\n    value: function path(ctx) {\n      var boundingBox = _get(_getPrototypeOf(PolygonElement.prototype), \"path\", this).call(this, ctx);\n\n      var _this$points = _slicedToArray(this.points, 1),\n          _this$points$ = _this$points[0],\n          x = _this$points$.x,\n          y = _this$points$.y;\n\n      if (ctx) {\n        ctx.lineTo(x, y);\n        ctx.closePath();\n      }\n\n      return boundingBox;\n    }\n  }]);\n\n  return PolygonElement;\n}(PolylineElement);\n\nfunction _createSuper$g(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$g()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$g() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar PatternElement = /*#__PURE__*/function (_Element) {\n  _inherits(PatternElement, _Element);\n\n  var _super = _createSuper$g(PatternElement);\n\n  function PatternElement() {\n    var _this;\n\n    _classCallCheck(this, PatternElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'pattern';\n    return _this;\n  }\n\n  _createClass(PatternElement, [{\n    key: \"createPattern\",\n    value: function createPattern(ctx, _, parentOpacityProp) {\n      var width = this.getStyle('width').getPixels('x', true);\n      var height = this.getStyle('height').getPixels('y', true); // render me using a temporary svg element\n\n      var patternSvg = new SVGElement(this.document, null);\n      patternSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n      patternSvg.attributes.width = new Property(this.document, 'width', \"\".concat(width, \"px\"));\n      patternSvg.attributes.height = new Property(this.document, 'height', \"\".concat(height, \"px\"));\n      patternSvg.attributes.transform = new Property(this.document, 'transform', this.getAttribute('patternTransform').getValue());\n      patternSvg.children = this.children;\n      var patternCanvas = this.document.createCanvas(width, height);\n      var patternCtx = patternCanvas.getContext('2d');\n      var xAttr = this.getAttribute('x');\n      var yAttr = this.getAttribute('y');\n\n      if (xAttr.hasValue() && yAttr.hasValue()) {\n        patternCtx.translate(xAttr.getPixels('x', true), yAttr.getPixels('y', true));\n      }\n\n      if (parentOpacityProp.hasValue()) {\n        this.styles['fill-opacity'] = parentOpacityProp;\n      } else {\n        Reflect.deleteProperty(this.styles, 'fill-opacity');\n      } // render 3x3 grid so when we transform there's no white space on edges\n\n\n      for (var x = -1; x <= 1; x++) {\n        for (var y = -1; y <= 1; y++) {\n          patternCtx.save();\n          patternSvg.attributes.x = new Property(this.document, 'x', x * patternCanvas.width);\n          patternSvg.attributes.y = new Property(this.document, 'y', y * patternCanvas.height);\n          patternSvg.render(patternCtx);\n          patternCtx.restore();\n        }\n      }\n\n      var pattern = ctx.createPattern(patternCanvas, 'repeat');\n      return pattern;\n    }\n  }]);\n\n  return PatternElement;\n}(Element);\n\nfunction _createSuper$h(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$h()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$h() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar MarkerElement = /*#__PURE__*/function (_Element) {\n  _inherits(MarkerElement, _Element);\n\n  var _super = _createSuper$h(MarkerElement);\n\n  function MarkerElement() {\n    var _this;\n\n    _classCallCheck(this, MarkerElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'marker';\n    return _this;\n  }\n\n  _createClass(MarkerElement, [{\n    key: \"render\",\n    value: function render(ctx, point, angle) {\n      if (!point) {\n        return;\n      }\n\n      var x = point.x,\n          y = point.y;\n      var orient = this.getAttribute('orient').getValue('auto');\n      var markerUnits = this.getAttribute('markerUnits').getValue('strokeWidth');\n      ctx.translate(x, y);\n\n      if (orient === 'auto') {\n        ctx.rotate(angle);\n      }\n\n      if (markerUnits === 'strokeWidth') {\n        ctx.scale(ctx.lineWidth, ctx.lineWidth);\n      }\n\n      ctx.save(); // render me using a temporary svg element\n\n      var markerSvg = new SVGElement(this.document, null);\n      markerSvg.type = this.type;\n      markerSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n      markerSvg.attributes.refX = new Property(this.document, 'refX', this.getAttribute('refX').getValue());\n      markerSvg.attributes.refY = new Property(this.document, 'refY', this.getAttribute('refY').getValue());\n      markerSvg.attributes.width = new Property(this.document, 'width', this.getAttribute('markerWidth').getValue());\n      markerSvg.attributes.height = new Property(this.document, 'height', this.getAttribute('markerHeight').getValue());\n      markerSvg.attributes.overflow = new Property(this.document, 'overflow', this.getAttribute('overflow').getValue());\n      markerSvg.attributes.fill = new Property(this.document, 'fill', this.getAttribute('fill').getColor('black'));\n      markerSvg.attributes.stroke = new Property(this.document, 'stroke', this.getAttribute('stroke').getValue('none'));\n      markerSvg.children = this.children;\n      markerSvg.render(ctx);\n      ctx.restore();\n\n      if (markerUnits === 'strokeWidth') {\n        ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth);\n      }\n\n      if (orient === 'auto') {\n        ctx.rotate(-angle);\n      }\n\n      ctx.translate(-x, -y);\n    }\n  }]);\n\n  return MarkerElement;\n}(Element);\n\nfunction _createSuper$i(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$i()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$i() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar DefsElement = /*#__PURE__*/function (_Element) {\n  _inherits(DefsElement, _Element);\n\n  var _super = _createSuper$i(DefsElement);\n\n  function DefsElement() {\n    var _this;\n\n    _classCallCheck(this, DefsElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'defs';\n    return _this;\n  }\n\n  _createClass(DefsElement, [{\n    key: \"render\",\n    value: function render() {// NOOP\n    }\n  }]);\n\n  return DefsElement;\n}(Element);\n\nfunction _createSuper$j(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$j()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$j() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar GElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(GElement, _RenderedElement);\n\n  var _super = _createSuper$j(GElement);\n\n  function GElement() {\n    var _this;\n\n    _classCallCheck(this, GElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'g';\n    return _this;\n  }\n\n  _createClass(GElement, [{\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(ctx) {\n      var boundingBox = new BoundingBox();\n      this.children.forEach(function (child) {\n        boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n      });\n      return boundingBox;\n    }\n  }]);\n\n  return GElement;\n}(RenderedElement);\n\nfunction _createSuper$k(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$k()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$k() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar GradientElement = /*#__PURE__*/function (_Element) {\n  _inherits(GradientElement, _Element);\n\n  var _super = _createSuper$k(GradientElement);\n\n  function GradientElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, GradientElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.attributesToInherit = ['gradientUnits'];\n    _this.stops = [];\n\n    var _assertThisInitialize = _assertThisInitialized(_this),\n        stops = _assertThisInitialize.stops,\n        children = _assertThisInitialize.children;\n\n    children.forEach(function (child) {\n      if (child.type === 'stop') {\n        stops.push(child);\n      }\n    });\n    return _this;\n  }\n\n  _createClass(GradientElement, [{\n    key: \"getGradientUnits\",\n    value: function getGradientUnits() {\n      return this.getAttribute('gradientUnits').getString('objectBoundingBox');\n    }\n  }, {\n    key: \"createGradient\",\n    value: function createGradient(ctx, element, parentOpacityProp) {\n      var _this2 = this;\n\n      // tslint:disable-next-line: no-this-assignment\n      var stopsContainer = this;\n\n      if (this.getHrefAttribute().hasValue()) {\n        stopsContainer = this.getHrefAttribute().getDefinition();\n        this.inheritStopContainer(stopsContainer);\n      }\n\n      var _stopsContainer = stopsContainer,\n          stops = _stopsContainer.stops;\n      var gradient = this.getGradient(ctx, element);\n\n      if (!gradient) {\n        return this.addParentOpacity(parentOpacityProp, stops[stops.length - 1].color);\n      }\n\n      stops.forEach(function (stop) {\n        gradient.addColorStop(stop.offset, _this2.addParentOpacity(parentOpacityProp, stop.color));\n      });\n\n      if (this.getAttribute('gradientTransform').hasValue()) {\n        // render as transformed pattern on temporary canvas\n        var document = this.document;\n        var _document$screen = document.screen,\n            MAX_VIRTUAL_PIXELS = _document$screen.MAX_VIRTUAL_PIXELS,\n            viewPort = _document$screen.viewPort;\n\n        var _viewPort$viewPorts = _slicedToArray(viewPort.viewPorts, 1),\n            rootView = _viewPort$viewPorts[0];\n\n        var rect = new RectElement(document, null);\n        rect.attributes.x = new Property(document, 'x', -MAX_VIRTUAL_PIXELS / 3.0);\n        rect.attributes.y = new Property(document, 'y', -MAX_VIRTUAL_PIXELS / 3.0);\n        rect.attributes.width = new Property(document, 'width', MAX_VIRTUAL_PIXELS);\n        rect.attributes.height = new Property(document, 'height', MAX_VIRTUAL_PIXELS);\n        var group = new GElement(document, null);\n        group.attributes.transform = new Property(document, 'transform', this.getAttribute('gradientTransform').getValue());\n        group.children = [rect];\n        var patternSvg = new SVGElement(document, null);\n        patternSvg.attributes.x = new Property(document, 'x', 0);\n        patternSvg.attributes.y = new Property(document, 'y', 0);\n        patternSvg.attributes.width = new Property(document, 'width', rootView.width);\n        patternSvg.attributes.height = new Property(document, 'height', rootView.height);\n        patternSvg.children = [group];\n        var patternCanvas = document.createCanvas(rootView.width, rootView.height);\n        var patternCtx = patternCanvas.getContext('2d');\n        patternCtx.fillStyle = gradient;\n        patternSvg.render(patternCtx);\n        return patternCtx.createPattern(patternCanvas, 'no-repeat');\n      }\n\n      return gradient;\n    }\n  }, {\n    key: \"inheritStopContainer\",\n    value: function inheritStopContainer(stopsContainer) {\n      var _this3 = this;\n\n      this.attributesToInherit.forEach(function (attributeToInherit) {\n        if (!_this3.getAttribute(attributeToInherit).hasValue() && stopsContainer.getAttribute(attributeToInherit).hasValue()) {\n          _this3.getAttribute(attributeToInherit, true).setValue(stopsContainer.getAttribute(attributeToInherit).getValue());\n        }\n      });\n    }\n  }, {\n    key: \"addParentOpacity\",\n    value: function addParentOpacity(parentOpacityProp, color) {\n      if (parentOpacityProp.hasValue()) {\n        var colorProp = new Property(this.document, 'color', color);\n        return colorProp.addOpacity(parentOpacityProp).getColor();\n      }\n\n      return color;\n    }\n  }]);\n\n  return GradientElement;\n}(Element);\n\nfunction _createSuper$l(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$l()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$l() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar LinearGradientElement = /*#__PURE__*/function (_GradientElement) {\n  _inherits(LinearGradientElement, _GradientElement);\n\n  var _super = _createSuper$l(LinearGradientElement);\n\n  function LinearGradientElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, LinearGradientElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'linearGradient';\n\n    _this.attributesToInherit.push('x1', 'y1', 'x2', 'y2');\n\n    return _this;\n  }\n\n  _createClass(LinearGradientElement, [{\n    key: \"getGradient\",\n    value: function getGradient(ctx, element) {\n      var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n      var boundingBox = isBoundingBoxUnits ? element.getBoundingBox(ctx) : null;\n\n      if (isBoundingBoxUnits && !boundingBox) {\n        return null;\n      }\n\n      if (!this.getAttribute('x1').hasValue() && !this.getAttribute('y1').hasValue() && !this.getAttribute('x2').hasValue() && !this.getAttribute('y2').hasValue()) {\n        this.getAttribute('x1', true).setValue(0);\n        this.getAttribute('y1', true).setValue(0);\n        this.getAttribute('x2', true).setValue(1);\n        this.getAttribute('y2', true).setValue(0);\n      }\n\n      var x1 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x1').getNumber() : this.getAttribute('x1').getPixels('x');\n      var y1 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y1').getNumber() : this.getAttribute('y1').getPixels('y');\n      var x2 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x2').getNumber() : this.getAttribute('x2').getPixels('x');\n      var y2 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y2').getNumber() : this.getAttribute('y2').getPixels('y');\n\n      if (x1 === x2 && y1 === y2) {\n        return null;\n      }\n\n      return ctx.createLinearGradient(x1, y1, x2, y2);\n    }\n  }]);\n\n  return LinearGradientElement;\n}(GradientElement);\n\nfunction _createSuper$m(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$m()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$m() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar RadialGradientElement = /*#__PURE__*/function (_GradientElement) {\n  _inherits(RadialGradientElement, _GradientElement);\n\n  var _super = _createSuper$m(RadialGradientElement);\n\n  function RadialGradientElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, RadialGradientElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'radialGradient';\n\n    _this.attributesToInherit.push('cx', 'cy', 'r', 'fx', 'fy', 'fr');\n\n    return _this;\n  }\n\n  _createClass(RadialGradientElement, [{\n    key: \"getGradient\",\n    value: function getGradient(ctx, element) {\n      var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n      var boundingBox = element.getBoundingBox(ctx);\n\n      if (isBoundingBoxUnits && !boundingBox) {\n        return null;\n      }\n\n      if (!this.getAttribute('cx').hasValue()) {\n        this.getAttribute('cx', true).setValue('50%');\n      }\n\n      if (!this.getAttribute('cy').hasValue()) {\n        this.getAttribute('cy', true).setValue('50%');\n      }\n\n      if (!this.getAttribute('r').hasValue()) {\n        this.getAttribute('r', true).setValue('50%');\n      }\n\n      var cx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('cx').getNumber() : this.getAttribute('cx').getPixels('x');\n      var cy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('cy').getNumber() : this.getAttribute('cy').getPixels('y');\n      var fx = cx;\n      var fy = cy;\n\n      if (this.getAttribute('fx').hasValue()) {\n        fx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('fx').getNumber() : this.getAttribute('fx').getPixels('x');\n      }\n\n      if (this.getAttribute('fy').hasValue()) {\n        fy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('fy').getNumber() : this.getAttribute('fy').getPixels('y');\n      }\n\n      var r = isBoundingBoxUnits ? (boundingBox.width + boundingBox.height) / 2.0 * this.getAttribute('r').getNumber() : this.getAttribute('r').getPixels();\n      var fr = this.getAttribute('fr').getPixels();\n      return ctx.createRadialGradient(fx, fy, fr, cx, cy, r);\n    }\n  }]);\n\n  return RadialGradientElement;\n}(GradientElement);\n\nfunction _createSuper$n(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$n()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$n() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar StopElement = /*#__PURE__*/function (_Element) {\n  _inherits(StopElement, _Element);\n\n  var _super = _createSuper$n(StopElement);\n\n  function StopElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, StopElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'stop';\n    var offset = Math.max(0, Math.min(1, _this.getAttribute('offset').getNumber()));\n\n    var stopOpacity = _this.getStyle('stop-opacity');\n\n    var stopColor = _this.getStyle('stop-color', true);\n\n    if (stopColor.getString() === '') {\n      stopColor.setValue('#000');\n    }\n\n    if (stopOpacity.hasValue()) {\n      stopColor = stopColor.addOpacity(stopOpacity);\n    }\n\n    _this.offset = offset;\n    _this.color = stopColor.getColor();\n    return _this;\n  }\n\n  return StopElement;\n}(Element);\n\nfunction _createSuper$o(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$o()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$o() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar AnimateElement = /*#__PURE__*/function (_Element) {\n  _inherits(AnimateElement, _Element);\n\n  var _super = _createSuper$o(AnimateElement);\n\n  function AnimateElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, AnimateElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'animate';\n    _this.duration = 0;\n    _this.initialValue = null;\n    _this.initialUnits = '';\n    _this.removed = false;\n    _this.frozen = false;\n    document.screen.animations.push(_assertThisInitialized(_this));\n    _this.begin = _this.getAttribute('begin').getMilliseconds();\n    _this.maxDuration = _this.begin + _this.getAttribute('dur').getMilliseconds();\n    _this.from = _this.getAttribute('from');\n    _this.to = _this.getAttribute('to');\n    _this.values = _this.getAttribute('values');\n\n    if (_this.values.hasValue()) {\n      _this.values.setValue(_this.values.getString().split(';'));\n    }\n\n    return _this;\n  }\n\n  _createClass(AnimateElement, [{\n    key: \"getProperty\",\n    value: function getProperty() {\n      var attributeType = this.getAttribute('attributeType').getString();\n      var attributeName = this.getAttribute('attributeName').getString();\n\n      if (attributeType === 'CSS') {\n        return this.parent.getStyle(attributeName, true);\n      }\n\n      return this.parent.getAttribute(attributeName, true);\n    }\n  }, {\n    key: \"calcValue\",\n    value: function calcValue() {\n      var initialUnits = this.initialUnits;\n\n      var _this$getProgress = this.getProgress(),\n          progress = _this$getProgress.progress,\n          from = _this$getProgress.from,\n          to = _this$getProgress.to; // tween value linearly\n\n\n      var newValue = from.getNumber() + (to.getNumber() - from.getNumber()) * progress;\n\n      if (initialUnits === '%') {\n        newValue *= 100.0; // numValue() returns 0-1 whereas properties are 0-100\n      }\n\n      return \"\".concat(newValue).concat(initialUnits);\n    }\n  }, {\n    key: \"update\",\n    value: function update(delta) {\n      var parent = this.parent;\n      var prop = this.getProperty(); // set initial value\n\n      if (!this.initialValue) {\n        this.initialValue = prop.getString();\n        this.initialUnits = prop.getUnits();\n      } // if we're past the end time\n\n\n      if (this.duration > this.maxDuration) {\n        var fill = this.getAttribute('fill').getString('remove'); // loop for indefinitely repeating animations\n\n        if (this.getAttribute('repeatCount').getString() === 'indefinite' || this.getAttribute('repeatDur').getString() === 'indefinite') {\n          this.duration = 0;\n        } else if (fill === 'freeze' && !this.frozen) {\n          this.frozen = true;\n          parent.animationFrozen = true;\n          parent.animationFrozenValue = prop.getString();\n        } else if (fill === 'remove' && !this.removed) {\n          this.removed = true;\n          prop.setValue(parent.animationFrozen ? parent.animationFrozenValue : this.initialValue);\n          return true;\n        }\n\n        return false;\n      }\n\n      this.duration += delta; // if we're past the begin time\n\n      var updated = false;\n\n      if (this.begin < this.duration) {\n        var newValue = this.calcValue(); // tween\n\n        var typeAttr = this.getAttribute('type');\n\n        if (typeAttr.hasValue()) {\n          // for transform, etc.\n          var type = typeAttr.getString();\n          newValue = \"\".concat(type, \"(\").concat(newValue, \")\");\n        }\n\n        prop.setValue(newValue);\n        updated = true;\n      }\n\n      return updated;\n    }\n  }, {\n    key: \"getProgress\",\n    value: function getProgress() {\n      var document = this.document,\n          values = this.values;\n      var result = {\n        progress: (this.duration - this.begin) / (this.maxDuration - this.begin)\n      };\n\n      if (values.hasValue()) {\n        var p = result.progress * (values.getValue().length - 1);\n        var lb = Math.floor(p);\n        var ub = Math.ceil(p);\n        result.from = new Property(document, 'from', parseFloat(values.getValue()[lb]));\n        result.to = new Property(document, 'to', parseFloat(values.getValue()[ub]));\n        result.progress = (p - lb) / (ub - lb);\n      } else {\n        result.from = this.from;\n        result.to = this.to;\n      }\n\n      return result;\n    }\n  }]);\n\n  return AnimateElement;\n}(Element);\n\nfunction _createSuper$p(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$p()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$p() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar AnimateColorElement = /*#__PURE__*/function (_AnimateElement) {\n  _inherits(AnimateColorElement, _AnimateElement);\n\n  var _super = _createSuper$p(AnimateColorElement);\n\n  function AnimateColorElement() {\n    var _this;\n\n    _classCallCheck(this, AnimateColorElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'animateColor';\n    return _this;\n  }\n\n  _createClass(AnimateColorElement, [{\n    key: \"calcValue\",\n    value: function calcValue() {\n      var _this$getProgress = this.getProgress(),\n          progress = _this$getProgress.progress,\n          from = _this$getProgress.from,\n          to = _this$getProgress.to;\n\n      var colorFrom = new RGBColor(from.getColor());\n      var colorTo = new RGBColor(to.getColor());\n\n      if (colorFrom.ok && colorTo.ok) {\n        // tween color linearly\n        var r = colorFrom.r + (colorTo.r - colorFrom.r) * progress;\n        var g = colorFrom.g + (colorTo.g - colorFrom.g) * progress;\n        var b = colorFrom.b + (colorTo.b - colorFrom.b) * progress; // ? alpha\n\n        return \"rgb(\".concat(parseInt(r, 10), \", \").concat(parseInt(g, 10), \", \").concat(parseInt(b, 10), \")\");\n      }\n\n      return this.getAttribute('from').getColor();\n    }\n  }]);\n\n  return AnimateColorElement;\n}(AnimateElement);\n\nfunction _createSuper$q(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$q()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$q() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar AnimateTransformElement = /*#__PURE__*/function (_AnimateElement) {\n  _inherits(AnimateTransformElement, _AnimateElement);\n\n  var _super = _createSuper$q(AnimateTransformElement);\n\n  function AnimateTransformElement() {\n    var _this;\n\n    _classCallCheck(this, AnimateTransformElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'animateTransform';\n    return _this;\n  }\n\n  _createClass(AnimateTransformElement, [{\n    key: \"calcValue\",\n    value: function calcValue() {\n      var _this$getProgress = this.getProgress(),\n          progress = _this$getProgress.progress,\n          from = _this$getProgress.from,\n          to = _this$getProgress.to; // tween value linearly\n\n\n      var transformFrom = toNumbers(from.getString());\n      var transformTo = toNumbers(to.getString());\n      var newValue = transformFrom.map(function (from, i) {\n        var to = transformTo[i];\n        return from + (to - from) * progress;\n      }).join(' ');\n      return newValue;\n    }\n  }]);\n\n  return AnimateTransformElement;\n}(AnimateElement);\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper$r(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$r()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$r() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar FontElement = /*#__PURE__*/function (_Element) {\n  _inherits(FontElement, _Element);\n\n  var _super = _createSuper$r(FontElement);\n\n  function FontElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, FontElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'font';\n    _this.glyphs = {};\n    _this.horizAdvX = _this.getAttribute('horiz-adv-x').getNumber();\n    var definitions = document.definitions;\n\n    var _assertThisInitialize = _assertThisInitialized(_this),\n        children = _assertThisInitialize.children;\n\n    var _iterator = _createForOfIteratorHelper(children),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var child = _step.value;\n\n        switch (child.type) {\n          case 'font-face':\n            {\n              _this.fontFace = child;\n              var fontFamilyStyle = child.getStyle('font-family');\n\n              if (fontFamilyStyle.hasValue()) {\n                definitions[fontFamilyStyle.getString()] = _assertThisInitialized(_this);\n              }\n\n              break;\n            }\n\n          case 'missing-glyph':\n            _this.missingGlyph = child;\n            break;\n\n          case 'glyph':\n            {\n              var glyph = child;\n\n              if (glyph.arabicForm) {\n                _this.isRTL = true;\n                _this.isArabic = true;\n\n                if (typeof _this.glyphs[glyph.unicode] === 'undefined') {\n                  _this.glyphs[glyph.unicode] = {};\n                }\n\n                _this.glyphs[glyph.unicode][glyph.arabicForm] = glyph;\n              } else {\n                _this.glyphs[glyph.unicode] = glyph;\n              }\n\n              break;\n            }\n\n          default:\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return _this;\n  }\n\n  _createClass(FontElement, [{\n    key: \"render\",\n    value: function render() {// NO RENDER\n    }\n  }]);\n\n  return FontElement;\n}(Element);\n\nfunction _createSuper$s(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$s()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$s() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar FontFaceElement = /*#__PURE__*/function (_Element) {\n  _inherits(FontFaceElement, _Element);\n\n  var _super = _createSuper$s(FontFaceElement);\n\n  function FontFaceElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, FontFaceElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'font-face';\n    _this.ascent = _this.getAttribute('ascent').getNumber();\n    _this.descent = _this.getAttribute('descent').getNumber();\n    _this.unitsPerEm = _this.getAttribute('units-per-em').getNumber();\n    return _this;\n  }\n\n  return FontFaceElement;\n}(Element);\n\nfunction _createSuper$t(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$t()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$t() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar MissingGlyphElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(MissingGlyphElement, _PathElement);\n\n  var _super = _createSuper$t(MissingGlyphElement);\n\n  function MissingGlyphElement() {\n    var _this;\n\n    _classCallCheck(this, MissingGlyphElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'missing-glyph';\n    _this.horizAdvX = 0;\n    return _this;\n  }\n\n  return MissingGlyphElement;\n}(PathElement);\n\nfunction _createSuper$u(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$u()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$u() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar GlyphElement = /*#__PURE__*/function (_PathElement) {\n  _inherits(GlyphElement, _PathElement);\n\n  var _super = _createSuper$u(GlyphElement);\n\n  function GlyphElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, GlyphElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'glyph';\n    _this.horizAdvX = _this.getAttribute('horiz-adv-x').getNumber();\n    _this.unicode = _this.getAttribute('unicode').getString();\n    _this.arabicForm = _this.getAttribute('arabic-form').getString();\n    return _this;\n  }\n\n  return GlyphElement;\n}(PathElement);\n\nfunction _createSuper$v(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$v()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$v() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar TRefElement = /*#__PURE__*/function (_TextElement) {\n  _inherits(TRefElement, _TextElement);\n\n  var _super = _createSuper$v(TRefElement);\n\n  function TRefElement() {\n    var _this;\n\n    _classCallCheck(this, TRefElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'tref';\n    return _this;\n  }\n\n  _createClass(TRefElement, [{\n    key: \"getText\",\n    value: function getText() {\n      var element = this.getHrefAttribute().getDefinition();\n\n      if (element) {\n        var firstChild = element.children[0];\n\n        if (firstChild) {\n          return firstChild.getText();\n        }\n      }\n\n      return '';\n    }\n  }]);\n\n  return TRefElement;\n}(TextElement);\n\nfunction _createSuper$w(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$w()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$w() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar AElement = /*#__PURE__*/function (_TextElement) {\n  _inherits(AElement, _TextElement);\n\n  var _super = _createSuper$w(AElement);\n\n  function AElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, AElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'a';\n    var childNodes = node.childNodes;\n    var firstChild = childNodes[0];\n    var hasText = childNodes.length > 0 && Array.from(childNodes).every(function (node) {\n      return node.nodeType === 3;\n    });\n    _this.hasText = hasText;\n    _this.text = hasText ? _this.getTextFromNode(firstChild) : '';\n    return _this;\n  }\n\n  _createClass(AElement, [{\n    key: \"getText\",\n    value: function getText() {\n      return this.text;\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      if (this.hasText) {\n        // render as text element\n        _get(_getPrototypeOf(AElement.prototype), \"renderChildren\", this).call(this, ctx);\n\n        var document = this.document,\n            x = this.x,\n            y = this.y;\n        var mouse = document.screen.mouse;\n        var fontSize = new Property(document, 'fontSize', Font.parse(document.ctx.font).fontSize); // Do not calc bounding box if mouse is not working.\n\n        if (mouse.isWorking()) {\n          mouse.checkBoundingBox(this, new BoundingBox(x, y - fontSize.getPixels('y'), x + this.measureText(ctx), y));\n        }\n      } else if (this.children.length > 0) {\n        // render as temporary group\n        var g = new GElement(this.document, null);\n        g.children = this.children;\n        g.parent = this;\n        g.render(ctx);\n      }\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick() {\n      var window = this.document.window;\n\n      if (window) {\n        window.open(this.getHrefAttribute().getString());\n      }\n    }\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove() {\n      var ctx = this.document.ctx;\n      ctx.canvas.style.cursor = 'pointer';\n    }\n  }]);\n\n  return AElement;\n}(TextElement);\n\nfunction _createForOfIteratorHelper$1(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray$1(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray$1(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen); }\n\nfunction _arrayLikeToArray$1(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper$x(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$x()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$x() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar TextPathElement = /*#__PURE__*/function (_TextElement) {\n  _inherits(TextPathElement, _TextElement);\n\n  var _super = _createSuper$x(TextPathElement);\n\n  function TextPathElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, TextPathElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'textPath';\n    _this.textWidth = 0;\n    _this.textHeight = 0;\n    _this.pathLength = -1;\n    _this.glyphInfo = null;\n    _this.letterSpacingCache = [];\n    _this.measuresCache = new Map([['', 0]]);\n\n    var pathElement = _this.getHrefAttribute().getDefinition();\n\n    _this.text = _this.getTextFromNode();\n    _this.dataArray = _this.parsePathData(pathElement);\n    return _this;\n  }\n\n  _createClass(TextPathElement, [{\n    key: \"getText\",\n    value: function getText() {\n      return this.text;\n    }\n  }, {\n    key: \"path\",\n    value: function path(ctx) {\n      var dataArray = this.dataArray;\n\n      if (ctx) {\n        ctx.beginPath();\n      }\n\n      dataArray.forEach(function (_ref) {\n        var command = _ref.command,\n            points = _ref.points;\n\n        switch (command) {\n          case 'L':\n            if (ctx) {\n              ctx.lineTo(points[0], points[1]);\n            }\n\n            break;\n\n          case 'M':\n            if (ctx) {\n              ctx.moveTo(points[0], points[1]);\n            }\n\n            break;\n\n          case 'C':\n            if (ctx) {\n              ctx.bezierCurveTo(points[0], points[1], points[2], points[3], points[4], points[5]);\n            }\n\n            break;\n\n          case 'Q':\n            if (ctx) {\n              ctx.quadraticCurveTo(points[0], points[1], points[2], points[3]);\n            }\n\n            break;\n\n          case 'A':\n            {\n              var cx = points[0];\n              var cy = points[1];\n              var rx = points[2];\n              var ry = points[3];\n              var theta = points[4];\n              var dTheta = points[5];\n              var psi = points[6];\n              var fs = points[7];\n              var r = rx > ry ? rx : ry;\n              var scaleX = rx > ry ? 1 : rx / ry;\n              var scaleY = rx > ry ? ry / rx : 1;\n\n              if (ctx) {\n                ctx.translate(cx, cy);\n                ctx.rotate(psi);\n                ctx.scale(scaleX, scaleY);\n                ctx.arc(0, 0, r, theta, theta + dTheta, Boolean(1 - fs));\n                ctx.scale(1 / scaleX, 1 / scaleY);\n                ctx.rotate(-psi);\n                ctx.translate(-cx, -cy);\n              }\n\n              break;\n            }\n\n          case 'z':\n            if (ctx) {\n              ctx.closePath();\n            }\n\n            break;\n        }\n      });\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      this.setTextData(ctx);\n      ctx.save();\n      var textDecoration = this.parent.getStyle('text-decoration').getString();\n      var fontSize = this.getFontSize();\n      var glyphInfo = this.glyphInfo;\n      var fill = ctx.fillStyle;\n\n      if (textDecoration === 'underline') {\n        ctx.beginPath();\n      }\n\n      glyphInfo.forEach(function (glyph, i) {\n        var p0 = glyph.p0,\n            p1 = glyph.p1,\n            partialText = glyph.text;\n        ctx.save();\n        ctx.translate(p0.x, p0.y);\n        ctx.rotate(glyphInfo[i].rotation);\n\n        if (ctx.fillStyle) {\n          ctx.fillText(partialText, 0, 0);\n        }\n\n        if (ctx.strokeStyle) {\n          ctx.strokeText(partialText, 0, 0);\n        }\n\n        ctx.restore();\n\n        if (textDecoration === 'underline') {\n          if (i === 0) {\n            ctx.moveTo(p0.x, p0.y + fontSize / 8);\n          }\n\n          ctx.lineTo(p1.x, p1.y + fontSize / 5);\n        } //// To assist with debugging visually, uncomment following\n        //\n        // ctx.beginPath();\n        // if (i % 2)\n        // \tctx.strokeStyle = 'red';\n        // else\n        // \tctx.strokeStyle = 'green';\n        // ctx.moveTo(p0.x, p0.y);\n        // ctx.lineTo(p1.x, p1.y);\n        // ctx.stroke();\n        // ctx.closePath();\n\n      });\n\n      if (textDecoration === 'underline') {\n        ctx.lineWidth = fontSize / 20;\n        ctx.strokeStyle = fill;\n        ctx.stroke();\n        ctx.closePath();\n      }\n\n      ctx.restore();\n    }\n  }, {\n    key: \"getLetterSpacingAt\",\n    value: function getLetterSpacingAt() {\n      var idx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this.letterSpacingCache[idx] || 0;\n    }\n  }, {\n    key: \"findSegmentToFitChar\",\n    value: function findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, inputOffset, c, charI) {\n      var offset = inputOffset;\n      var glyphWidth = this.measureText(ctx, c);\n\n      if (c === ' ' && anchor === 'justify' && textFullWidth < fullPathWidth) {\n        glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n      }\n\n      if (charI > -1) {\n        offset += this.getLetterSpacingAt(charI);\n      }\n\n      var splineStep = this.textHeight / 20;\n      var segment = {\n        p0: this.getEquidistantPointOnPath(offset, splineStep),\n        p1: this.getEquidistantPointOnPath(offset + glyphWidth, splineStep)\n      };\n      offset += glyphWidth;\n      return {\n        offset: offset,\n        segment: segment\n      };\n    }\n  }, {\n    key: \"measureText\",\n    value: function measureText(ctx, text) {\n      var measuresCache = this.measuresCache;\n      var targetText = text || this.getText();\n\n      if (measuresCache.has(targetText)) {\n        return measuresCache.get(targetText);\n      }\n\n      var measure = this.measureTargetText(ctx, targetText);\n      measuresCache.set(targetText, measure);\n      return measure;\n    } // This method supposes what all custom fonts already loaded.\n    // If some font will be loaded after this method call, <textPath> will not be rendered correctly.\n    // You need to call this method manually to update glyphs cache.\n\n  }, {\n    key: \"setTextData\",\n    value: function setTextData(ctx) {\n      var _this2 = this;\n\n      if (this.glyphInfo) {\n        return;\n      }\n\n      var renderText = this.getText();\n      var chars = renderText.split('');\n      var spacesNumber = renderText.split(' ').length - 1;\n      var dx = toNumbers(this.parent.getAttribute('dx').getString('0'));\n      var anchor = this.parent.getStyle('text-anchor').getString('start');\n      var thisSpacing = this.getStyle('letter-spacing');\n      var parentSpacing = this.parent.getStyle('letter-spacing');\n      var letterSpacing = 0;\n\n      if (!thisSpacing.hasValue() || thisSpacing.getValue() === 'inherit') {\n        letterSpacing = parentSpacing.getPixels();\n      } else if (thisSpacing.hasValue()) {\n        if (thisSpacing.getValue() !== 'initial' && thisSpacing.getValue() !== 'unset') {\n          letterSpacing = thisSpacing.getPixels();\n        }\n      } // fill letter-spacing cache\n\n\n      var letterSpacingCache = [];\n      var textLen = renderText.length;\n      this.letterSpacingCache = letterSpacingCache;\n\n      for (var i = 0; i < textLen; i++) {\n        letterSpacingCache.push(typeof dx[i] !== 'undefined' ? dx[i] : letterSpacing);\n      }\n\n      var dxSum = letterSpacingCache.reduce(function (acc, cur) {\n        return acc + cur || 0;\n      }, 0);\n      this.textWidth = this.measureText(ctx);\n      this.textHeight = this.getFontSize();\n      var textFullWidth = Math.max(this.textWidth + dxSum, 0);\n      this.glyphInfo = [];\n      var fullPathWidth = this.getPathLength();\n      var startOffset = this.getStyle('startOffset').getNumber(0) * fullPathWidth;\n      var offset = 0;\n\n      if (anchor === 'middle' || anchor === 'center') {\n        offset = -textFullWidth / 2;\n      }\n\n      if (anchor === 'end' || anchor === 'right') {\n        offset = -textFullWidth;\n      }\n\n      offset += startOffset;\n      chars.forEach(function (char, i) {\n        // Find such segment what distance between p0 and p1 is approx. width of glyph\n        var _this2$findSegmentToF = _this2.findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, offset, char, i),\n            nextOffset = _this2$findSegmentToF.offset,\n            segment = _this2$findSegmentToF.segment;\n\n        offset = nextOffset;\n\n        if (!segment.p0 || !segment.p1) {\n          return;\n        }\n\n        var width = _this2.getLineLength(segment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y); // Note: Since glyphs are rendered one at a time, any kerning pair data built into the font will not be used.\n        // Can foresee having a rough pair table built in that the developer can override as needed.\n        // Or use \"dx\" attribute of the <text> node as a naive replacement\n\n\n        var kern = 0; // placeholder for future implementation\n\n        var midpoint = _this2.getPointOnLine(kern + width / 2.0, segment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y);\n\n        var rotation = Math.atan2(segment.p1.y - segment.p0.y, segment.p1.x - segment.p0.x);\n\n        _this2.glyphInfo.push({\n          transposeX: midpoint.x,\n          transposeY: midpoint.y,\n          text: chars[i],\n          p0: segment.p0,\n          p1: segment.p1,\n          rotation: rotation\n        });\n      });\n    }\n  }, {\n    key: \"parsePathData\",\n    value: function parsePathData(path) {\n      this.pathLength = -1; // reset path length\n\n      if (!path) {\n        return [];\n      }\n\n      var pathCommands = [];\n      var pathParser = path.pathParser;\n      pathParser.reset(); // convert l, H, h, V, and v to L\n\n      while (!pathParser.isEnd()) {\n        var current = pathParser.current;\n        var startX = current ? current.x : 0;\n        var startY = current ? current.y : 0;\n        var cmd = '';\n        var points = [];\n        pathParser.nextCommand();\n        var upperCommand = pathParser.command.toUpperCase();\n\n        switch (pathParser.command) {\n          case 'M':\n          case 'm':\n            cmd = this.pathM(pathParser, points);\n            break;\n\n          case 'L':\n          case 'l':\n            cmd = this.pathL(pathParser, points);\n            break;\n\n          case 'H':\n          case 'h':\n            cmd = this.pathH(pathParser, points);\n            break;\n\n          case 'V':\n          case 'v':\n            cmd = this.pathV(pathParser, points);\n            break;\n\n          case 'C':\n          case 'c':\n            this.pathC(pathParser, points);\n            break;\n\n          case 'S':\n          case 's':\n            cmd = this.pathS(pathParser, points);\n            break;\n\n          case 'Q':\n          case 'q':\n            this.pathQ(pathParser, points);\n            break;\n\n          case 'T':\n          case 't':\n            cmd = this.pathT(pathParser, points);\n            break;\n\n          case 'A':\n          case 'a':\n            points = this.pathA(pathParser);\n            break;\n\n          case 'Z':\n          case 'z':\n            pathParser.current = pathParser.start;\n            break;\n        }\n\n        if (upperCommand !== 'Z') {\n          pathCommands.push({\n            command: cmd || upperCommand,\n            points: points,\n            start: {\n              x: startX,\n              y: startY\n            },\n            pathLength: this.calcLength(startX, startY, cmd || upperCommand, points)\n          });\n        } else {\n          pathCommands.push({\n            command: 'z',\n            points: [],\n            pathLength: 0\n          });\n        }\n      }\n\n      return pathCommands;\n    }\n  }, {\n    key: \"pathM\",\n    value: function pathM(pathParser, points) {\n      var p = pathParser.getAsCurrentPoint(); // pathParser.addMarker(p);\n\n      points.push(p.x, p.y);\n      pathParser.start = pathParser.current;\n\n      while (!pathParser.isCommandOrEnd()) {\n        var _p = pathParser.getAsCurrentPoint();\n\n        points.push(_p.x, _p.y);\n        return 'L';\n      }\n    }\n  }, {\n    key: \"pathL\",\n    value: function pathL(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var p = pathParser.getAsCurrentPoint();\n        points.push(p.x, p.y);\n      }\n\n      return 'L';\n    }\n  }, {\n    key: \"pathH\",\n    value: function pathH(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = new Point((pathParser.isRelativeCommand() ? current.x : 0) + pathParser.getScalar(), current.y);\n        points.push(point.x, point.y);\n        pathParser.current = point;\n      }\n\n      return 'L';\n    }\n  }, {\n    key: \"pathV\",\n    value: function pathV(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current;\n        var point = new Point(current.x, (pathParser.isRelativeCommand() ? current.y : 0) + pathParser.getScalar());\n        points.push(point.x, point.y);\n        pathParser.current = point;\n      }\n\n      return 'L';\n    }\n  }, {\n    key: \"pathC\",\n    value: function pathC(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var point = pathParser.getPoint();\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n      }\n    }\n  }, {\n    key: \"pathS\",\n    value: function pathS(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var point = pathParser.getReflectedControlPoint();\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n      }\n\n      return 'C';\n    }\n  }, {\n    key: \"pathQ\",\n    value: function pathQ(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var controlPoint = pathParser.getAsControlPoint();\n        var currentPoint = pathParser.getAsCurrentPoint();\n        points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n      }\n    }\n  }, {\n    key: \"pathT\",\n    value: function pathT(pathParser, points) {\n      while (!pathParser.isCommandOrEnd()) {\n        var controlPoint = pathParser.getReflectedControlPoint();\n        pathParser.control = controlPoint;\n        var currentPoint = pathParser.getAsCurrentPoint();\n        points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n      }\n\n      return 'Q';\n    }\n  }, {\n    key: \"pathA\",\n    value: function pathA(pathParser) {\n      while (!pathParser.isCommandOrEnd()) {\n        var current = pathParser.current; // x1, y1\n\n        var rx = pathParser.getScalar();\n        var ry = pathParser.getScalar();\n        var xAxisRotation = pathParser.getScalar() * (Math.PI / 180.0); // \n\n        var largeArcFlag = pathParser.getScalar(); //  fA\n\n        var sweepFlag = pathParser.getScalar(); //  fS\n\n        var currentPoint = pathParser.getAsCurrentPoint(); // x2, y2\n        // Conversion from endpoint to center parameterization\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n        // x1', y1'\n\n        var currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2.0, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2.0); // adjust radii\n\n        var l = Math.pow(currp.x, 2) / Math.pow(rx, 2) + Math.pow(currp.y, 2) / Math.pow(ry, 2);\n\n        if (l > 1) {\n          rx *= Math.sqrt(l);\n          ry *= Math.sqrt(l);\n        } // cx', cy'\n\n\n        var s = (largeArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(currp.y, 2) - Math.pow(ry, 2) * Math.pow(currp.x, 2)) / (Math.pow(rx, 2) * Math.pow(currp.y, 2) + Math.pow(ry, 2) * Math.pow(currp.x, 2)));\n\n        if (isNaN(s)) {\n          s = 0;\n        }\n\n        var cpp = new Point(s * rx * currp.y / ry, s * -ry * currp.x / rx); // cx, cy\n\n        var centp = new Point((current.x + currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y); // initial angle\n\n        var a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry]); // 1\n        // angle delta\n\n        var u = [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry];\n        var v = [(-currp.x - cpp.x) / rx, (-currp.y - cpp.y) / ry];\n        var ad = vectorsAngle(u, v); // \n\n        if (vectorsRatio(u, v) <= -1) {\n          ad = Math.PI;\n        }\n\n        if (vectorsRatio(u, v) >= 1) {\n          ad = 0;\n        }\n\n        if (sweepFlag === 0 && ad > 0) {\n          ad = ad - 2 * Math.PI;\n        }\n\n        if (sweepFlag === 1 && ad < 0) {\n          ad = ad + 2 * Math.PI;\n        }\n\n        return [centp.x, centp.y, rx, ry, a1, ad, xAxisRotation, sweepFlag];\n      }\n    }\n  }, {\n    key: \"calcLength\",\n    value: function calcLength(x, y, cmd, points) {\n      var len = 0;\n      var p1 = null;\n      var p2 = null;\n      var t = 0;\n\n      switch (cmd) {\n        case 'L':\n          return this.getLineLength(x, y, points[0], points[1]);\n\n        case 'C':\n          // Approximates by breaking curve into 100 line segments\n          len = 0.0;\n          p1 = this.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n\n          for (t = 0.01; t <= 1; t += 0.01) {\n            p2 = this.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n            len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n\n          return len;\n\n        case 'Q':\n          // Approximates by breaking curve into 100 line segments\n          len = 0.0;\n          p1 = this.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n\n          for (t = 0.01; t <= 1; t += 0.01) {\n            p2 = this.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n            len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n\n          return len;\n\n        case 'A':\n          // Approximates by breaking curve into line segments\n          len = 0.0;\n          var start = points[4]; // 4 = theta\n\n          var dTheta = points[5]; // 5 = dTheta\n\n          var end = points[4] + dTheta;\n          var inc = Math.PI / 180.0; // 1 degree resolution\n\n          if (Math.abs(start - end) < inc) {\n            inc = Math.abs(start - end);\n          } // Note: for purpose of calculating arc length, not going to worry about rotating X-axis by angle psi\n\n\n          p1 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n\n          if (dTheta < 0) {\n            // clockwise\n            for (t = start - inc; t > end; t -= inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          } else {\n            // counter-clockwise\n            for (t = start + inc; t < end; t += inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          }\n\n          p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          return len;\n      }\n\n      return 0;\n    }\n  }, {\n    key: \"getPointOnLine\",\n    value: function getPointOnLine(dist, P1x, P1y, P2x, P2y) {\n      var fromX = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : P1x;\n      var fromY = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : P1y;\n      var m = (P2y - P1y) / (P2x - P1x + PSEUDO_ZERO);\n      var run = Math.sqrt(dist * dist / (1 + m * m));\n\n      if (P2x < P1x) {\n        run *= -1;\n      }\n\n      var rise = m * run;\n      var pt = null;\n\n      if (P2x === P1x) {\n        // vertical line\n        pt = {\n          x: fromX,\n          y: fromY + rise\n        };\n      } else if ((fromY - P1y) / (fromX - P1x + PSEUDO_ZERO) === m) {\n        pt = {\n          x: fromX + run,\n          y: fromY + rise\n        };\n      } else {\n        var ix = 0;\n        var iy = 0;\n        var len = this.getLineLength(P1x, P1y, P2x, P2y);\n\n        if (len < PSEUDO_ZERO) {\n          return null;\n        }\n\n        var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n        u = u / (len * len);\n        ix = P1x + u * (P2x - P1x);\n        iy = P1y + u * (P2y - P1y);\n        var pRise = this.getLineLength(fromX, fromY, ix, iy);\n        var pRun = Math.sqrt(dist * dist - pRise * pRise);\n        run = Math.sqrt(pRun * pRun / (1 + m * m));\n\n        if (P2x < P1x) {\n          run *= -1;\n        }\n\n        rise = m * run;\n        pt = {\n          x: ix + run,\n          y: iy + rise\n        };\n      }\n\n      return pt;\n    }\n  }, {\n    key: \"getPointOnPath\",\n    value: function getPointOnPath(distance) {\n      var fullLen = this.getPathLength();\n      var cumulativePathLength = 0;\n      var p = null;\n\n      if (distance < -0.00005 || distance - 0.00005 > fullLen) {\n        return null;\n      }\n\n      var dataArray = this.dataArray;\n\n      var _iterator = _createForOfIteratorHelper$1(dataArray),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var pathCmd = _step.value;\n\n          if (pathCmd && (pathCmd.pathLength < 0.00005 || cumulativePathLength + pathCmd.pathLength + 0.00005 < distance)) {\n            cumulativePathLength += pathCmd.pathLength;\n            continue;\n          }\n\n          var delta = distance - cumulativePathLength;\n          var currentT = 0;\n\n          switch (pathCmd.command) {\n            case 'L':\n              p = this.getPointOnLine(delta, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.start.x, pathCmd.start.y);\n              break;\n\n            case 'A':\n              var start = pathCmd.points[4]; // 4 = theta\n\n              var dTheta = pathCmd.points[5]; // 5 = dTheta\n\n              var end = pathCmd.points[4] + dTheta;\n              currentT = start + delta / pathCmd.pathLength * dTheta;\n\n              if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n                break;\n              }\n\n              p = this.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n              break;\n\n            case 'C':\n              currentT = delta / pathCmd.pathLength;\n\n              if (currentT > 1) {\n                currentT = 1;\n              }\n\n              p = this.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n              break;\n\n            case 'Q':\n              currentT = delta / pathCmd.pathLength;\n\n              if (currentT > 1) {\n                currentT = 1;\n              }\n\n              p = this.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n              break;\n\n            default:\n          }\n\n          if (p) {\n            return p;\n          }\n\n          break;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getLineLength\",\n    value: function getLineLength(x1, y1, x2, y2) {\n      return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    }\n  }, {\n    key: \"getPathLength\",\n    value: function getPathLength() {\n      if (this.pathLength === -1) {\n        this.pathLength = this.dataArray.reduce(function (length, command) {\n          return command.pathLength > 0 ? length + command.pathLength : length;\n        }, 0);\n      }\n\n      return this.pathLength;\n    }\n  }, {\n    key: \"getPointOnCubicBezier\",\n    value: function getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n      var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n      var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"getPointOnQuadraticBezier\",\n    value: function getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n      var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n      var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"getPointOnEllipticalArc\",\n    value: function getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n      var cosPsi = Math.cos(psi);\n      var sinPsi = Math.sin(psi);\n      var pt = {\n        x: rx * Math.cos(theta),\n        y: ry * Math.sin(theta)\n      };\n      return {\n        x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n        y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n      };\n    } // TODO need some optimisations. possibly build cache only for curved segments?\n\n  }, {\n    key: \"buildEquidistantCache\",\n    value: function buildEquidistantCache(inputStep, inputPrecision) {\n      var fullLen = this.getPathLength();\n      var precision = inputPrecision || 0.25; // accuracy vs performance\n\n      var step = inputStep || fullLen / 100;\n\n      if (!this.equidistantCache || this.equidistantCache.step !== step || this.equidistantCache.precision !== precision) {\n        // Prepare cache\n        this.equidistantCache = {\n          step: step,\n          precision: precision,\n          points: []\n        }; // Calculate points\n\n        var s = 0;\n\n        for (var l = 0; l <= fullLen; l += precision) {\n          var p0 = this.getPointOnPath(l);\n          var p1 = this.getPointOnPath(l + precision);\n\n          if (!p0 || !p1) {\n            continue;\n          }\n\n          s += this.getLineLength(p0.x, p0.y, p1.x, p1.y);\n\n          if (s >= step) {\n            this.equidistantCache.points.push({\n              x: p0.x,\n              y: p0.y,\n              distance: l\n            });\n            s -= step;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"getEquidistantPointOnPath\",\n    value: function getEquidistantPointOnPath(targetDistance, step, precision) {\n      this.buildEquidistantCache(step, precision);\n\n      if (targetDistance < 0 || targetDistance - this.getPathLength() > 0.00005) {\n        return null;\n      }\n\n      var idx = Math.round(targetDistance / this.getPathLength() * (this.equidistantCache.points.length - 1));\n      return this.equidistantCache.points[idx] || null;\n    }\n  }]);\n\n  return TextPathElement;\n}(TextElement);\n\nfunction _createSuper$y(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$y()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$y() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar ImageElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(ImageElement, _RenderedElement);\n\n  var _super = _createSuper$y(ImageElement);\n\n  function ImageElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, ImageElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'image';\n    _this.loaded = false;\n\n    var href = _this.getHrefAttribute().getString();\n\n    if (!href) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    var isSvg = /\\.svg$/.test(href);\n    document.images.push(_assertThisInitialized(_this));\n\n    if (!isSvg) {\n      _this.loadImage(href);\n    } else {\n      _this.loadSvg(href);\n    }\n\n    _this.isSvg = isSvg;\n    return _this;\n  }\n\n  _createClass(ImageElement, [{\n    key: \"loadImage\",\n    value: function () {\n      var _loadImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(href) {\n        var image;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.document.createImage(href);\n\n              case 3:\n                image = _context.sent;\n                this.image = image;\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                // tslint:disable-next-line: no-console\n                console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), _context.t0);\n\n              case 10:\n                this.loaded = true;\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 7]]);\n      }));\n\n      function loadImage(_x) {\n        return _loadImage.apply(this, arguments);\n      }\n\n      return loadImage;\n    }()\n  }, {\n    key: \"loadSvg\",\n    value: function () {\n      var _loadSvg = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(href) {\n        var response, svg;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.document.fetch(href);\n\n              case 3:\n                response = _context2.sent;\n                _context2.next = 6;\n                return response.text();\n\n              case 6:\n                svg = _context2.sent;\n                this.image = svg;\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](0);\n                // tslint:disable-next-line: no-console\n                console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), _context2.t0);\n\n              case 13:\n                this.loaded = true;\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 10]]);\n      }));\n\n      function loadSvg(_x2) {\n        return _loadSvg.apply(this, arguments);\n      }\n\n      return loadSvg;\n    }()\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      var document = this.document,\n          image = this.image,\n          loaded = this.loaded;\n      var x = this.getAttribute('x').getPixels('x');\n      var y = this.getAttribute('y').getPixels('y');\n      var width = this.getStyle('width').getPixels('x');\n      var height = this.getStyle('height').getPixels('y');\n\n      if (!loaded || !image || !width || !height) {\n        return;\n      }\n\n      ctx.save();\n\n      if (this.isSvg) {\n        document.canvg.forkString(ctx, this.image, {\n          ignoreMouse: true,\n          ignoreAnimation: true,\n          ignoreDimensions: true,\n          ignoreClear: true,\n          offsetX: x,\n          offsetY: y,\n          scaleWidth: width,\n          scaleHeight: height\n        }).render();\n      } else {\n        var _image = this.image;\n        ctx.translate(x, y);\n        document.setViewBox({\n          ctx: ctx,\n          aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n          width: width,\n          desiredWidth: _image.width,\n          height: height,\n          desiredHeight: _image.height\n        });\n\n        if (this.loaded) {\n          if (typeof _image.complete === 'undefined' || _image.complete) {\n            ctx.drawImage(_image, 0, 0);\n          }\n        }\n      }\n\n      ctx.restore();\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox() {\n      var x = this.getAttribute('x').getPixels('x');\n      var y = this.getAttribute('y').getPixels('y');\n      var width = this.getStyle('width').getPixels('x');\n      var height = this.getStyle('height').getPixels('y');\n      return new BoundingBox(x, y, x + width, y + height);\n    }\n  }]);\n\n  return ImageElement;\n}(RenderedElement);\n\nfunction _createSuper$z(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$z()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$z() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar SymbolElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(SymbolElement, _RenderedElement);\n\n  var _super = _createSuper$z(SymbolElement);\n\n  function SymbolElement() {\n    var _this;\n\n    _classCallCheck(this, SymbolElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'symbol';\n    return _this;\n  }\n\n  _createClass(SymbolElement, [{\n    key: \"render\",\n    value: function render(_) {// NO RENDER\n    }\n  }]);\n\n  return SymbolElement;\n}(RenderedElement);\n\nvar SVGFontLoader = /*#__PURE__*/function () {\n  function SVGFontLoader(document) {\n    _classCallCheck(this, SVGFontLoader);\n\n    this.document = document;\n    this.loaded = false;\n    document.fonts.push(this);\n  }\n\n  _createClass(SVGFontLoader, [{\n    key: \"load\",\n    value: function () {\n      var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fontFamily, url) {\n        var document, svgDocument, fonts;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                document = this.document;\n                _context.next = 4;\n                return document.canvg.parser.load(url);\n\n              case 4:\n                svgDocument = _context.sent;\n                fonts = svgDocument.getElementsByTagName('font');\n                Array.from(fonts).forEach(function (fontNode) {\n                  var font = document.createElement(fontNode);\n                  document.definitions[fontFamily] = font;\n                });\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n                // tslint:disable-next-line: no-console\n                console.error(\"Error while loading font \\\"\".concat(url, \"\\\":\"), _context.t0);\n\n              case 12:\n                this.loaded = true;\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 9]]);\n      }));\n\n      function load(_x, _x2) {\n        return _load.apply(this, arguments);\n      }\n\n      return load;\n    }()\n  }]);\n\n  return SVGFontLoader;\n}();\n\nfunction _createSuper$A(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$A()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$A() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar StyleElement = /*#__PURE__*/function (_Element) {\n  _inherits(StyleElement, _Element);\n\n  var _super = _createSuper$A(StyleElement);\n\n  function StyleElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, StyleElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'style';\n    var css = compressSpaces(Array.from(node.childNodes).map(function (_) {\n      return _.data;\n    }).join('').replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*\\/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, '') // remove comments\n    .replace(/@import.*;/g, '') // remove imports\n    );\n    var cssDefs = css.split('}');\n    cssDefs.forEach(function (_) {\n      var def = _.trim();\n\n      if (!def) {\n        return;\n      }\n\n      var cssParts = def.split('{');\n      var cssClasses = cssParts[0].split(',');\n      var cssProps = cssParts[1].split(';');\n      cssClasses.forEach(function (_) {\n        var cssClass = _.trim();\n\n        if (!cssClass) {\n          return;\n        }\n\n        var props = document.styles[cssClass] || {};\n        cssProps.forEach(function (cssProp) {\n          var prop = cssProp.indexOf(':');\n          var name = cssProp.substr(0, prop).trim();\n          var value = cssProp.substr(prop + 1, cssProp.length - prop).trim();\n\n          if (name && value) {\n            props[name] = new Property(document, name, value);\n          }\n        });\n        document.styles[cssClass] = props;\n        document.stylesSpecificity[cssClass] = getSelectorSpecificity(cssClass);\n\n        if (cssClass === '@font-face') {\n          //  && !nodeEnv\n          var fontFamily = props['font-family'].getString().replace(/\"|'/g, '');\n          var srcs = props.src.getString().split(',');\n          srcs.forEach(function (src) {\n            if (src.indexOf('format(\"svg\")') > 0) {\n              var url = parseExternalUrl(src);\n\n              if (url) {\n                new SVGFontLoader(document).load(fontFamily, url);\n              }\n            }\n          });\n        }\n      });\n    });\n    return _this;\n  }\n\n  return StyleElement;\n}(Element);\nStyleElement.parseExternalUrl = parseExternalUrl;\n\nfunction _createSuper$B(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$B()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$B() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar UseElement = /*#__PURE__*/function (_RenderedElement) {\n  _inherits(UseElement, _RenderedElement);\n\n  var _super = _createSuper$B(UseElement);\n\n  function UseElement() {\n    var _this;\n\n    _classCallCheck(this, UseElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'use';\n    return _this;\n  }\n\n  _createClass(UseElement, [{\n    key: \"setContext\",\n    value: function setContext(ctx) {\n      _get(_getPrototypeOf(UseElement.prototype), \"setContext\", this).call(this, ctx);\n\n      var xAttr = this.getAttribute('x');\n      var yAttr = this.getAttribute('y');\n\n      if (xAttr.hasValue()) {\n        ctx.translate(xAttr.getPixels('x'), 0);\n      }\n\n      if (yAttr.hasValue()) {\n        ctx.translate(0, yAttr.getPixels('y'));\n      }\n    }\n  }, {\n    key: \"path\",\n    value: function path(ctx) {\n      var element = this.element;\n\n      if (element) {\n        element.path(ctx);\n      }\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren(ctx) {\n      var document = this.document,\n          element = this.element;\n\n      if (element) {\n        var tempSvg = element;\n\n        if (element.type === 'symbol') {\n          // render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)\n          tempSvg = new SVGElement(document, null);\n          tempSvg.attributes.viewBox = new Property(document, 'viewBox', element.getAttribute('viewBox').getString());\n          tempSvg.attributes.preserveAspectRatio = new Property(document, 'preserveAspectRatio', element.getAttribute('preserveAspectRatio').getString());\n          tempSvg.attributes.overflow = new Property(document, 'overflow', element.getAttribute('overflow').getString());\n          tempSvg.children = element.children;\n        }\n\n        if (tempSvg.type === 'svg') {\n          var widthStyle = this.getStyle('width', false, true);\n          var heightStyle = this.getStyle('height', false, true); // if symbol or svg, inherit width/height from me\n\n          if (widthStyle.hasValue()) {\n            tempSvg.attributes.width = new Property(document, 'width', widthStyle.getString());\n          }\n\n          if (heightStyle.hasValue()) {\n            tempSvg.attributes.height = new Property(document, 'height', heightStyle.getString());\n          }\n        }\n\n        var oldParent = tempSvg.parent;\n        tempSvg.parent = this;\n        tempSvg.render(ctx);\n        tempSvg.parent = oldParent;\n      }\n    }\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox(ctx) {\n      var element = this.element;\n\n      if (element) {\n        return element.getBoundingBox(ctx);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"elementTransform\",\n    value: function elementTransform() {\n      var document = this.document,\n          element = this.element;\n      return Transform.fromElement(document, element);\n    }\n  }, {\n    key: \"element\",\n    get: function get() {\n      if (!this._element) {\n        this._element = this.getHrefAttribute().getDefinition();\n      }\n\n      return this._element;\n    }\n  }]);\n\n  return UseElement;\n}(RenderedElement);\n\nfunction _createSuper$C(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$C()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$C() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction imGet(img, x, y, width, _, rgba) {\n  return img[y * width * 4 + x * 4 + rgba];\n}\n\nfunction imSet(img, x, y, width, _, rgba, val) {\n  img[y * width * 4 + x * 4 + rgba] = val;\n}\n\nfunction m(matrix, i, v) {\n  var mi = matrix[i];\n  return mi * (mi < 0 ? v - 255 : v);\n}\n\nfunction c(a, m1, m2, m3) {\n  return m1 + Math.cos(a) * m2 + Math.sin(a) * m3;\n}\n\nvar FeColorMatrixElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeColorMatrixElement, _Element);\n\n  var _super = _createSuper$C(FeColorMatrixElement);\n\n  function FeColorMatrixElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, FeColorMatrixElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'feColorMatrix';\n    var matrix = toNumbers(_this.getAttribute('values').getString());\n\n    switch (_this.getAttribute('type').getString('matrix')) {\n      // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement\n      case 'saturate':\n        {\n          var s = matrix[0];\n          matrix = [0.213 + 0.787 * s, 0.715 - 0.715 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 + 0.285 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 - 0.715 * s, 0.072 + 0.928 * s, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          break;\n        }\n\n      case 'hueRotate':\n        {\n          var a = matrix[0] * Math.PI / 180.0;\n          matrix = [c(a, 0.213, 0.787, -0.213), c(a, 0.715, -0.715, -0.715), c(a, 0.072, -0.072, 0.928), 0, 0, c(a, 0.213, -0.213, 0.143), c(a, 0.715, 0.285, 0.140), c(a, 0.072, -0.072, -0.283), 0, 0, c(a, 0.213, -0.213, -0.787), c(a, 0.715, -0.715, 0.715), c(a, 0.072, 0.928, 0.072), 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          break;\n        }\n\n      case 'luminanceToAlpha':\n        matrix = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2125, 0.7154, 0.0721, 0, 0, 0, 0, 0, 0, 1];\n        break;\n    }\n\n    _this.matrix = matrix;\n    _this.includeOpacity = _this.getAttribute('includeOpacity').hasValue();\n    return _this;\n  }\n\n  _createClass(FeColorMatrixElement, [{\n    key: \"apply\",\n    value: function apply(ctx, _, __, width, height) {\n      // assuming x==0 && y==0 for now\n      var includeOpacity = this.includeOpacity,\n          matrix = this.matrix;\n      var srcData = ctx.getImageData(0, 0, width, height);\n\n      for (var y = 0; y < height; y++) {\n        for (var x = 0; x < width; x++) {\n          var r = imGet(srcData.data, x, y, width, height, 0);\n          var g = imGet(srcData.data, x, y, width, height, 1);\n          var b = imGet(srcData.data, x, y, width, height, 2);\n          var a = imGet(srcData.data, x, y, width, height, 3);\n          var nr = m(matrix, 0, r) + m(matrix, 1, g) + m(matrix, 2, b) + m(matrix, 3, a) + m(matrix, 4, 1);\n          var ng = m(matrix, 5, r) + m(matrix, 6, g) + m(matrix, 7, b) + m(matrix, 8, a) + m(matrix, 9, 1);\n          var nb = m(matrix, 10, r) + m(matrix, 11, g) + m(matrix, 12, b) + m(matrix, 13, a) + m(matrix, 14, 1);\n          var na = m(matrix, 15, r) + m(matrix, 16, g) + m(matrix, 17, b) + m(matrix, 18, a) + m(matrix, 19, 1);\n\n          if (includeOpacity) {\n            nr = ng = nb = 0;\n            na *= a / 255;\n          }\n\n          imSet(srcData.data, x, y, width, height, 0, nr);\n          imSet(srcData.data, x, y, width, height, 1, ng);\n          imSet(srcData.data, x, y, width, height, 2, nb);\n          imSet(srcData.data, x, y, width, height, 3, na);\n        }\n      }\n\n      ctx.clearRect(0, 0, width, height);\n      ctx.putImageData(srcData, 0, 0);\n    }\n  }]);\n\n  return FeColorMatrixElement;\n}(Element);\n\nfunction _createSuper$D(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$D()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$D() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar MaskElement = /*#__PURE__*/function (_Element) {\n  _inherits(MaskElement, _Element);\n\n  var _super = _createSuper$D(MaskElement);\n\n  function MaskElement() {\n    var _this;\n\n    _classCallCheck(this, MaskElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'mask';\n    return _this;\n  }\n\n  _createClass(MaskElement, [{\n    key: \"apply\",\n    value: function apply(ctx, element) {\n      var document = this.document; // render as temp svg\n\n      var x = this.getAttribute('x').getPixels('x');\n      var y = this.getAttribute('y').getPixels('y');\n      var width = this.getStyle('width').getPixels('x');\n      var height = this.getStyle('height').getPixels('y');\n\n      if (!width && !height) {\n        var boundingBox = new BoundingBox();\n        this.children.forEach(function (child) {\n          boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n        });\n        x = Math.floor(boundingBox.x1);\n        y = Math.floor(boundingBox.y1);\n        width = Math.floor(boundingBox.width);\n        height = Math.floor(boundingBox.height);\n      }\n\n      var ignoredStyles = this.removeStyles(element, MaskElement.ignoreStyles);\n      var maskCanvas = document.createCanvas(x + width, y + height);\n      var maskCtx = maskCanvas.getContext('2d');\n      document.screen.setDefaults(maskCtx);\n      this.renderChildren(maskCtx); // convert mask to alpha with a fake node\n      // TODO: refactor out apply from feColorMatrix\n\n      new FeColorMatrixElement(document, {\n        nodeType: 1,\n        childNodes: [],\n        attributes: [{\n          nodeName: 'type',\n          value: 'luminanceToAlpha'\n        }, {\n          nodeName: 'includeOpacity',\n          value: 'true'\n        }]\n      }).apply(maskCtx, 0, 0, x + width, y + height);\n      var tmpCanvas = document.createCanvas(x + width, y + height);\n      var tmpCtx = tmpCanvas.getContext('2d');\n      document.screen.setDefaults(tmpCtx);\n      element.render(tmpCtx);\n      tmpCtx.globalCompositeOperation = 'destination-in';\n      tmpCtx.fillStyle = maskCtx.createPattern(maskCanvas, 'no-repeat');\n      tmpCtx.fillRect(0, 0, x + width, y + height);\n      ctx.fillStyle = tmpCtx.createPattern(tmpCanvas, 'no-repeat');\n      ctx.fillRect(0, 0, x + width, y + height); // reassign mask\n\n      this.restoreStyles(element, ignoredStyles);\n    }\n  }, {\n    key: \"render\",\n    value: function render(_) {// NO RENDER\n    }\n  }]);\n\n  return MaskElement;\n}(Element);\nMaskElement.ignoreStyles = ['mask', 'transform', 'clip-path'];\n\nfunction _createSuper$E(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$E()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$E() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar noop = function noop() {};\n\nvar ClipPathElement = /*#__PURE__*/function (_Element) {\n  _inherits(ClipPathElement, _Element);\n\n  var _super = _createSuper$E(ClipPathElement);\n\n  function ClipPathElement() {\n    var _this;\n\n    _classCallCheck(this, ClipPathElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'clipPath';\n    return _this;\n  }\n\n  _createClass(ClipPathElement, [{\n    key: \"apply\",\n    value: function apply(ctx) {\n      var document = this.document;\n      var contextProto = Reflect.getPrototypeOf(ctx);\n      var beginPath = ctx.beginPath,\n          closePath = ctx.closePath;\n\n      if (contextProto) {\n        contextProto.beginPath = noop;\n        contextProto.closePath = noop;\n      }\n\n      Reflect.apply(beginPath, ctx, []);\n      this.children.forEach(function (child) {\n        if (typeof child.path === 'undefined') {\n          return;\n        }\n\n        var transform = typeof child.elementTransform !== 'undefined' ? child.elementTransform() : null; // handle <use />\n\n        if (!transform) {\n          transform = Transform.fromElement(document, child);\n        }\n\n        if (transform) {\n          transform.apply(ctx);\n        }\n\n        child.path(ctx);\n\n        if (contextProto) {\n          contextProto.closePath = closePath;\n        }\n\n        if (transform) {\n          transform.unapply(ctx);\n        }\n      });\n      Reflect.apply(closePath, ctx, []);\n      ctx.clip();\n\n      if (contextProto) {\n        contextProto.beginPath = beginPath;\n        contextProto.closePath = closePath;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render(_) {// NO RENDER\n    }\n  }]);\n\n  return ClipPathElement;\n}(Element);\n\nfunction _createSuper$F(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$F()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$F() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar FilterElement = /*#__PURE__*/function (_Element) {\n  _inherits(FilterElement, _Element);\n\n  var _super = _createSuper$F(FilterElement);\n\n  function FilterElement() {\n    var _this;\n\n    _classCallCheck(this, FilterElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'filter';\n    return _this;\n  }\n\n  _createClass(FilterElement, [{\n    key: \"apply\",\n    value: function apply(ctx, element) {\n      // render as temp svg\n      var document = this.document,\n          children = this.children;\n      var boundingBox = element.getBoundingBox(ctx);\n\n      if (!boundingBox) {\n        return;\n      }\n\n      var px = 0;\n      var py = 0;\n      children.forEach(function (child) {\n        var efd = child.extraFilterDistance || 0;\n        px = Math.max(px, efd);\n        py = Math.max(py, efd);\n      });\n      var width = Math.floor(boundingBox.width);\n      var height = Math.floor(boundingBox.height);\n      var tmpCanvasWidth = width + 2 * px;\n      var tmpCanvasHeight = height + 2 * py;\n\n      if (tmpCanvasWidth < 1 || tmpCanvasHeight < 1) {\n        return;\n      }\n\n      var x = Math.floor(boundingBox.x);\n      var y = Math.floor(boundingBox.y);\n      var ignoredStyles = this.removeStyles(element, FilterElement.ignoreStyles);\n      var tmpCanvas = document.createCanvas(tmpCanvasWidth, tmpCanvasHeight);\n      var tmpCtx = tmpCanvas.getContext('2d');\n      document.screen.setDefaults(tmpCtx);\n      tmpCtx.translate(-x + px, -y + py);\n      element.render(tmpCtx); // apply filters\n\n      children.forEach(function (child) {\n        if (typeof child.apply === 'function') {\n          child.apply(tmpCtx, 0, 0, tmpCanvasWidth, tmpCanvasHeight);\n        }\n      }); // render on me\n\n      ctx.drawImage(tmpCanvas, 0, 0, tmpCanvasWidth, tmpCanvasHeight, x - px, y - py, tmpCanvasWidth, tmpCanvasHeight);\n      this.restoreStyles(element, ignoredStyles);\n    }\n  }, {\n    key: \"render\",\n    value: function render(_) {// NO RENDER\n    }\n  }]);\n\n  return FilterElement;\n}(Element);\nFilterElement.ignoreStyles = ['filter', 'transform', 'clip-path'];\n\nfunction _createSuper$G(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$G()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$G() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar FeDropShadowElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeDropShadowElement, _Element);\n\n  var _super = _createSuper$G(FeDropShadowElement);\n\n  function FeDropShadowElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, FeDropShadowElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'feDropShadow';\n\n    _this.addStylesFromStyleDefinition();\n\n    return _this;\n  }\n\n  _createClass(FeDropShadowElement, [{\n    key: \"apply\",\n    value: function apply(_, __, ___, ____, _____) {// TODO: implement\n    }\n  }]);\n\n  return FeDropShadowElement;\n}(Element);\n\nfunction _createSuper$H(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$H()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$H() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar FeMorphologyElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeMorphologyElement, _Element);\n\n  var _super = _createSuper$H(FeMorphologyElement);\n\n  function FeMorphologyElement() {\n    var _this;\n\n    _classCallCheck(this, FeMorphologyElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'feMorphology';\n    return _this;\n  }\n\n  _createClass(FeMorphologyElement, [{\n    key: \"apply\",\n    value: function apply(_, __, ___, ____, _____) {// TODO: implement\n    }\n  }]);\n\n  return FeMorphologyElement;\n}(Element);\n\nfunction _createSuper$I(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$I()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$I() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar FeCompositeElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeCompositeElement, _Element);\n\n  var _super = _createSuper$I(FeCompositeElement);\n\n  function FeCompositeElement() {\n    var _this;\n\n    _classCallCheck(this, FeCompositeElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'feComposite';\n    return _this;\n  }\n\n  _createClass(FeCompositeElement, [{\n    key: \"apply\",\n    value: function apply(_, __, ___, ____, _____) {// TODO: implement\n    }\n  }]);\n\n  return FeCompositeElement;\n}(Element);\n\nfunction _createSuper$J(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$J()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$J() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar FeGaussianBlurElement = /*#__PURE__*/function (_Element) {\n  _inherits(FeGaussianBlurElement, _Element);\n\n  var _super = _createSuper$J(FeGaussianBlurElement);\n\n  function FeGaussianBlurElement(document, node, captureTextNodes) {\n    var _this;\n\n    _classCallCheck(this, FeGaussianBlurElement);\n\n    _this = _super.call(this, document, node, captureTextNodes);\n    _this.type = 'feGaussianBlur';\n    _this.blurRadius = Math.floor(_this.getAttribute('stdDeviation').getNumber());\n    _this.extraFilterDistance = _this.blurRadius;\n    return _this;\n  }\n\n  _createClass(FeGaussianBlurElement, [{\n    key: \"apply\",\n    value: function apply(ctx, x, y, width, height) {\n      var document = this.document,\n          blurRadius = this.blurRadius;\n      var body = document.window ? document.window.document.body : null;\n      var canvas = ctx.canvas; // StackBlur requires canvas be on document\n\n      canvas.id = document.getUniqueId();\n\n      if (body) {\n        canvas.style.display = 'none';\n        body.appendChild(canvas);\n      }\n\n      canvasRGBA(canvas, x, y, width, height, blurRadius);\n\n      if (body) {\n        body.removeChild(canvas);\n      }\n    }\n  }]);\n\n  return FeGaussianBlurElement;\n}(Element);\n\nfunction _createSuper$K(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$K()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$K() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar TitleElement = /*#__PURE__*/function (_Element) {\n  _inherits(TitleElement, _Element);\n\n  var _super = _createSuper$K(TitleElement);\n\n  function TitleElement() {\n    var _this;\n\n    _classCallCheck(this, TitleElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'title';\n    return _this;\n  }\n\n  return TitleElement;\n}(Element);\n\nfunction _createSuper$L(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct$L()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$L() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar DescElement = /*#__PURE__*/function (_Element) {\n  _inherits(DescElement, _Element);\n\n  var _super = _createSuper$L(DescElement);\n\n  function DescElement() {\n    var _this;\n\n    _classCallCheck(this, DescElement);\n\n    _this = _super.apply(this, arguments);\n    _this.type = 'desc';\n    return _this;\n  }\n\n  return DescElement;\n}(Element);\n\nvar elementTypes = {\n  'svg': SVGElement,\n  'rect': RectElement,\n  'circle': CircleElement,\n  'ellipse': EllipseElement,\n  'line': LineElement,\n  'polyline': PolylineElement,\n  'polygon': PolygonElement,\n  'path': PathElement,\n  'pattern': PatternElement,\n  'marker': MarkerElement,\n  'defs': DefsElement,\n  'linearGradient': LinearGradientElement,\n  'radialGradient': RadialGradientElement,\n  'stop': StopElement,\n  'animate': AnimateElement,\n  'animateColor': AnimateColorElement,\n  'animateTransform': AnimateTransformElement,\n  'font': FontElement,\n  'font-face': FontFaceElement,\n  'missing-glyph': MissingGlyphElement,\n  'glyph': GlyphElement,\n  'text': TextElement,\n  'tspan': TSpanElement,\n  'tref': TRefElement,\n  'a': AElement,\n  'textPath': TextPathElement,\n  'image': ImageElement,\n  'g': GElement,\n  'symbol': SymbolElement,\n  'style': StyleElement,\n  'use': UseElement,\n  'mask': MaskElement,\n  'clipPath': ClipPathElement,\n  'filter': FilterElement,\n  'feDropShadow': FeDropShadowElement,\n  'feMorphology': FeMorphologyElement,\n  'feComposite': FeCompositeElement,\n  'feColorMatrix': FeColorMatrixElement,\n  'feGaussianBlur': FeGaussianBlurElement,\n  'title': TitleElement,\n  'desc': DescElement\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction createCanvas(width, height) {\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n\nfunction createImage(_x) {\n  return _createImage.apply(this, arguments);\n}\n\nfunction _createImage() {\n  _createImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(src) {\n    var anonymousCrossOrigin,\n        image,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            anonymousCrossOrigin = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;\n            image = document.createElement('img');\n\n            if (anonymousCrossOrigin) {\n              image.crossOrigin = 'Anonymous';\n            }\n\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              image.onload = function () {\n                resolve(image);\n              };\n\n              image.onerror = function () {\n                reject();\n              };\n\n              image.src = src;\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _createImage.apply(this, arguments);\n}\n\nvar Document = /*#__PURE__*/function () {\n  function Document(canvg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$rootEmSize = _ref.rootEmSize,\n        rootEmSize = _ref$rootEmSize === void 0 ? 12 : _ref$rootEmSize,\n        _ref$emSize = _ref.emSize,\n        emSize = _ref$emSize === void 0 ? 12 : _ref$emSize,\n        _ref$createCanvas = _ref.createCanvas,\n        createCanvas = _ref$createCanvas === void 0 ? Document.createCanvas : _ref$createCanvas,\n        _ref$createImage = _ref.createImage,\n        createImage = _ref$createImage === void 0 ? Document.createImage : _ref$createImage,\n        anonymousCrossOrigin = _ref.anonymousCrossOrigin;\n\n    _classCallCheck(this, Document);\n\n    this.canvg = canvg;\n    this.definitions = {};\n    this.styles = {};\n    this.stylesSpecificity = {};\n    this.images = [];\n    this.fonts = [];\n    this.emSizeStack = [];\n    this.uniqueId = 0;\n    this.screen = canvg.screen;\n    this.rootEmSize = rootEmSize;\n    this.emSize = emSize;\n    this.createCanvas = createCanvas;\n    this.createImage = this.bindCreateImage(createImage, anonymousCrossOrigin);\n    this.screen.wait(this.isImagesLoaded.bind(this));\n    this.screen.wait(this.isFontsLoaded.bind(this));\n  }\n\n  _createClass(Document, [{\n    key: \"bindCreateImage\",\n    value: function bindCreateImage(createImage, anonymousCrossOrigin) {\n      if (typeof anonymousCrossOrigin === 'boolean') {\n        return function (source, forceAnonymousCrossOrigin) {\n          return createImage(source, typeof forceAnonymousCrossOrigin === 'boolean' ? forceAnonymousCrossOrigin : anonymousCrossOrigin);\n        };\n      }\n\n      return createImage;\n    }\n  }, {\n    key: \"popEmSize\",\n    value: function popEmSize() {\n      var emSizeStack = this.emSizeStack;\n      emSizeStack.pop();\n    }\n  }, {\n    key: \"getUniqueId\",\n    value: function getUniqueId() {\n      return \"canvg\".concat(++this.uniqueId);\n    }\n  }, {\n    key: \"isImagesLoaded\",\n    value: function isImagesLoaded() {\n      return this.images.every(function (_) {\n        return _.loaded;\n      });\n    }\n  }, {\n    key: \"isFontsLoaded\",\n    value: function isFontsLoaded() {\n      return this.fonts.every(function (_) {\n        return _.loaded;\n      });\n    }\n  }, {\n    key: \"createDocumentElement\",\n    value: function createDocumentElement(document) {\n      var documentElement = this.createElement(document.documentElement);\n      documentElement.root = true;\n      documentElement.addStylesFromStyleDefinition();\n      this.documentElement = documentElement;\n      return documentElement;\n    }\n  }, {\n    key: \"createElement\",\n    value: function createElement(node) {\n      var elementType = node.nodeName.replace(/^[^:]+:/, '');\n      var ElementType = Document.elementTypes[elementType];\n\n      if (typeof ElementType !== 'undefined') {\n        return new ElementType(this, node);\n      }\n\n      return new UnknownElement(this, node);\n    }\n  }, {\n    key: \"createTextNode\",\n    value: function createTextNode(node) {\n      return new TextNode(this, node);\n    }\n  }, {\n    key: \"setViewBox\",\n    value: function setViewBox(config) {\n      this.screen.setViewBox(_objectSpread({\n        document: this\n      }, config));\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.screen.window;\n    }\n  }, {\n    key: \"fetch\",\n    get: function get() {\n      return this.screen.fetch;\n    }\n  }, {\n    key: \"ctx\",\n    get: function get() {\n      return this.screen.ctx;\n    }\n  }, {\n    key: \"emSize\",\n    get: function get() {\n      var emSizeStack = this.emSizeStack;\n      return emSizeStack[emSizeStack.length - 1];\n    },\n    set: function set(value) {\n      var emSizeStack = this.emSizeStack;\n      emSizeStack.push(value);\n    }\n  }]);\n\n  return Document;\n}();\nDocument.createCanvas = createCanvas;\nDocument.createImage = createImage;\nDocument.elementTypes = elementTypes;\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n/**\n * SVG renderer on canvas.\n */\n\nvar Canvg = /*#__PURE__*/function () {\n  /**\n   * Main constructor.\n   * @param ctx - Rendering context.\n   * @param svg - SVG Document.\n   * @param options - Rendering options.\n   */\n  function Canvg(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, Canvg);\n\n    this.parser = new Parser(options);\n    this.screen = new Screen(ctx, options);\n    this.options = options;\n    var document = new Document(this, options);\n    var documentElement = document.createDocumentElement(svg);\n    this.document = document;\n    this.documentElement = documentElement;\n  }\n  /**\n   * Create Canvg isntance from SVG source string or URL.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string or URL.\n   * @param options - Rendering options.\n   */\n\n\n  _createClass(Canvg, [{\n    key: \"fork\",\n\n    /**\n     * Create new Canvg instance with inherited options.\n     * @param ctx - Rendering context.\n     * @param svg - SVG source string or URL.\n     * @param options - Rendering options.\n     */\n    value: function fork(ctx, svg) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return Canvg.from(ctx, svg, _objectSpread$1({}, this.options, {}, options));\n    }\n    /**\n     * Create new Canvg instance with inherited options.\n     * @param ctx - Rendering context.\n     * @param svg - SVG source string.\n     * @param options - Rendering options.\n     */\n\n  }, {\n    key: \"forkString\",\n    value: function forkString(ctx, svg) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return Canvg.fromString(ctx, svg, _objectSpread$1({}, this.options, {}, options));\n    }\n    /**\n     * Document is ready promise.\n     */\n\n  }, {\n    key: \"ready\",\n    value: function ready() {\n      return this.screen.ready();\n    }\n    /**\n     * Document is ready value.\n     */\n\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      return this.screen.isReady();\n    }\n    /**\n     * Render only first frame, ignoring animations and mouse.\n     * @param options - Rendering options.\n     */\n\n  }, {\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var options,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                this.start(_objectSpread$1({\n                  enableRedraw: true,\n                  ignoreAnimation: true,\n                  ignoreMouse: true\n                }, options));\n                _context.next = 4;\n                return this.ready();\n\n              case 4:\n                this.stop();\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function render() {\n        return _render.apply(this, arguments);\n      }\n\n      return render;\n    }()\n    /**\n     * Start rendering.\n     * @param options - Render options.\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var documentElement = this.documentElement,\n          screen = this.screen,\n          baseOptions = this.options;\n      screen.start(documentElement, _objectSpread$1({\n        enableRedraw: true\n      }, baseOptions, {}, options));\n    }\n    /**\n     * Stop rendering.\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.screen.stop();\n    }\n    /**\n     * Resize SVG to fit in given size.\n     * @param width\n     * @param height\n     * @param preserveAspectRatio\n     */\n\n  }, {\n    key: \"resize\",\n    value: function resize(width) {\n      var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n      var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this.documentElement.resize(width, height, preserveAspectRatio);\n    }\n  }], [{\n    key: \"from\",\n    value: function () {\n      var _from = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ctx, svg) {\n        var options,\n            parser,\n            svgDocument,\n            _args2 = arguments;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n                parser = new Parser(options);\n                _context2.next = 4;\n                return parser.parse(svg);\n\n              case 4:\n                svgDocument = _context2.sent;\n                return _context2.abrupt(\"return\", new Canvg(ctx, svgDocument, options));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function from(_x, _x2) {\n        return _from.apply(this, arguments);\n      }\n\n      return from;\n    }()\n    /**\n     * Create Canvg isntance from SVG source string.\n     * @param ctx - Rendering context.\n     * @param svg - SVG source string.\n     * @param options - Rendering options.\n     */\n\n  }, {\n    key: \"fromString\",\n    value: function fromString(ctx, svg) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var parser = new Parser(options);\n      var svgDocument = parser.parseFromString(svg);\n      return new Canvg(ctx, svgDocument, options);\n    }\n  }]);\n\n  return Canvg;\n}();\n\n/**\n * Options preset for `OffscreenCanvas`.\n * @param config - Preset requirements.\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\n */\nfunction offscreen() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      DOMParserFallback = _ref.DOMParser;\n\n  var preset = {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser: DOMParserFallback,\n    createCanvas: function createCanvas(width, height) {\n      return new OffscreenCanvas(width, height);\n    },\n    createImage: function createImage(url) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response, blob, img;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(url);\n\n              case 2:\n                response = _context.sent;\n                _context.next = 5;\n                return response.blob();\n\n              case 5:\n                blob = _context.sent;\n                _context.next = 8;\n                return createImageBitmap(blob);\n\n              case 8:\n                img = _context.sent;\n                return _context.abrupt(\"return\", img);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  };\n\n  if (typeof DOMParser !== 'undefined' || typeof DOMParserFallback === 'undefined') {\n    Reflect.deleteProperty(preset, 'DOMParser');\n  }\n\n  return preset;\n}\n\n/**\n * Options preset for `node-canvas`.\n * @param config - Preset requirements.\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\n * @param config.canvas - `node-canvas` exports.\n * @param config.fetch - WHATWG-compatible `fetch` function.\n */\nfunction node(_ref) {\n  var DOMParser = _ref.DOMParser,\n      canvas = _ref.canvas,\n      fetch = _ref.fetch;\n  return {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser: DOMParser,\n    fetch: fetch,\n    createCanvas: canvas.createCanvas,\n    createImage: canvas.loadImage\n  };\n}\n\n\n\nvar index = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\toffscreen: offscreen,\n\tnode: node\n});\n\nexport default Canvg;\nexport { AElement, AnimateColorElement, AnimateElement, AnimateTransformElement, BoundingBox, CB1, CB2, CB3, CB4, Canvg, CircleElement, ClipPathElement, DefsElement, DescElement, Document, Element, EllipseElement, FeColorMatrixElement, FeCompositeElement, FeDropShadowElement, FeGaussianBlurElement, FeMorphologyElement, FilterElement, Font, FontElement, FontFaceElement, GElement, GlyphElement, GradientElement, ImageElement, LineElement, LinearGradientElement, MarkerElement, MaskElement, Matrix, MissingGlyphElement, Mouse, PSEUDO_ZERO, Parser, PathElement, PathParser, PatternElement, Point, PolygonElement, PolylineElement, Property, QB1, QB2, QB3, RadialGradientElement, RectElement, RenderedElement, Rotate, SVGElement, SVGFontLoader, Scale, Screen, Skew, SkewX, SkewY, StopElement, StyleElement, SymbolElement, TRefElement, TSpanElement, TextElement, TextPathElement, TitleElement, Transform, Translate, UnknownElement, UseElement, ViewPort, compressSpaces, getSelectorSpecificity, normalizeAttributeName, normalizeColor, parseExternalUrl, index as presets, toNumbers, trimLeft, trimRight, vectorMagnitude, vectorsAngle, vectorsRatio };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}